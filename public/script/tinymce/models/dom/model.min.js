var _=Object.assign;(function(){"use strict";var Zc=tinymce.util.Tools.resolve("tinymce.ModelManager");const nn=e=>t=>(o=>{const n=typeof o;return o===null?"null":n==="object"&&Array.isArray(o)?"array":n==="object"&&(r=s=o,(l=String).prototype.isPrototypeOf(r)||((a=s.constructor)===null||a===void 0?void 0:a.name)===l.name)?"string":n;var r,s,l,a})(t)===e,rn=e=>t=>typeof t===e,Vr=e=>t=>e===t,Tt=nn("string"),ei=nn("object"),Qt=nn("array"),ti=Vr(null),oi=rn("boolean"),ni=Vr(void 0),Rt=e=>!(t=>t==null)(e),Ve=rn("function"),sn=rn("number"),N=()=>{},O=e=>()=>e,H=e=>e,ri=(e,t)=>e===t;function ne(e,...t){return(...o)=>{const n=t.concat(o);return e.apply(null,n)}}const ln=e=>t=>!e(t),$r=e=>e(),Ce=O(!1),M=O(!0);class h{constructor(t,o){this.tag=t,this.value=o}static some(t){return new h(!0,t)}static none(){return h.singletonNone}fold(t,o){return this.tag?o(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?h.some(t(this.value)):h.none()}bind(t){return this.tag?t(this.value):h.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:h.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t!=null?t:"Called getOrDie on None")}static from(t){return Rt(t)?h.some(t):h.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}h.singletonNone=new h(!1);const Ur=Array.prototype.slice,si=Array.prototype.indexOf,li=Array.prototype.push,$=(e,t)=>{return o=e,n=t,si.call(o,n)>-1;var o,n},ue=(e,t)=>{for(let o=0,n=e.length;o<n;o++)if(t(e[o],o))return!0;return!1},pe=(e,t)=>{const o=[];for(let n=0;n<e;n++)o.push(t(n));return o},E=(e,t)=>{const o=e.length,n=new Array(o);for(let r=0;r<o;r++){const s=e[r];n[r]=t(s,r)}return n},A=(e,t)=>{for(let o=0,n=e.length;o<n;o++)t(e[o],o)},Gr=(e,t)=>{const o=[],n=[];for(let r=0,s=e.length;r<s;r++){const l=e[r];(t(l,r)?o:n).push(l)}return{pass:o,fail:n}},K=(e,t)=>{const o=[];for(let n=0,r=e.length;n<r;n++){const s=e[n];t(s,n)&&o.push(s)}return o},Se=(e,t,o)=>(((n,r)=>{for(let s=n.length-1;s>=0;s--)r(n[s],s)})(e,(n,r)=>{o=t(o,n,r)}),o),Te=(e,t,o)=>(A(e,(n,r)=>{o=t(o,n,r)}),o),Re=(e,t)=>((o,n,r)=>{for(let s=0,l=o.length;s<l;s++){const a=o[s];if(n(a,s))return h.some(a);if(r(a,s))break}return h.none()})(e,t,Ce),an=(e,t)=>{for(let o=0,n=e.length;o<n;o++)if(t(e[o],o))return h.some(o);return h.none()},Kr=e=>{const t=[];for(let o=0,n=e.length;o<n;++o){if(!Qt(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);li.apply(t,e[o])}return t},ee=(e,t)=>Kr(E(e,t)),we=(e,t)=>{for(let o=0,n=e.length;o<n;++o)if(t(e[o],o)!==!0)return!1;return!0},cn=(e,t)=>{const o={};for(let n=0,r=e.length;n<r;n++){const s=e[n];o[String(s)]=t(s,n)}return o},Yr=(e,t)=>t>=0&&t<e.length?h.some(e[t]):h.none(),Xt=e=>Yr(e,0),Jr=e=>Yr(e,e.length-1),ke=(e,t)=>{for(let o=0;o<e.length;o++){const n=t(e[o],o);if(n.isSome())return n}return h.none()},Dt=Object.keys,Qr=Object.hasOwnProperty,fe=(e,t)=>{const o=Dt(e);for(let n=0,r=o.length;n<r;n++){const s=o[n];t(e[s],s)}},Xr=(e,t)=>ai(e,(o,n)=>({k:n,v:t(o,n)})),ai=(e,t)=>{const o={};return fe(e,(n,r)=>{const s=t(n,r);o[s.k]=s.v}),o},Zr=(e,t)=>{const o=[];return fe(e,(n,r)=>{o.push(t(n,r))}),o},es=e=>Zr(e,H),mn=(e,t)=>Qr.call(e,t);typeof window!="undefined"||Function("return this;")();const I=e=>e.dom.nodeName.toLowerCase(),ts=e=>e.dom.nodeType,Zt=e=>t=>ts(t)===e,ci=e=>ts(e)===8||I(e)==="#comment",Ee=Zt(1),$e=Zt(3),os=Zt(9),ii=Zt(11),be=e=>t=>Ee(t)&&I(t)===e,dn=(e,t,o)=>{if(!(Tt(o)||oi(o)||sn(o)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,o+"")},Y=(e,t,o)=>{dn(e.dom,t,o)},Ot=(e,t)=>{const o=e.dom;fe(t,(n,r)=>{dn(o,r,n)})},st=(e,t)=>{const o=e.dom.getAttribute(t);return o===null?void 0:o},Ie=(e,t)=>h.from(st(e,t)),q=(e,t)=>{e.dom.removeAttribute(t)},ns=e=>Te(e.dom.attributes,(t,o)=>(t[o.name]=o.value,t),{}),kt=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},S={fromHtml:(e,t)=>{const o=(t||document).createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1){const n="HTML does not have a single root node";throw console.error(n,e),new Error(n)}return kt(o.childNodes[0])},fromTag:(e,t)=>{const o=(t||document).createElement(e);return kt(o)},fromText:(e,t)=>{const o=(t||document).createTextNode(e);return kt(o)},fromDom:kt,fromPoint:(e,t,o)=>h.from(e.dom.elementFromPoint(t,o)).map(kt)},ge=(e,t)=>{const o=e.dom;if(o.nodeType!==1)return!1;{const n=o;if(n.matches!==void 0)return n.matches(t);if(n.msMatchesSelector!==void 0)return n.msMatchesSelector(t);if(n.webkitMatchesSelector!==void 0)return n.webkitMatchesSelector(t);if(n.mozMatchesSelector!==void 0)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},rs=e=>e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11||e.childElementCount===0,ss=(e,t)=>{const o=t===void 0?document:t.dom;return rs(o)?h.none():h.from(o.querySelector(e)).map(S.fromDom)},j=(e,t)=>e.dom===t.dom,un=(e,t)=>{const o=e.dom,n=t.dom;return o!==n&&o.contains(n)},mi=ge,eo=e=>S.fromDom(e.dom.ownerDocument),to=e=>os(e)?e:eo(e),Ue=e=>h.from(e.dom.parentNode).map(S.fromDom),ls=(e,t)=>{const o=Ve(t)?t:Ce;let n=e.dom;const r=[];for(;n.parentNode!==null&&n.parentNode!==void 0;){const s=n.parentNode,l=S.fromDom(s);if(r.push(l),o(l)===!0)break;n=s}return r},as=e=>h.from(e.dom.previousSibling).map(S.fromDom),oo=e=>h.from(e.dom.nextSibling).map(S.fromDom),he=e=>E(e.dom.childNodes,S.fromDom),no=(e,t)=>{const o=e.dom.childNodes;return h.from(o[t]).map(S.fromDom)},ro=(e,t)=>{Ue(e).each(o=>{o.dom.insertBefore(t.dom,e.dom)})},Et=(e,t)=>{oo(e).fold(()=>{Ue(e).each(o=>{P(o,t)})},o=>{ro(o,t)})},fn=(e,t)=>{(n=>no(n,0))(e).fold(()=>{P(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})},P=(e,t)=>{e.dom.appendChild(t.dom)},di=(e,t)=>{ro(e,t),P(t,e)},cs=(e,t)=>{A(t,(o,n)=>{const r=n===0?e:t[n-1];Et(r,o)})},Ne=(e,t)=>{A(t,o=>{P(e,o)})},gn=e=>{e.dom.textContent="",A(he(e),t=>{le(t)})},le=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},ui=e=>{const t=he(e);t.length>0&&cs(e,t),le(e)},is=(e,t)=>S.fromDom(e.dom.cloneNode(t)),ms=e=>is(e,!1),lt=e=>is(e,!0),ds=(e,t)=>{const o=S.fromTag(t),n=ns(e);return Ot(o,n),o},fi=["tfoot","thead","tbody","colgroup"],us=(e,t,o)=>({element:e,rowspan:t,colspan:o}),hn=(e,t,o)=>({element:e,cells:t,section:o}),ae=(e,t,o)=>({element:e,isNew:t,isLocked:o}),Ge=(e,t,o,n)=>({element:e,cells:t,section:o,isNew:n}),fs=Ve(Element.prototype.attachShadow)&&Ve(Node.prototype.getRootNode),gi=O(fs),hi=fs?e=>S.fromDom(e.dom.getRootNode()):to,pi=e=>S.fromDom(e.dom.host),Be=e=>{const t=$e(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const o=t.ownerDocument;return(s=>{const l=hi(s);return ii(a=l)&&Rt(a.dom.host)?h.some(l):h.none();var a})(S.fromDom(t)).fold(()=>o.body.contains(t),(n=Be,r=pi,s=>n(r(s))));var n,r},gs=e=>{const t=e.dom.body;if(t==null)throw new Error("Body is not available yet");return S.fromDom(t)},hs=(e,t)=>{let o=[];return A(he(e),n=>{t(n)&&(o=o.concat([n])),o=o.concat(hs(n,t))}),o},Nt=(e,t,o)=>((n,r,s)=>K(ls(n,s),l=>ge(l,t)))(e,0,o),so=(e,t)=>((o,n)=>K(he(o),r=>ge(r,t)))(e),ze=(e,t)=>((o,n)=>{const r=n===void 0?document:n.dom;return rs(r)?[]:E(r.querySelectorAll(o),S.fromDom)})(t,e);var ps=(e,t,o,n,r)=>e(o,n)?h.some(o):Ve(r)&&r(o)?h.none():t(o,n,r);const Bt=(e,t,o)=>{let n=e.dom;const r=Ve(o)?o:Ce;for(;n.parentNode;){n=n.parentNode;const s=S.fromDom(n);if(t(s))return h.some(s);if(r(s))break}return h.none()},Ke=(e,t,o)=>Bt(e,n=>ge(n,t),o),pn=(e,t)=>((o,n)=>Re(o.dom.childNodes,r=>{return s=S.fromDom(r),ge(s,t);var s}).map(S.fromDom))(e),zt=(e,t)=>ss(t,e),J=(e,t,o)=>ps((n,r)=>ge(n,r),Ke,e,t,o),wn=(e,t,o=ri)=>e.exists(n=>o(n,t)),ws=e=>{const t=[],o=n=>{t.push(n)};for(let n=0;n<e.length;n++)e[n].each(o);return t},bn=(e,t)=>e?h.some(t):h.none(),bs=(e,t,o)=>t===""||e.length>=t.length&&e.substr(o,o+t.length)===t,ce=(e,t,o=0,n)=>{const r=e.indexOf(t,o);return r!==-1&&(!!ni(n)||r+t.length<=n)},vs=(e,t)=>bs(e,t,0),lo=(e,t)=>bs(e,t,e.length-t.length),wi=(e=>t=>t.replace(e,""))(/^\s+|\s+$/g),bi=e=>e.length>0,at=e=>e.style!==void 0&&Ve(e.style.getPropertyValue),ys=(e,t,o)=>{if(!Tt(o))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);at(e)&&e.style.setProperty(t,o)},Q=(e,t,o)=>{const n=e.dom;ys(n,t,o)},At=(e,t)=>{const o=e.dom;fe(t,(n,r)=>{ys(o,r,n)})},Ye=(e,t)=>{const o=e.dom,n=window.getComputedStyle(o).getPropertyValue(t);return n!==""||Be(e)?n:xs(o,t)},xs=(e,t)=>at(e)?e.style.getPropertyValue(t):"",vn=(e,t)=>{const o=e.dom,n=xs(o,t);return h.from(n).filter(r=>r.length>0)},Pe=(e,t)=>{((o,n)=>{at(o)&&o.style.removeProperty(n)})(e.dom,t),wn(Ie(e,"style").map(wi),"")&&q(e,"style")},Ae=(e,t,o=0)=>Ie(e,t).map(n=>parseInt(n,10)).getOr(o),yn=(e,t)=>Ae(e,t,1),xn=e=>be("col")(e)?Ae(e,"span",1)>1:yn(e,"colspan")>1,Cs=e=>yn(e,"rowspan")>1,ao=(e,t)=>parseInt(Ye(e,t),10),Wt=O(10),Cn=O(10),co=(e,t)=>Sn(e,t,M),Sn=(e,t,o)=>ee(he(e),n=>ge(n,t)?o(n)?[n]:[]:Sn(n,t,o)),Ss=(e,t)=>((o,n,r=Ce)=>r(n)?h.none():$(o,I(n))?h.some(n):Ke(n,o.join(","),s=>ge(s,"table")||r(s)))(["td","th"],e,t),ct=e=>co(e,"th,td"),Tn=e=>ge(e,"colgroup")?so(e,"col"):ee(Rs(e),t=>so(t,"col")),ie=(e,t)=>J(e,"table",t),Ts=e=>co(e,"tr"),Rs=e=>ie(e).fold(O([]),t=>so(t,"colgroup")),Ds=(e,t)=>E(e,o=>{if(I(o)==="colgroup"){const n=E(Tn(o),r=>{const s=Ae(r,"span",1);return us(r,1,s)});return hn(o,n,"colgroup")}{const n=E(ct(o),r=>{const s=Ae(r,"rowspan",1),l=Ae(r,"colspan",1);return us(r,s,l)});return hn(o,n,t(o))}}),vi=e=>Ue(e).map(t=>{const o=I(t);return(n=>$(fi,n))(o)?o:"tbody"}).getOr("tbody"),Os=e=>{const t=Ts(e),o=[...Rs(e),...t];return Ds(o,vi)},Lt=e=>{let t,o=!1;return(...n)=>(o||(o=!0,t=e.apply(null,n)),t)},ks=()=>Rn(0,0),Rn=(e,t)=>({major:e,minor:t}),Mt={nu:Rn,detect:(e,t)=>{const o=String(t).toLowerCase();return e.length===0?ks():((n,r)=>{const s=((a,c)=>{for(let i=0;i<a.length;i++){const u=a[i];if(u.test(c))return u}})(n,r);if(!s)return{major:0,minor:0};const l=a=>Number(r.replace(s,"$"+a));return Rn(l(1),l(2))})(e,o)},unknown:ks},Es=(e,t)=>{const o=String(t).toLowerCase();return Re(e,n=>n.search(o))},Dn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,We=e=>t=>ce(t,e),yi=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>ce(e,"edge/")&&ce(e,"chrome")&&ce(e,"safari")&&ce(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Dn],search:e=>ce(e,"chrome")&&!ce(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>ce(e,"msie")||ce(e,"trident")},{name:"Opera",versionRegexes:[Dn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:We("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:We("firefox")},{name:"Safari",versionRegexes:[Dn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(ce(e,"safari")||ce(e,"mobile/"))&&ce(e,"applewebkit")}],xi=[{name:"Windows",search:We("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>ce(e,"iphone")||ce(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:We("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:We("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:We("linux"),versionRegexes:[]},{name:"Solaris",search:We("sunos"),versionRegexes:[]},{name:"FreeBSD",search:We("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:We("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ns={browsers:O(yi),oses:O(xi)},Bs="Edge",zs="Chromium",As="Opera",Ws="Firefox",Ls="Safari",Ms=e=>{const t=e.current,o=e.version,n=r=>()=>t===r;return{current:t,version:o,isEdge:n(Bs),isChromium:n(zs),isIE:n("IE"),isOpera:n(As),isFirefox:n(Ws),isSafari:n(Ls)}},Ci=()=>Ms({current:void 0,version:Mt.unknown()}),Si=Ms,js=(O(Bs),O(zs),O("IE"),O(As),O(Ws),O(Ls),"Windows"),_s="Android",Is="Linux",Ps="macOS",Fs="Solaris",Hs="FreeBSD",qs="ChromeOS",Vs=e=>{const t=e.current,o=e.version,n=r=>()=>t===r;return{current:t,version:o,isWindows:n(js),isiOS:n("iOS"),isAndroid:n(_s),isMacOS:n(Ps),isLinux:n(Is),isSolaris:n(Fs),isFreeBSD:n(Hs),isChromeOS:n(qs)}},Ti=()=>Vs({current:void 0,version:Mt.unknown()}),Ri=Vs,Di=(O(js),O("iOS"),O(_s),O(Is),O(Ps),O(Fs),O(Hs),O(qs),e=>window.matchMedia(e).matches);let Oi=Lt(()=>((e,t,o)=>{const n=Ns.browsers(),r=Ns.oses(),s=t.bind(c=>((i,u)=>ke(u.brands,m=>{const d=m.brand.toLowerCase();return Re(i,f=>{var p;return d===((p=f.brand)===null||p===void 0?void 0:p.toLowerCase())}).map(f=>({current:f.name,version:Mt.nu(parseInt(m.version,10),0)}))}))(n,c)).orThunk(()=>((c,i)=>Es(c,i).map(u=>{const m=Mt.detect(u.versionRegexes,i);return{current:u.name,version:m}}))(n,e)).fold(Ci,Si),l=((c,i)=>Es(c,i).map(u=>{const m=Mt.detect(u.versionRegexes,i);return{current:u.name,version:m}}))(r,e).fold(Ti,Ri),a=((c,i,u,m)=>{const d=c.isiOS()&&/ipad/i.test(u)===!0,f=c.isiOS()&&!d,p=c.isiOS()||c.isAndroid(),g=p||m("(pointer:coarse)"),w=d||!f&&p&&m("(min-device-width:768px)"),b=f||p&&!w,y=i.isSafari()&&c.isiOS()&&/safari/i.test(u)===!1,v=!b&&!w&&!y;return{isiPad:O(d),isiPhone:O(f),isTablet:O(w),isPhone:O(b),isTouch:O(g),isAndroid:c.isAndroid,isiOS:c.isiOS,isWebView:O(y),isDesktop:O(v)}})(l,s,e,o);return{browser:s,os:l,deviceType:a}})(navigator.userAgent,h.from(navigator.userAgentData),Di));const $s=()=>Oi(),Us=(e,t)=>{const o=r=>{const s=t(r);if(s<=0||s===null){const l=Ye(r,e);return parseFloat(l)||0}return s},n=(r,s)=>Te(s,(l,a)=>{const c=Ye(r,a),i=c===void 0?0:parseInt(c,10);return isNaN(i)?l:l+i},0);return{set:(r,s)=>{if(!sn(s)&&!s.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+s);const l=r.dom;at(l)&&(l.style[e]=s+"px")},get:o,getOuter:o,aggregate:n,max:(r,s,l)=>{const a=n(r,l);return s>a?s-a:0}}},it=(e,t,o)=>((n,r)=>(s=>{const l=parseFloat(s);return isNaN(l)?h.none():h.some(l)})(n).getOr(r))(Ye(e,t),o),Gs=Us("width",e=>e.dom.offsetWidth),Le=e=>Gs.get(e),On=e=>Gs.getOuter(e),kn=e=>((t,o)=>{const n=t.dom,r=n.getBoundingClientRect().width||n.offsetWidth;return o==="border-box"?r:((s,l,a,c)=>l-it(s,"padding-left",0)-it(s,"padding-right",0)-it(s,"border-left-width",0)-it(s,"border-right-width",0))(t,r)})(e,"content-box"),En=(e,t,o)=>{const n=e.cells,r=n.slice(0,t),s=n.slice(t),l=r.concat(o).concat(s);return Ys(e,l)},Ks=(e,t,o)=>En(e,t,[o]),jt=(e,t,o)=>{e.cells[t]=o},Ys=(e,t)=>Ge(e.element,t,e.section,e.isNew),ve=(e,t)=>e.cells[t],me=(e,t)=>ve(e,t).element,ye=e=>e.cells.length,X=e=>{const t=Gr(e,o=>o.section==="colgroup");return{rows:t.fail,cols:t.pass}},Js=(e,t,o)=>{const n=E(e.cells,o);return Ge(t(e.element),n,e.section,!0)},io="data-snooker-locked-cols",ki=e=>Ie(e,io).bind(t=>h.from(t.match(/\d+/g))).map(t=>cn(t,M)),Je=e=>{const t=Te(X(e).rows,(n,r)=>(A(r.cells,(s,l)=>{s.isLocked&&(n[l]=!0)}),n),{}),o=Zr(t,(n,r)=>parseInt(r,10));return((n,r)=>{const s=Ur.call(n,0);return s.sort(void 0),s})(o)},Nn=(e,t)=>e+","+t,Qs=(e,t)=>{const o=ee(e.all,n=>n.cells);return K(o,t)},Xs=e=>{const t={},o=[],n=Xt(e).map(d=>d.element).bind(ie).bind(ki).getOr({});let r=0,s=0,l=0;const{pass:a,fail:c}=Gr(e,d=>d.section==="colgroup");A(c,d=>{const f=[];A(d.cells,p=>{let g=0;for(;t[Nn(l,g)]!==void 0;)g++;const w=((y,v)=>mn(y,v)&&y[v]!==void 0&&y[v]!==null)(n,g.toString()),b=((y,v,x,C,T,R)=>({element:y,rowspan:v,colspan:x,row:C,column:T,isLocked:R}))(p.element,p.rowspan,p.colspan,l,g,w);for(let y=0;y<p.colspan;y++)for(let v=0;v<p.rowspan;v++){const x=g+y,C=Nn(l+v,x);t[C]=b,s=Math.max(s,x+1)}f.push(b)}),r++,o.push(hn(d.element,f,d.section)),l++});const{columns:i,colgroups:u}=Jr(a).map(d=>{const f=(g=>{const w={};let b=0;return A(g.cells,y=>{const v=y.colspan;pe(v,x=>{const C=b+x;w[C]=((T,R,D)=>({element:T,colspan:R,column:D}))(y.element,v,C)}),b+=v}),w})(d);return{colgroups:[((g,w)=>({element:g,columns:w}))(d.element,es(f))],columns:f}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:((d,f)=>({rows:d,columns:f}))(r,s),access:t,all:o,columns:i,colgroups:u}},te=e=>{const t=Os(e);return Xs(t)},mo=Xs,Fe=(e,t,o)=>h.from(e.access[Nn(t,o)]),uo=(e,t,o)=>{const n=Qs(e,r=>o(t,r.element));return n.length>0?h.some(n[0]):h.none()},Zs=Qs,Bn=e=>ee(e.all,t=>t.cells),fo=e=>es(e.columns),_t=e=>Dt(e.columns).length>0,el=(e,t)=>h.from(e.columns[t]),zn=(e,t=M)=>{const o=e.grid,n=pe(o.columns,H),r=pe(o.rows,H);return E(n,s=>tl(()=>ee(r,l=>Fe(e,l,s).filter(a=>a.column===s).toArray()),l=>l.colspan===1&&t(l.element),()=>Fe(e,0,s)))},tl=(e,t,o)=>{const n=e();return Re(n,t).orThunk(()=>h.from(n[0]).orThunk(o)).map(r=>r.element)},ol=e=>{const t=e.grid,o=pe(t.rows,H),n=pe(t.columns,H);return E(o,r=>tl(()=>ee(n,s=>Fe(e,r,s).filter(l=>l.row===r).fold(O([]),l=>[l])),s=>s.rowspan===1,()=>Fe(e,r,0)))},nl=(e,t)=>o=>Ei(o)==="rtl"?t:e,Ei=e=>Ye(e,"direction")==="rtl"?"rtl":"ltr",rl=Us("height",e=>{const t=e.dom;return Be(e)?t.getBoundingClientRect().height:t.offsetHeight}),An=e=>rl.get(e),sl=e=>rl.getOuter(e),ll=(e,t)=>({left:e,top:t,translate:(o,n)=>ll(e+o,t+n)}),Me=ll,go=(e,t)=>e!==void 0?e:t!==void 0?t:0,ho=e=>{const t=e.dom.ownerDocument,o=t.body,n=t.defaultView,r=t.documentElement;if(o===e.dom)return Me(o.offsetLeft,o.offsetTop);const s=go(n==null?void 0:n.pageYOffset,r.scrollTop),l=go(n==null?void 0:n.pageXOffset,r.scrollLeft),a=go(r.clientTop,o.clientTop),c=go(r.clientLeft,o.clientLeft);return Ni(e).translate(l-c,s-a)},Ni=e=>{const t=e.dom,o=t.ownerDocument.body;return o===t?Me(o.offsetLeft,o.offsetTop):Be(e)?(n=>{const r=n.getBoundingClientRect();return Me(r.left,r.top)})(t):Me(0,0)},al=(e,t)=>({row:e,y:t}),cl=(e,t)=>({col:e,x:t}),il=e=>ho(e).left+On(e),ml=e=>ho(e).left,dl=(e,t)=>cl(e,ml(t)),ul=(e,t)=>cl(e,il(t)),Wn=e=>ho(e).top,Bi=(e,t)=>al(e,Wn(t)),zi=(e,t)=>al(e,Wn(t)+sl(t)),Ln=(e,t,o)=>{if(o.length===0)return[];const n=E(o.slice(1),(s,l)=>s.map(a=>e(l,a))),r=o[o.length-1].map(s=>t(o.length-1,s));return n.concat([r])},Mn={delta:H,positions:e=>Ln(Bi,zi,e),edge:Wn},jn=nl({delta:H,edge:ml,positions:e=>Ln(dl,ul,e)},{delta:e=>-e,edge:il,positions:e=>Ln(ul,dl,e)}),po={delta:(e,t)=>jn(t).delta(e,t),positions:(e,t)=>jn(t).positions(e,t),edge:e=>jn(e).edge(e)},Ai={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Wi=(()=>{const e="[0-9]+",t="[eE][+-]?[0-9]+",o=r=>`(?:${r})?`,n=["Infinity","[0-9]+\\."+o(e)+o(t),"\\.[0-9]+"+o(t),e+o(t)].join("|");return new RegExp(`^([+-]?(?:${n}))(.*)$`)})(),fl=/(\d+(\.\d+)?)%/,Li=/(\d+(\.\d+)?)px|em/,Mi=be("col"),gl=(e,t,o)=>{const n=(r=e,h.from(r.dom.parentElement).map(S.fromDom)).getOrThunk(()=>gs(eo(e)));var r;return t(e)/o(n)*100},hl=(e,t)=>{Q(e,"width",t+"px")},pl=(e,t)=>{Q(e,"width",t+"%")},wo=(e,t)=>{Q(e,"height",t+"px")},ji=e=>{const t=(o=>{return it(n=o,"height",n.dom.offsetHeight)+"px";var n})(e);return t?((o,n,r,s)=>{const l=parseFloat(o);return lo(o,"%")&&I(n)!=="table"?((a,c,i,u)=>{const m=ie(a).map(d=>{const f=i(d);return Math.floor(c/100*f)}).getOr(c);return u(a,m),m})(n,l,r,s):l})(t,e,An,wo):An(e)},wl=(e,t)=>vn(e,t).orThunk(()=>Ie(e,t).map(o=>o+"px")),mt=e=>wl(e,"width"),_i=e=>gl(e,Le,kn),bl=e=>{return Mi(e)?Le(e):it(t=e,"width",t.dom.offsetWidth);var t},vl=e=>((t,o,n)=>n(t)/yn(t,"rowspan"))(e,0,ji),yl=(e,t,o)=>{Q(e,"width",t+o)},xl=e=>gl(e,Le,kn)+"%",Ii=O(fl),Pi=be("col"),Fi=e=>mt(e).getOrThunk(()=>bl(e)+"px"),Hi=e=>{return(t=e,wl(t,"height")).getOrThunk(()=>vl(e)+"px");var t},_n=(e,t,o,n,r,s)=>e.filter(n).fold(()=>s(((l,a)=>{if(a<0||a>=l.length-1)return h.none();const c=l[a].fold(()=>{const u=(m=>{const d=Ur.call(m,0);return d.reverse(),d})(l.slice(0,a));return ke(u,(m,d)=>m.map(f=>({value:f,delta:d+1})))},u=>h.some({value:u,delta:0})),i=l[a+1].fold(()=>{const u=l.slice(a+1);return ke(u,(m,d)=>m.map(f=>({value:f,delta:d+1})))},u=>h.some({value:u,delta:1}));return c.bind(u=>i.map(m=>{const d=m.delta+u.delta;return Math.abs(m.value-u.value)/d}))})(o,t)),l=>r(l)),In=(e,t,o,n)=>{const r=zn(e),s=_t(e)?(c=>E(fo(c),i=>h.from(i.element)))(e):r,l=[h.some(po.edge(t))].concat(E(po.positions(r,t),c=>c.map(i=>i.x))),a=ln(xn);return E(s,(c,i)=>_n(c,i,l,a,u=>{if((d=>{const f=$s().browser,p=f.isChromium()||f.isFirefox();return!Pi(d)||p})(u))return o(u);{const d=(m=r[i])!=null?H(m):h.none();return _n(d,i,l,a,f=>n(h.some(Le(f))),n)}var m},n))},Cl=e=>e.map(t=>t+"px").getOr(""),Pn=(e,t,o)=>In(e,t,bl,n=>n.getOrThunk(o.minCellWidth)),Sl=(e,t,o,n,r)=>{const s=ol(e),l=[h.some(o.edge(t))].concat(E(o.positions(s,t),a=>a.map(c=>c.y)));return E(s,(a,c)=>_n(a,c,l,ln(Cs),n,r))},bo=(e,t)=>()=>Be(e)?t(e):parseFloat(vn(e,"width").getOr("0")),Tl=e=>{const t=bo(e,n=>parseFloat(xl(n))),o=bo(e,Le);return{width:t,pixelWidth:o,getWidths:(n,r)=>((s,l,a)=>In(s,l,_i,c=>c.fold(()=>a.minCellWidth(),i=>i/a.pixelWidth()*100)))(n,e,r),getCellDelta:n=>n/o()*100,singleColumnWidth:(n,r)=>[100-n],minCellWidth:()=>Wt()/o()*100,setElementWidth:pl,adjustTableWidth:n=>{const r=t();pl(e,r+n/100*r)},isRelative:!0,label:"percent"}},Rl=e=>{const t=bo(e,Le);return{width:t,pixelWidth:t,getWidths:(o,n)=>Pn(o,e,n),getCellDelta:H,singleColumnWidth:(o,n)=>[Math.max(Wt(),o+n)-o],minCellWidth:Wt,setElementWidth:hl,adjustTableWidth:o=>{const n=t()+o;hl(e,n)},isRelative:!1,label:"pixel"}},vo=e=>mt(e).fold(()=>(t=>{const o=bo(t,Le),n=O(0);return{width:o,pixelWidth:o,getWidths:(r,s)=>Pn(r,t,s),getCellDelta:n,singleColumnWidth:O([0]),minCellWidth:n,setElementWidth:N,adjustTableWidth:N,isRelative:!0,label:"none"}})(e),t=>((o,n)=>Ii().exec(n)!==null?Tl(o):Rl(o))(e,t)),qi=Rl,Vi=Tl,$i=(e,t,o)=>{const n=e[o].element,r=S.fromTag("td");P(r,S.fromTag("br")),(t?P:fn)(n,r)},Fn=((e,t)=>{const o=n=>e(n)?h.from(n.dom.nodeValue):h.none();return{get:n=>{if(!e(n))throw new Error("Can only get text value of a text node");return o(n).getOr("")},getOption:o,set:(n,r)=>{if(!e(n))throw new Error("Can only set raw text value of a text node");n.dom.nodeValue=r}}})($e),Hn=e=>Fn.get(e),Dl=e=>Fn.getOption(e),Ui=(e,t)=>Fn.set(e,t),He=e=>I(e)==="img"?1:Dl(e).fold(()=>he(e).length,t=>t.length),Gi=["img","br"],Ol=e=>Dl(e).filter(t=>t.trim().length!==0||t.indexOf("\xA0")>-1).isSome()||$(Gi,I(e)),kl=e=>((t,o)=>{const n=r=>{for(let s=0;s<r.childNodes.length;s++){const l=S.fromDom(r.childNodes[s]);if(o(l))return h.some(l);const a=n(r.childNodes[s]);if(a.isSome())return a}return h.none()};return n(t.dom)})(e,Ol),El=e=>Ki(e,Ol),Ki=(e,t)=>{const o=n=>{const r=he(n);for(let s=r.length-1;s>=0;s--){const l=r[s];if(t(l))return h.some(l);const a=o(l);if(a.isSome())return a}return h.none()};return o(e)},Yi={scope:["row","col"]},qn=e=>()=>{const t=S.fromTag("td",e.dom);return P(t,S.fromTag("br",e.dom)),t},Vn=e=>()=>S.fromTag("col",e.dom),Nl=e=>()=>S.fromTag("colgroup",e.dom),Bl=e=>()=>S.fromTag("tr",e.dom),Ji=(e,t,o)=>{const n=((r,s)=>{const l=ds(r,s),a=he(lt(r));return Ne(l,a),l})(e,t);return fe(o,(r,s)=>{r===null?q(n,s):Y(n,s,r)}),n},Qi=e=>e,$n=(e,t,o)=>{const n=(r,s)=>{((l,a)=>{const c=l.dom,i=a.dom;at(c)&&at(i)&&(i.style.cssText=c.style.cssText)})(r.element,s),Pe(s,"height"),r.colspan!==1&&Pe(s,"width")};return{col:r=>{const s=S.fromTag(I(r.element),t.dom);return n(r,s),e(r.element,s),s},colgroup:Nl(t),row:Bl(t),cell:r=>{const s=S.fromTag(I(r.element),t.dom),l=o.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),a=l.length>0?((c,i,u)=>kl(c).map(m=>{const d=u.join(","),f=Nt(m,d,p=>j(p,c));return Se(f,(p,g)=>{const w=ms(g);return q(w,"contenteditable"),P(p,w),w},i)}).getOr(i))(r.element,s,l):s;return P(a,S.fromTag("br")),n(r,s),((c,i)=>{fe(Yi,(u,m)=>Ie(c,m).filter(d=>$(u,d)).each(d=>Y(i,m,d)))})(r.element,s),e(r.element,s),s},replace:Ji,colGap:Vn(t),gap:qn(t)}},zl=e=>({col:Vn(e),colgroup:Nl(e),row:Bl(e),cell:qn(e),replace:Qi,colGap:Vn(e),gap:qn(e)}),yo=e=>S.fromDom(e.getBody()),dt=e=>t=>j(t,yo(e)),Qe=e=>{q(e,"data-mce-style");const t=o=>q(o,"data-mce-style");A(ct(e),t),A(Tn(e),t),A(Ts(e),t)},xo=e=>S.fromDom(e.selection.getStart()),Al=e=>e.getBoundingClientRect().width,Wl=e=>e.getBoundingClientRect().height,Xi=(e,t)=>{const o=t.column,n=t.column+t.colspan-1,r=t.row,s=t.row+t.rowspan-1;return o<=e.finishCol&&n>=e.startCol&&r<=e.finishRow&&s>=e.startRow},Zi=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,Ll=(e,t,o)=>{const n=uo(e,t,j),r=uo(e,o,j);return n.bind(s=>r.map(l=>{return a=s,c=l,{startRow:Math.min(a.row,c.row),startCol:Math.min(a.column,c.column),finishRow:Math.max(a.row+a.rowspan-1,c.row+c.rowspan-1),finishCol:Math.max(a.column+a.colspan-1,c.column+c.colspan-1)};var a,c}))},Ml=(e,t,o)=>Ll(e,t,o).map(n=>{const r=Zs(e,ne(Xi,n));return E(r,s=>s.element)}),jl=(e,t)=>uo(e,t,(o,n)=>un(n,o)).map(o=>o.element),em=(e,t,o)=>{const n=Co(e);return Ml(n,t,o)},Un=(e,t,o,n,r)=>{const s=Co(e),l=j(e,o)?h.some(t):jl(s,t),a=j(e,r)?h.some(n):jl(s,n);return l.bind(c=>a.bind(i=>Ml(s,c,i)))},Co=te;var tm=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],So=()=>({up:O({selector:Ke,closest:J,predicate:Bt,all:ls}),down:O({selector:ze,predicate:hs}),styles:O({get:Ye,getRaw:vn,set:Q,remove:Pe}),attrs:O({get:st,set:Y,remove:q,copyTo:(e,t)=>{const o=ns(e);Ot(t,o)}}),insert:O({before:ro,after:Et,afterAll:cs,append:P,appendAll:Ne,prepend:fn,wrap:di}),remove:O({unwrap:ui,remove:le}),create:O({nu:S.fromTag,clone:e=>S.fromDom(e.dom.cloneNode(!1)),text:S.fromText}),query:O({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:as,nextSibling:oo}),property:O({children:he,name:I,parent:Ue,document:e=>to(e).dom,isText:$e,isComment:ci,isElement:Ee,isSpecial:e=>{const t=I(e);return $(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>Ee(e)?Ie(e,"lang"):h.none(),getText:Hn,setText:Ui,isBoundary:e=>!!Ee(e)&&(I(e)==="body"||$(tm,I(e))),isEmptyTag:e=>!!Ee(e)&&$(["br","img","hr","input"],I(e)),isNonEditable:e=>Ee(e)&&st(e,"contenteditable")==="false"}),eq:j,is:mi});const om=(e,t,o,n)=>{const r=t(e,o);return Se(n,(s,l)=>{const a=t(e,l);return nm(e,s,a)},r)},nm=(e,t,o)=>t.bind(n=>o.filter(ne(e.eq,n))),_l=So(),Gn=(e,t)=>((o,n,r)=>r.length>0?((s,l,a,c)=>c(s,l,a[0],a.slice(1)))(o,n,r,om):h.none())(_l,(o,n)=>e(n),t),Kn=e=>Ke(e,"table"),To=(e,t,o)=>{const n=r=>s=>o!==void 0&&o(s)||j(s,r);return j(e,t)?h.some({boxes:h.some([e]),start:e,finish:t}):Kn(e).bind(r=>Kn(t).bind(s=>{if(j(r,s))return h.some({boxes:em(r,e,t),start:e,finish:t});if(un(r,s)){const l=Nt(t,"td,th",n(r)),a=l.length>0?l[l.length-1]:t;return h.some({boxes:Un(r,e,r,t,s),start:e,finish:a})}if(un(s,r)){const l=Nt(e,"td,th",n(s)),a=l.length>0?l[l.length-1]:e;return h.some({boxes:Un(s,e,r,t,s),start:e,finish:a})}return((l,a,c)=>((i,u,m,d=Ce)=>{const f=[u].concat(i.up().all(u)),p=[m].concat(i.up().all(m)),g=v=>an(v,d).fold(()=>v,x=>v.slice(0,x+1)),w=g(f),b=g(p),y=Re(w,v=>ue(b,((x,C)=>ne(x.eq,C))(i,v)));return{firstpath:w,secondpath:b,shared:y}})(_l,l,a,void 0))(e,t).shared.bind(l=>J(l,"table",o).bind(a=>{const c=Nt(t,"td,th",n(a)),i=c.length>0?c[c.length-1]:t,u=Nt(e,"td,th",n(a)),m=u.length>0?u[u.length-1]:e;return h.some({boxes:Un(a,e,r,t,s),start:m,finish:i})}))}))},Yn=(e,t)=>{const o=ze(e,t);return o.length>0?h.some(o):h.none()},Il=(e,t,o)=>zt(e,t).bind(n=>zt(e,o).bind(r=>Gn(Kn,[n,r]).map(s=>({first:n,last:r,table:s})))),rm=(e,t,o,n,r)=>((s,l)=>Re(s,a=>ge(a,l)))(e,r).bind(s=>((l,a,c)=>ie(l).bind(i=>((u,m,d,f)=>uo(u,m,j).bind(p=>{const g=d>0?p.row+p.rowspan-1:p.row,w=f>0?p.column+p.colspan-1:p.column;return Fe(u,g+d,w+f).map(b=>b.element)}))(Co(i),l,a,c)))(s,t,o).bind(l=>((a,c)=>Ke(a,"table").bind(i=>zt(i,c).bind(u=>To(u,a).bind(m=>m.boxes.map(d=>({boxes:d,start:m.start,finish:m.finish}))))))(l,n))),Pl=(e,t)=>Yn(e,t),sm=(e,t,o)=>Il(e,t,o).bind(n=>{const r=c=>j(e,c),s="thead,tfoot,tbody,table",l=Ke(n.first,s,r),a=Ke(n.last,s,r);return l.bind(c=>a.bind(i=>j(c,i)?((u,m,d)=>((f,p,g)=>Ll(f,p,g).bind(w=>((b,y)=>{let v=!0;const x=ne(Zi,y);for(let C=y.startRow;C<=y.finishRow;C++)for(let T=y.startCol;T<=y.finishCol;T++)v=v&&Fe(b,C,T).exists(x);return v?h.some(y):h.none()})(f,w)))(Co(u),m,d))(n.table,n.first,n.last):h.none()))}),Fl=H,lm=e=>{const t=(o,n)=>Ie(o,n).exists(r=>parseInt(r,10)>1);return e.length>0&&we(e,o=>t(o,"rowspan")||t(o,"colspan"))?h.some(e):h.none()},am=(e,t,o)=>t.length<=1?h.none():sm(e,o.firstSelectedSelector,o.lastSelectedSelector).map(n=>({bounds:n,cells:t})),Xe={selected:"data-mce-selected",selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:"data-mce-first-selected",firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:"data-mce-last-selected",lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},Ro=(e,t,o)=>({element:o,mergable:am(t,e,Xe),unmergable:lm(e),selection:Fl(e)}),Hl=e=>(t,o)=>{const n=I(t),r=n==="col"||n==="colgroup"?ie(s=t).bind(l=>Pl(l,Xe.firstSelectedSelector)).fold(O(s),l=>l[0]):t;var s;return J(r,e,o)},cm=Hl("th,td,caption"),Jn=Hl("th,td"),Oe=e=>{return t=e.model.table.getSelectedCells(),E(t,S.fromDom);var t},im=(e,t)=>{e.on("BeforeGetContent",o=>{const n=r=>{o.preventDefault(),(s=>ie(s[0]).map(l=>{const a=((c,i)=>{const u=v=>ge(v.element,i),m=lt(c),d=Os(m),f=vo(c),p=mo(d),g=((v,x)=>{const C=v.grid.columns;let T=v.grid.rows,R=C,D=0,W=0;const k=[],z=[];return fe(v.access,B=>{if(k.push(B),x(B)){z.push(B);const L=B.row,F=L+B.rowspan-1,Z=B.column,V=Z+B.colspan-1;L<T?T=L:F>D&&(D=F),Z<R?R=Z:V>W&&(W=V)}}),((B,L,F,Z,V,de)=>({minRow:B,minCol:L,maxRow:F,maxCol:Z,allCells:V,selectedCells:de}))(T,R,D,W,k,z)})(p,u),w="th:not("+i+"),td:not("+i+")",b=Sn(m,"th,td",v=>ge(v,w));A(b,le),((v,x,C,T)=>{const R=K(v,k=>k.section!=="colgroup"),D=x.grid.columns,W=x.grid.rows;for(let k=0;k<W;k++){let z=!1;for(let B=0;B<D;B++)k<C.minRow||k>C.maxRow||B<C.minCol||B>C.maxCol||(Fe(x,k,B).filter(T).isNone()?$i(R,z,k):z=!0)}})(d,p,g,u);const y=((v,x,C,T)=>{if(T.minCol===0&&x.grid.columns===T.maxCol+1)return 0;const R=Pn(x,v,C),D=Te(R,(z,B)=>z+B,0),W=Te(R.slice(T.minCol,T.maxCol+1),(z,B)=>z+B,0),k=W/D*C.pixelWidth()-C.pixelWidth();return C.getCellDelta(k)})(c,te(c),f,g);return((v,x,C,T)=>{fe(C.columns,D=>{(D.column<x.minCol||D.column>x.maxCol)&&le(D.element)});const R=K(co(v,"tr"),D=>D.dom.childElementCount===0);A(R,le),x.minCol!==x.maxCol&&x.minRow!==x.maxRow||A(co(v,"th,td"),D=>{q(D,"rowspan"),q(D,"colspan")}),q(v,io),q(v,"data-snooker-col-series"),vo(v).adjustTableWidth(T)})(m,g,p,y),m})(l,"[data-mce-selected]");return Qe(a),[a]}))(r).each(s=>{o.content=o.format==="text"?(l=>E(l,a=>a.dom.innerText).join(""))(s):((l,a)=>E(a,c=>l.selection.serializer.serialize(c.dom,{})).join(""))(e,s)})};if(o.selection===!0){const r=(s=>K(Oe(s),l=>ge(l,Xe.selectedSelector)))(e);r.length>=1&&n(r)}}),e.on("BeforeSetContent",o=>{if(o.selection===!0&&o.paste===!0){const n=Oe(e);Xt(n).each(r=>{ie(r).each(s=>{const l=K(((c,i)=>{const u=document.createElement("div");return u.innerHTML=c,he(S.fromDom(u))})(o.content),c=>I(c)!=="meta"),a=be("table");if(l.length===1&&a(l[0])){o.preventDefault();const c=S.fromDom(e.getDoc()),i=zl(c),u=((m,d,f)=>({element:m,clipboard:d,generators:f}))(r,l[0],i);t.pasteCells(s,u).each(()=>{e.focus()})}})})}})},It=(e,t)=>({element:e,offset:t}),ql=(e,t,o)=>e.property().isText(t)&&e.property().getText(t).trim().length===0||e.property().isComment(t)?o(t).bind(n=>ql(e,n,o).orThunk(()=>h.some(n))):h.none(),Vl=(e,t)=>e.property().isText(t)?e.property().getText(t).length:e.property().children(t).length,$l=(e,t)=>{const o=ql(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(o))return It(o,Vl(e,o));const n=e.property().children(o);return n.length>0?$l(e,n[n.length-1]):It(o,Vl(e,o))},mm=$l,dm=So(),um=(e,t)=>{xn(e)||(n=>mt(n).bind(r=>{return s=r,l=["fixed","relative","empty"],h.from(Wi.exec(s)).bind(a=>{const c=Number(a[1]),i=a[2];return((u,m)=>ue(m,d=>ue(Ai[d],f=>u===f)))(i,l)?h.some({value:c,unit:i}):h.none()});var s,l}))(e).each(n=>{const r=n.value/2;yl(e,r,n.unit),yl(t,r,n.unit)})},Do=e=>E(e,O(0)),Ul=(e,t,o,n,r)=>r(e.slice(0,t)).concat(n).concat(r(e.slice(o))),Gl=e=>(t,o,n,r)=>{if(e(n)){const s=Math.max(r,t[o]-Math.abs(n)),l=Math.abs(s-t[o]);return n>=0?l:-l}return n},Oo=Gl(e=>e<0),fm=Gl(M),Kl=()=>{const e=(o,n,r,s)=>{const l=(100+r)/100,a=Math.max(s,(o[n]+r)/l);return E(o,(c,i)=>(i===n?a:c/l)-c)},t=(o,n,r,s,l,a)=>a?e(o,n,s,l):((c,i,u,m,d)=>{const f=Oo(c,i,m,d);return Ul(c,i,u+1,[f,0],Do)})(o,n,r,s,l);return{resizeTable:(o,n)=>o(n),clampTableDelta:Oo,calcLeftEdgeDeltas:t,calcMiddleDeltas:(o,n,r,s,l,a,c)=>t(o,r,s,l,a,c),calcRightEdgeDeltas:(o,n,r,s,l,a)=>{if(a)return e(o,r,s,l);{const c=Oo(o,r,s,l);return Do(o.slice(0,r)).concat([c])}},calcRedestributedWidths:(o,n,r,s)=>{if(s){const l=(n+r)/n,a=E(o,c=>c/l);return{delta:100*l-100,newSizes:a}}return{delta:r,newSizes:o}}}},Qn=()=>{const e=(t,o,n,r,s)=>{const l=fm(t,r>=0?n:o,r,s);return Ul(t,o,n+1,[l,-l],Do)};return{resizeTable:(t,o,n)=>{n&&t(o)},clampTableDelta:(t,o,n,r,s)=>{if(s){if(n>=0)return n;{const l=Te(t,(a,c)=>a+c-r,0);return Math.max(-l,n)}}return Oo(t,o,n,r)},calcLeftEdgeDeltas:e,calcMiddleDeltas:(t,o,n,r,s,l)=>e(t,n,r,s,l),calcRightEdgeDeltas:(t,o,n,r,s,l)=>{if(l)return Do(t);{const a=r/t.length;return E(t,O(a))}},calcRedestributedWidths:(t,o,n,r)=>({delta:0,newSizes:t})}},Xn=e=>te(e).grid,ko=be("th"),Eo=e=>we(e,t=>ko(t.element)),gm=(e,t)=>e&&t?"sectionCells":e?"section":"cells",Yl=e=>{const t=e.section==="thead",o=wn(Zn(e.cells),"th");return e.section==="tfoot"?{type:"footer"}:t||o?{type:"header",subType:gm(t,o)}:{type:"body"}},Zn=e=>{const t=K(e,o=>ko(o.element));return t.length===0?h.some("td"):t.length===e.length?h.some("th"):h.none()},er=(e,t,o)=>ae(o(e.element,t),!0,e.isLocked),tr=(e,t)=>e.section!==t?Ge(e.element,e.cells,t,e.isNew):e,Jl=()=>({transformRow:tr,transformCell:(e,t,o)=>{const n=o(e.element,t),r=I(n)!=="td"?((s,l)=>{const a=ds(s,"td");Et(s,a);const c=he(s);return Ne(a,c),le(s),a})(n):n;return ae(r,e.isNew,e.isLocked)}}),Ql=()=>({transformRow:tr,transformCell:er}),Xl=()=>({transformRow:(e,t)=>tr(e,t==="thead"?"tbody":t),transformCell:er}),hm=Jl,pm=Ql,wm=Xl,bm=()=>({transformRow:H,transformCell:er}),Zl=e=>J(e,"[contenteditable]"),ea=(e,t=!1)=>Be(e)?e.dom.isContentEditable:Zl(e).fold(O(t),o=>ta(o)==="true"),ta=e=>e.dom.contentEditable,Pt=(e,t,o,n)=>{o===n?q(e,t):Y(e,t,o)},oa=(e,t,o)=>{Jr(so(e,t)).fold(()=>fn(e,o),n=>Et(n,o))},vm=(e,t)=>{const o=[],n=[],r=d=>E(d,f=>{f.isNew&&o.push(f.element);const p=f.element;return gn(p),A(f.cells,g=>{g.isNew&&n.push(g.element),Pt(g.element,"colspan",g.colspan,1),Pt(g.element,"rowspan",g.rowspan,1),P(p,g.element)}),p}),s=d=>ee(d,f=>E(f.cells,p=>(Pt(p.element,"span",p.colspan,1),p.element))),l=(d,f)=>{const p=((w,b)=>{const y=pn(w,b).getOrThunk(()=>{const v=S.fromTag(b,eo(w).dom);return b==="thead"?oa(w,"caption,colgroup",v):b==="colgroup"?oa(w,"caption",v):P(w,v),v});return gn(y),y})(e,f),g=(f==="colgroup"?s:r)(d);Ne(p,g)},a=(d,f)=>{d.length>0?l(d,f):(p=>{pn(e,p).each(le)})(f)},c=[],i=[],u=[],m=[];return A(t,d=>{switch(d.section){case"thead":c.push(d);break;case"tbody":i.push(d);break;case"tfoot":u.push(d);break;case"colgroup":m.push(d)}}),a(m,"colgroup"),a(c,"thead"),a(i,"tbody"),a(u,"tfoot"),{newRows:o,newCells:n}},na=(e,t)=>{if(e.length===0)return 0;const o=e[0];return an(e,n=>!t(o.element,n.element)).getOr(e.length)},ym=(e,t)=>{const o=E(e,n=>E(n.cells,Ce));return E(e,(n,r)=>{const s=ee(n.cells,(l,a)=>{if(o[r][a]===!1){const d=((f,p,g,w)=>{const b=((C,T)=>C[T])(f,p),y=b.section==="colgroup",v=na(b.cells.slice(g),w),x=y?1:na(((C,T)=>E(C,R=>ve(R,T)))(f.slice(p),g),w);return{colspan:v,rowspan:x}})(e,r,a,t);return((f,p,g,w)=>{for(let b=f;b<f+g;b++)for(let y=p;y<p+w;y++)o[b][y]=!0})(r,a,d.rowspan,d.colspan),[(c=l.element,i=d.rowspan,u=d.colspan,m=l.isNew,{element:c,rowspan:i,colspan:u,isNew:m})]}return[];var c,i,u,m});return((l,a,c,i)=>({element:l,cells:a,section:c,isNew:i}))(n.element,s,n.section,n.isNew)})},Ft=(e,t,o)=>{const n=[];A(e.colgroups,r=>{const s=[];for(let l=0;l<e.grid.columns;l++){const a=el(e,l).map(c=>ae(c.element,o,!1)).getOrThunk(()=>ae(t.colGap(),!0,!1));s.push(a)}n.push(Ge(r.element,s,"colgroup",o))});for(let r=0;r<e.grid.rows;r++){const s=[];for(let c=0;c<e.grid.columns;c++){const i=Fe(e,r,c).map(u=>ae(u.element,o,u.isLocked)).getOrThunk(()=>ae(t.gap(),!0,!1));s.push(i)}const l=e.all[r],a=Ge(l.element,s,l.section,o);n.push(a)}return n},No=e=>ym(e,j),or=(e,t)=>ke(e.all,o=>Re(o.cells,n=>j(t,n.element))),nr=(e,t,o)=>{const n=E(t.selection,s=>Ss(s).bind(l=>or(e,l)).filter(o)),r=ws(n);return bn(r.length>0,r)},G=(e,t,o,n,r)=>(s,l,a,c)=>{const i=te(s),u=h.from(c==null?void 0:c.section).getOrThunk(bm);return t(i,l).map(m=>{const d=((g,w)=>Ft(g,w,!1))(i,a),f=e(d,m,j,r(a),u),p=Je(f.grid);return{info:m,grid:No(f.grid),cursor:f.cursor,lockedColumns:p}}).bind(m=>{const d=vm(s,m.grid),f=h.from(c==null?void 0:c.sizing).getOrThunk(()=>vo(s)),p=h.from(c==null?void 0:c.resize).getOrThunk(Qn);return o(s,m.grid,m.info,{sizing:f,resize:p,section:u}),n(s),q(s,io),m.lockedColumns.length>0&&Y(s,io,m.lockedColumns.join(",")),h.some({cursor:m.cursor,newRows:d.newRows,newCells:d.newCells})})},rr=(e,t)=>nr(e,t,M).map(o=>({cells:o,generators:t.generators,clipboard:t.clipboard})),je=(e,t)=>nr(e,t,M),_e=(e,t)=>nr(e,t,o=>!o.isLocked),ra=(e,t)=>we(t,o=>((n,r)=>or(n,r).exists(s=>!s.isLocked))(e,o)),sa=(e,t,o,n)=>{const r=X(e).rows;let s=!0;for(let l=0;l<r.length;l++)for(let a=0;a<ye(r[0]);a++){const c=r[l],i=ve(c,a),u=o(i.element,t);u&&!s?jt(c,a,ae(n(),!0,i.isLocked)):u&&(s=!1)}return e},la=e=>{const t=s=>s(e),o=O(e),n=()=>r,r={tag:!0,inner:e,fold:(s,l)=>l(e),isValue:M,isError:Ce,map:s=>Bo.value(s(e)),mapError:n,bind:t,exists:t,forall:t,getOr:o,or:n,getOrThunk:o,orThunk:n,getOrDie:o,each:s=>{s(e)},toOptional:()=>h.some(e)};return r},aa=e=>{const t=()=>o,o={tag:!1,inner:e,fold:(r,s)=>r(e),isValue:Ce,isError:M,map:t,mapError:r=>Bo.error(r(e)),bind:t,exists:Ce,forall:M,getOr:H,or:H,getOrThunk:$r,orThunk:$r,getOrDie:(n=String(e),()=>{throw new Error(n)}),each:N,toOptional:h.none};var n;return o},Bo={value:la,error:aa,fromOption:(e,t)=>e.fold(()=>aa(t),la)},ca=(e,t)=>({rowDelta:0,colDelta:ye(e[0])-ye(t[0])}),ia=(e,t)=>({rowDelta:e.length-t.length,colDelta:0}),sr=(e,t,o,n)=>{const r=t.section==="colgroup"?o.col:o.cell;return pe(e,s=>ae(r(),!0,n(s)))},xm=(e,t,o,n)=>{const r=e[e.length-1];return e.concat(pe(t,()=>{const s=r.section==="colgroup"?o.colgroup:o.row,l=Js(r,s,H),a=sr(l.cells.length,l,o,c=>mn(n,c.toString()));return Ys(l,a)}))},Cm=(e,t,o,n)=>E(e,r=>{const s=sr(t,r,o,Ce);return En(r,n,s)}),Ht=(e,t,o)=>{const n=t.colDelta<0?Cm:H,r=t.rowDelta<0?xm:H,s=Je(e),l=ye(e[0]),a=ue(s,u=>u===l-1),c=n(e,Math.abs(t.colDelta),o,a?l-1:l),i=Je(c);return r(c,Math.abs(t.rowDelta),o,cn(i,M))},Sm=(e,t,o,n)=>{const r=ne(n,ve(e[t],o).element),s=e[t];return e.length>1&&ye(s)>1&&(o>0&&r(me(s,o-1))||o<s.cells.length-1&&r(me(s,o+1))||t>0&&r(me(e[t-1],o))||t<e.length-1&&r(me(e[t+1],o)))},ma=(e,t,o)=>K(o,n=>n>=e.column&&n<=ye(t[0])+e.column),da=(e,t,o,n,r)=>{((i,u,m,d)=>{u>0&&u<i[0].cells.length&&A(i,f=>{const p=f.cells[u-1];let g=0;const w=d();for(;f.cells.length>u+g&&m(p.element,f.cells[u+g].element);)jt(f,u+g,ae(w,!0,f.cells[u+g].isLocked)),g++})})(t,e,r,n.cell);const s=ia(o,t),l=Ht(o,s,n),a=ia(t,l),c=Ht(t,a,n);return E(c,(i,u)=>En(i,e,l[u].cells))},ua=(e,t,o,n,r)=>{((y,v,x,C)=>{const T=X(y).rows;if(v>0&&v<T.length){const R=((D,W)=>Te(D,(k,z)=>ue(k,B=>W(B.element,z.element))?k:k.concat([z]),[]))(T[v-1].cells,x);A(R,D=>{let W=h.none();for(let k=v;k<T.length;k++)for(let z=0;z<ye(T[0]);z++){const B=T[k],L=ve(B,z);x(L.element,D.element)&&(W.isNone()&&(W=h.some(C())),W.each(F=>{jt(B,z,ae(F,!0,L.isLocked))}))}})}})(t,e,r,n.cell);const s=Je(t),l=ca(t,o),a=_(_({},l),{colDelta:l.colDelta-s.length}),c=Ht(t,a,n),{cols:i,rows:u}=X(c),m=Je(c),d=ca(o,t),f=_(_({},d),{colDelta:d.colDelta+m.length}),p=(w=n,b=m,E(o,y=>Te(b,(v,x)=>{const C=sr(1,y,w,M)[0];return Ks(v,x,C)},y))),g=Ht(p,f,n);var w,b;return[...i,...u.slice(0,e),...g,...u.slice(e,u.length)]},fa=(e,t,o,n,r)=>{const{rows:s,cols:l}=X(e),a=s.slice(0,t),c=s.slice(t);return[...l,...a,((i,u,m,d)=>Js(i,f=>d(f,m),u))(s[o],(i,u)=>t>0&&t<s.length&&n(me(s[t-1],u),me(s[t],u))?ve(s[t],u):ae(r(i.element,n),!0,i.isLocked),n,r),...c]},ga=(e,t,o,n,r)=>E(e,s=>{const l=t>0&&t<ye(s)&&n(me(s,t-1),me(s,t)),a=((c,i,u,m,d,f,p)=>{if(u!=="colgroup"&&m)return ve(c,i);{const g=ve(c,d);return ae(p(g.element,f),!0,!1)}})(s,t,s.section,l,o,n,r);return Ks(s,t,a)}),ha=(e,t,o,n)=>((r,s,l,a)=>me(r[s],l)!==void 0&&s>0&&a(me(r[s-1],l),me(r[s],l)))(e,t,o,n)||((r,s,l)=>s>0&&l(me(r,s-1),me(r,s)))(e[t],o,n),pa=(e,t,o,n)=>{const r=s=>(l=>l==="row"?Cs(t):xn(t))(s)?`${s}group`:s;return e?ko(t)?r(o):null:n&&ko(t)?r(o==="row"?"col":"row"):null},wa=(e,t,o)=>ae(o(e.element,t),!0,e.isLocked),lr=(e,t,o,n,r,s,l)=>E(e,(a,c)=>((i,u)=>{const m=i.cells,d=E(m,(f,p)=>{if((g=>ue(t,w=>o(g.element,w.element)))(f)){const g=l(f,c,p)?r(f,o,n):f;return s(g,c,p).each(w=>{var b,y;b=g.element,y={scope:h.from(w)},fe(y,(v,x)=>{v.fold(()=>{q(b,x)},C=>{dn(b.dom,x,C)})})}),g}return f});return Ge(i.element,d,i.section,i.isNew)})(a)),ba=(e,t,o)=>ee(e,(n,r)=>ha(e,r,t,o)?[]:[ve(n,t)]),va=(e,t,o,n,r)=>{const s=X(e).rows,l=ee(t,u=>ba(s,u,n)),a=E(s,u=>Eo(u.cells)),c=((u,m)=>we(m,H)&&Eo(u)?M:(d,f,p)=>!(I(d.element)==="th"&&m[f]))(l,a),i=((u,m)=>(d,f)=>h.some(pa(u,d.element,"row",m[f])))(o,a);return lr(e,l,n,r,wa,i,c)},ya=(e,t,o,n)=>{const r=X(e).rows,s=E(t,l=>ve(r[l.row],l.column));return lr(e,s,o,n,wa,h.none,M)},Ze=e=>{if(!Qt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],o={};return A(e,(n,r)=>{const s=Dt(n);if(s.length!==1)throw new Error("one and only one name per case");const l=s[0],a=n[l];if(o[l]!==void 0)throw new Error("duplicate key detected:"+l);if(l==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Qt(a))throw new Error("case arguments must be an array");t.push(l),o[l]=(...c)=>{const i=c.length;if(i!==a.length)throw new Error("Wrong number of arguments to case "+l+". Expected "+a.length+" ("+a+"), got "+i);return{fold:(...u)=>{if(u.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+u.length);return u[r].apply(null,c)},match:u=>{const m=Dt(u);if(t.length!==m.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+m.join(","));if(!we(t,d=>$(m,d)))throw new Error("Not all branches were specified when using match. Specified: "+m.join(", ")+`
Required: `+t.join(", "));return u[l].apply(null,c)},log:u=>{console.log(u,{constructors:t,constructor:l,params:c})}}}}),o},ut=_({},Ze([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])),xa=(e,t,o)=>{let n=0;for(let r=e;r<t;r++)n+=o[r]!==void 0?o[r]:0;return n},Tm=(e,t)=>{const o=Bn(e);return E(o,n=>{const r=xa(n.row,n.row+n.rowspan,t);return{element:n.element,height:r,rowspan:n.rowspan}})},ar=(e,t,o)=>{const n=((r,s)=>_t(r)?((l,a)=>{const c=fo(l);return E(c,(i,u)=>({element:i.element,width:a[u],colspan:i.colspan}))})(r,s):((l,a)=>{const c=Bn(l);return E(c,i=>{const u=xa(i.column,i.column+i.colspan,a);return{element:i.element,width:u,colspan:i.colspan}})})(r,s))(e,t);A(n,r=>{o.setElementWidth(r.element,r.width)})},Ca=(e,t,o,n,r)=>{const s=te(e),l=r.getCellDelta(t),a=r.getWidths(s,r),c=o===s.grid.columns-1,i=n.clampTableDelta(a,o,l,r.minCellWidth(),c),u=((d,f,p,g,w)=>{const b=d.slice(0),y=((x,C)=>x.length===0?ut.none():x.length===1?ut.only(0):C===0?ut.left(0,1):C===x.length-1?ut.right(C-1,C):C>0&&C<x.length-1?ut.middle(C-1,C,C+1):ut.none())(d,f),v=O(E(b,O(0)));return y.fold(v,x=>g.singleColumnWidth(b[x],p),(x,C)=>w.calcLeftEdgeDeltas(b,x,C,p,g.minCellWidth(),g.isRelative),(x,C,T)=>w.calcMiddleDeltas(b,x,C,T,p,g.minCellWidth(),g.isRelative),(x,C)=>w.calcRightEdgeDeltas(b,x,C,p,g.minCellWidth(),g.isRelative))})(a,o,i,r,n),m=E(u,(d,f)=>d+a[f]);ar(s,m,r),n.resizeTable(r.adjustTableWidth,i,c)},ft=e=>Te(e,(t,o)=>ue(t,n=>n.column===o.column)?t:t.concat([o]),[]).sort((t,o)=>t.column-o.column),Sa=be("col"),Ta=be("colgroup"),Ra=e=>I(e)==="tr"||Ta(e),Rm=e=>({element:e,colspan:Ae(e,"colspan",1),rowspan:Ae(e,"rowspan",1)}),Da=e=>Ie(e,"scope").map(t=>t.substr(0,3)),De=(e,t=Rm)=>{const o=r=>{if(Ra(r))return Ta((s={element:r}).element)?e.colgroup(s):e.row(s);{const l=r,a=(c=>Sa(c.element)?e.col(c):e.cell(c))(t(l));return n=h.some({item:l,replacement:a}),a}var s};let n=h.none();return{getOrInit:(r,s)=>n.fold(()=>o(r),l=>s(r,l.item)?l.replacement:o(r))}},Oa=e=>t=>{const o=[],n=r=>{const s=e==="td"?{scope:null}:{},l=t.replace(r,e,s);return o.push({item:r,sub:l}),l};return{replaceOrInit:(r,s)=>{if(Ra(r)||Sa(r))return r;{const l=r;return((a,c)=>Re(o,i=>c(i.item,a)))(l,s).fold(()=>n(l),a=>s(r,a.item)?a.sub:n(l))}}}},ka=e=>({unmerge:t=>{const o=Da(t);return o.each(n=>Y(t,"scope",n)),()=>{const n=e.cell({element:t,colspan:1,rowspan:1});return Pe(n,"width"),Pe(t,"width"),o.each(r=>Y(n,"scope",r)),n}},merge:t=>(Pe(t[0],"width"),(()=>{const o=ws(E(t,Da));if(o.length===0)return h.none();{const n=o[0],r=["row","col"];return ue(o,s=>s!==n&&$(r,s))?h.none():h.from(n)}})().fold(()=>q(t[0],"scope"),o=>Y(t[0],"scope",o+"group")),O(t[0]))}),Dm=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],cr=So(),ir=e=>((t,o)=>{const n=t.property().name(o);return $(Dm,n)})(cr,e),Om=e=>((t,o)=>{const n=t.property().name(o);return $(["ol","ul"],n)})(cr,e),km=e=>{const t=be("br"),o=r=>El(r).bind(s=>{const l=oo(s).map(a=>!!ir(a)||!!((c,i)=>$(["br","img","hr","input"],c.property().name(i)))(cr,a)&&I(a)!=="img").getOr(!1);return Ue(s).map(a=>{return l===!0||I(c=a)==="li"||Bt(c,Om).isSome()||t(s)||ir(a)&&!j(r,a)?[]:[S.fromTag("br")];var c})}).getOr([]),n=(()=>{const r=ee(e,s=>{const l=he(s);return(a=>we(a,c=>t(c)||$e(c)&&Hn(c).trim().length===0))(l)?[]:l.concat(o(s))});return r.length===0?[S.fromTag("br")]:r})();gn(e[0]),Ne(e[0],n)},Ea=e=>ea(e,!0),Na=e=>{ct(e).length===0&&le(e)},zo=(e,t)=>({grid:e,cursor:t}),re=(e,t,o)=>{const n=((r,s,l)=>{var a,c;const i=X(r).rows;return h.from((c=(a=i[s])===null||a===void 0?void 0:a.cells[l])===null||c===void 0?void 0:c.element).filter(Ea).orThunk(()=>(u=>ke(u,m=>ke(m.cells,d=>{const f=d.element;return bn(Ea(f),f)})))(i))})(e,t,o);return zo(e,n)},Ao=e=>Te(e,(t,o)=>ue(t,n=>n.row===o.row)?t:t.concat([o]),[]).sort((t,o)=>t.row-o.row),mr=(e,t)=>(o,n,r,s,l)=>{const a=Ao(n),c=E(a,u=>u.row),i=((u,m,d,f,p,g,w)=>{const{cols:b,rows:y}=X(u),v=y[m[0]],x=ee(m,k=>((z,B,L)=>{const F=z[B];return ee(F.cells,(Z,V)=>ha(z,B,V,L)?[]:[Z])})(y,k,p)),C=E(v.cells,(k,z)=>Eo(ba(y,z,p))),T=[...y];A(m,k=>{T[k]=w.transformRow(y[k],d)});const R=[...b,...T],D=((k,z)=>we(z,H)&&Eo(k.cells)?M:(B,L,F)=>!(I(B.element)==="th"&&z[F]))(v,C),W=((k,z)=>(B,L,F)=>h.some(pa(k,B.element,"col",z[F])))(f,C);return lr(R,x,p,g,w.transformCell,W,D)})(o,c,e,t,r,s.replaceOrInit,l);return re(i,n[0].row,n[0].column)},Em=mr("thead",!0),Nm=mr("tbody",!1),Bm=mr("tfoot",!1),Wo=(e,t,o)=>{const n=((s,l)=>Ds(s,()=>l))(e,o.section),r=mo(n);return Ft(r,t,!0)},dr=(e,t,o,n)=>((r,s,l,a)=>{const c=mo(s),i=a.getWidths(c,a);ar(c,i,a)})(0,t,0,n.sizing),ur=(e,t,o,n)=>((r,s,l,a,c)=>{const i=mo(s),u=a.getWidths(i,a),m=a.pixelWidth(),{newSizes:d,delta:f}=c.calcRedestributedWidths(u,m,l.pixelDelta,a.isRelative);ar(i,d,a),a.adjustTableWidth(f)})(0,t,o,n.sizing,n.resize),Ba=(e,t)=>ue(t,o=>o.column===0&&o.isLocked),za=(e,t)=>ue(t,o=>o.column+o.colspan>=e.grid.columns&&o.isLocked),Aa=(e,t)=>{const o=zn(e),n=ft(t);return Te(n,(r,s)=>r+o[s.column].map(On).getOr(0),0)},Wa=e=>(t,o)=>je(t,o).filter(n=>!(e?Ba:za)(t,n)).map(n=>({details:n,pixelDelta:Aa(t,n)})),La=e=>(t,o)=>rr(t,o).filter(n=>!(e?Ba:za)(t,n.cells)),fr=Oa("th"),Lo=Oa("td"),zm=G((e,t,o,n)=>{const r=t[0].row,s=Ao(t),l=Se(s,(a,c)=>({grid:fa(a.grid,r,c.row+a.delta,o,n.getOrInit),delta:a.delta+1}),{grid:e,delta:0}).grid;return re(l,r,t[0].column)},je,N,N,De),Am=G((e,t,o,n)=>{const r=Ao(t),s=r[r.length-1],l=s.row+s.rowspan,a=Se(r,(c,i)=>fa(c,l,i.row,o,n.getOrInit),e);return re(a,l,t[0].column)},je,N,N,De),Wm=G((e,t,o,n)=>{const r=t.details,s=ft(r),l=s[0].column,a=Se(s,(c,i)=>({grid:ga(c.grid,l,i.column+c.delta,o,n.getOrInit),delta:c.delta+1}),{grid:e,delta:0}).grid;return re(a,r[0].row,l)},Wa(!0),ur,N,De),Lm=G((e,t,o,n)=>{const r=t.details,s=r[r.length-1],l=s.column+s.colspan,a=ft(r),c=Se(a,(i,u)=>ga(i,l,u.column,o,n.getOrInit),e);return re(c,r[0].row,l)},Wa(!1),ur,N,De),Mm=G((e,t,o,n)=>{const r=ft(t.details),s=((a,c)=>ee(a,i=>{const u=i.cells,m=Se(c,(d,f)=>f>=0&&f<d.length?d.slice(0,f).concat(d.slice(f+1)):d,u);return m.length>0?[Ge(i.element,m,i.section,i.isNew)]:[]}))(e,E(r,a=>a.column)),l=s.length>0?s[0].cells.length-1:0;return re(s,r[0].row,Math.min(r[0].column,l))},(e,t)=>_e(e,t).map(o=>({details:o,pixelDelta:-Aa(e,o)})),ur,Na,De),jm=G((e,t,o,n)=>{const r=Ao(t),s=((a,c,i)=>{const{rows:u,cols:m}=X(a);return[...m,...u.slice(0,c),...u.slice(i+1)]})(e,r[0].row,r[r.length-1].row),l=s.length>0?s.length-1:0;return re(s,Math.min(t[0].row,l),t[0].column)},je,N,Na,De),_m=G((e,t,o,n)=>{const r=ft(t),s=E(r,a=>a.column),l=va(e,s,!0,o,n.replaceOrInit);return re(l,t[0].row,t[0].column)},_e,N,N,fr),Im=G((e,t,o,n)=>{const r=ft(t),s=E(r,a=>a.column),l=va(e,s,!1,o,n.replaceOrInit);return re(l,t[0].row,t[0].column)},_e,N,N,Lo),Pm=G(Em,_e,N,N,fr),Fm=G(Nm,_e,N,N,Lo),Hm=G(Bm,_e,N,N,Lo),qm=G((e,t,o,n)=>{const r=ya(e,t,o,n.replaceOrInit);return re(r,t[0].row,t[0].column)},_e,N,N,fr),Vm=G((e,t,o,n)=>{const r=ya(e,t,o,n.replaceOrInit);return re(r,t[0].row,t[0].column)},_e,N,N,Lo),$m=G((e,t,o,n)=>{const r=t.cells;km(r);const s=((l,a,c,i)=>{const u=X(l).rows;if(u.length===0)return l;for(let m=a.startRow;m<=a.finishRow;m++)for(let d=a.startCol;d<=a.finishCol;d++){const f=u[m],p=ve(f,d).isLocked;jt(f,d,ae(i(),!1,p))}return l})(e,t.bounds,0,n.merge(r));return zo(s,h.from(r[0]))},(e,t)=>((o,n)=>n.mergable)(0,t).filter(o=>ra(e,o.cells)),dr,N,ka),Um=G((e,t,o,n)=>{const r=Se(t,(s,l)=>sa(s,l,o,n.unmerge(l)),e);return zo(r,h.from(t[0]))},(e,t)=>((o,n)=>n.unmergable)(0,t).filter(o=>ra(e,o)),dr,N,ka),Gm=G((e,t,o,n)=>{const r=((a,c)=>{const i=te(a);return Ft(i,c,!0)})(t.clipboard,t.generators);var s,l;return((a,c,i,u,m)=>{const d=Je(c),f=((b,y,v)=>{const x=ye(y[0]),C=X(y).cols.length+b.row,T=pe(x-b.column,R=>R+b.column);return{row:C,column:Re(T,R=>we(v,D=>D!==R)).getOr(x-1)}})(a,c,d),p=X(i).rows,g=ma(f,p,d);return((b,y,v)=>{if(b.row>=y.length||b.column>ye(y[0]))return Bo.error("invalid start address out of table bounds, row: "+b.row+", column: "+b.column);const x=y.slice(b.row),C=x[0].cells.slice(b.column),T=ye(v[0]),R=v.length;return Bo.value({rowDelta:x.length-R,colDelta:C.length-T})})(f,c,p).map(b=>{const y=_(_({},b),{colDelta:b.colDelta-g.length}),v=Ht(c,y,u),x=Je(v),C=ma(f,p,x);return((T,R,D,W,k,z)=>{const B=T.row,L=T.column,F=B+D.length,Z=L+ye(D[0])+z.length,V=cn(z,M);for(let de=B;de<F;de++){let nt=0;for(let se=L;se<Z;se++){if(V[se]){nt++;continue}Sm(R,de,se,k)&&sa(R,me(R[de],se),k,W.cell);const rt=se-L-nt,Zo=ve(D[de-B],rt),en=Zo.element,qr=W.replace(en);jt(R[de],se,ae(qr,!0,Zo.isLocked))}}return R})(f,v,p,u,m,C)})})((s=t.row,l=t.column,{row:s,column:l}),e,r,t.generators,o).fold(()=>zo(e,h.some(t.element)),a=>re(a,t.row,t.column))},(e,t)=>Ss(t.element).bind(o=>or(e,o).map(n=>_(_({},n),{generators:t.generators,clipboard:t.clipboard}))),dr,N,De),Km=G((e,t,o,n)=>{const r=X(e).rows,s=t.cells[0].column,l=r[t.cells[0].row],a=Wo(t.clipboard,t.generators,l),c=da(s,e,a,t.generators,o);return re(c,t.cells[0].row,t.cells[0].column)},La(!0),N,N,De),Ym=G((e,t,o,n)=>{const r=X(e).rows,s=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,l=r[t.cells[0].row],a=Wo(t.clipboard,t.generators,l),c=da(s,e,a,t.generators,o);return re(c,t.cells[0].row,t.cells[0].column)},La(!1),N,N,De),Jm=G((e,t,o,n)=>{const r=X(e).rows,s=t.cells[0].row,l=r[s],a=Wo(t.clipboard,t.generators,l),c=ua(s,e,a,t.generators,o);return re(c,t.cells[0].row,t.cells[0].column)},rr,N,N,De),Qm=G((e,t,o,n)=>{const r=X(e).rows,s=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,l=r[t.cells[0].row],a=Wo(t.clipboard,t.generators,l),c=ua(s,e,a,t.generators,o);return re(c,t.cells[0].row,t.cells[0].column)},rr,N,N,De),Xm=(e,t)=>{const o=te(e);return je(o,t).bind(n=>{const r=n[n.length-1],s=n[0].column,l=r.column+r.colspan,a=Kr(E(o.all,c=>K(c.cells,i=>i.column>=s&&i.column<l)));return Zn(a)}).getOr("")},Zm=(e,t)=>{const o=te(e);return je(o,t).bind(Zn).getOr("")},ed=(e,t)=>{const o=te(e);return je(o,t).bind(n=>{const r=n[n.length-1],s=n[0].row,l=r.row+r.rowspan;return(a=>{const c=E(a,m=>Yl(m).type),i=$(c,"header"),u=$(c,"footer");if(i||u){const m=$(c,"body");return!i||m||u?i||m||!u?h.none():h.some("footer"):h.some("header")}return h.some("body")})(o.all.slice(s,l))}).getOr("")},Ma=(e,t)=>e.dispatch("NewRow",{node:t}),ja=(e,t)=>e.dispatch("NewCell",{node:t}),et=(e,t,o)=>{e.dispatch("TableModified",_(_({},o),{table:t}))},Mo={structure:!1,style:!0},U={structure:!0,style:!1},td={structure:!0,style:!0},gt=e=>t=>t.options.get(e),_a="100%",Ia=e=>{var t;const o=e.dom,n=(t=o.getParent(e.selection.getStart(),o.isBlock))!==null&&t!==void 0?t:e.getBody();return kn(S.fromDom(n))+"px"},Pa=e=>h.from(e.options.get("table_clone_elements")),Fa=gt("table_header_type"),gr=gt("table_column_resizing"),Ha=e=>gr(e)==="preservetable",qa=e=>gr(e)==="resizetable",hr=gt("table_sizing_mode"),jo=e=>hr(e)==="relative",ht=e=>hr(e)==="fixed",qt=e=>hr(e)==="responsive",od=gt("table_resize_bars"),Va=gt("table_style_by_css"),nd=e=>{const t=e.options,o=t.get("table_default_attributes");return t.isSet("table_default_attributes")?o:((n,r)=>qt(n)||Va(n)?r:ht(n)?_(_({},r),{width:Ia(n)}):_(_({},r),{width:_a}))(e,o)},rd=gt("table_use_colgroups"),$a=(e,t)=>jo(e)?Vi(t):ht(e)?qi(t):vo(t),sd=(e,t,o)=>{const n=u=>I(yo(u))==="table",r=Pa(e),s=qa(e)?N:um,l=u=>{switch(Fa(e)){case"section":return hm();case"sectionCells":return pm();case"cells":return wm();default:return((m,d)=>{var f;switch((f=te(m),ke(f.all,p=>{const g=Yl(p);return g.type==="header"?h.from(g.subType):h.none()})).getOr(d)){case"section":return Jl();case"sectionCells":return Ql();case"cells":return Xl()}})(u,"section")}},a=(u,m,d,f)=>(p,g,w=!1)=>{Qe(p);const b=S.fromDom(e.getDoc()),y=$n(d,b,r),v={sizing:$a(e,p),resize:qa(e)?Kl():Qn(),section:l(p)};return m(p)?u(p,g,y,v).bind(x=>{t.refresh(p.dom),A(x.newRows,T=>{Ma(e,T.dom)}),A(x.newCells,T=>{ja(e,T.dom)});const C=((T,R)=>R.cursor.fold(()=>{const D=ct(T);return Xt(D).filter(Be).map(W=>{o.clearSelectedCells(T.dom);const k=e.dom.createRng();return k.selectNode(W.dom),e.selection.setRng(k),Y(W,"data-mce-selected","1"),k})},D=>{const W=mm(dm,D),k=e.dom.createRng();return k.setStart(W.element.dom,W.offset),k.setEnd(W.element.dom,W.offset),e.selection.setRng(k),o.clearSelectedCells(T.dom),h.some(k)}))(p,x);return Be(p)&&(Qe(p),w||et(e,p.dom,f)),C.map(T=>({rng:T,effect:f}))}):h.none()},c=a(jm,u=>!n(e)||Xn(u).rows>1,N,U),i=a(Mm,u=>!n(e)||Xn(u).columns>1,N,U);return{deleteRow:c,deleteColumn:i,insertRowsBefore:a(zm,M,N,U),insertRowsAfter:a(Am,M,N,U),insertColumnsBefore:a(Wm,M,s,U),insertColumnsAfter:a(Lm,M,s,U),mergeCells:a($m,M,N,U),unmergeCells:a(Um,M,N,U),pasteColsBefore:a(Km,M,N,U),pasteColsAfter:a(Ym,M,N,U),pasteRowsBefore:a(Jm,M,N,U),pasteRowsAfter:a(Qm,M,N,U),pasteCells:a(Gm,M,N,td),makeCellsHeader:a(qm,M,N,U),unmakeCellsHeader:a(Vm,M,N,U),makeColumnsHeader:a(_m,M,N,U),unmakeColumnsHeader:a(Im,M,N,U),makeRowsHeader:a(Pm,M,N,U),makeRowsBody:a(Fm,M,N,U),makeRowsFooter:a(Hm,M,N,U),getTableRowType:ed,getTableCellType:Zm,getTableColType:Xm}},Ua=(e,t,o)=>{const n=Ae(e,t,1);o===1||n<=1?q(e,t):Y(e,t,Math.min(o,n))},Ga=(e,t)=>o=>{const n=o.column+o.colspan-1,r=o.column;return n>=e&&r<t},Vt=Ze([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Ka=(e,t,o)=>{const n=o.substring(0,o.length-e.length),r=parseFloat(n);return n===r.toString()?t(r):Vt.invalid(o)},tt=_(_({},Vt),{from:e=>lo(e,"%")?Ka("%",Vt.percent,e):lo(e,"px")?Ka("px",Vt.pixels,e):Vt.invalid(e)}),Ya=(e,t,o)=>{const n=tt.from(o),r=we(e,s=>s==="0px")?((s,l)=>{const a=s.fold(()=>O(""),c=>O(c/l+"px"),()=>O(100/l+"%"));return pe(l,a)})(n,e.length):((s,l,a)=>s.fold(()=>l,c=>((i,u,m)=>{const d=m/u;return E(i,f=>tt.from(f).fold(()=>f,p=>p*d+"px",p=>p/100*m+"px"))})(l,a,c),c=>((i,u)=>E(i,m=>tt.from(m).fold(()=>m,d=>d/u*100+"%",d=>d+"%")))(l,a)))(n,e,t);return ad(r)},pr=(e,t)=>e.length===0?t:Se(e,(o,n)=>tt.from(n).fold(O(0),H,H)+o,0),ld=(e,t)=>tt.from(e).fold(O(e),o=>o+t+"px",o=>o+t+"%"),ad=e=>{if(e.length===0)return e;const t=Se(e,(n,r)=>{const s=tt.from(r).fold(()=>({value:r,remainder:0}),l=>((a,c)=>{const i=Math.floor(a);return{value:i+"px",remainder:a-i}})(l),l=>({value:l+"%",remainder:0}));return{output:[s.value].concat(n.output),remainder:n.remainder+s.remainder}},{output:[],remainder:0}),o=t.output;return o.slice(0,o.length-1).concat([ld(o[o.length-1],Math.round(t.remainder))])},cd=tt.from,Ja=e=>cd(e).fold(O("px"),O("px"),O("%")),Qa=(e,t,o)=>{const n=te(e),r=n.all,s=Bn(n),l=fo(n);t.each(a=>{const c=Ja(a),i=Le(e),u=((d,f)=>In(d,f,Fi,Cl))(n,e),m=Ya(u,i,a);_t(n)?((d,f,p)=>{A(f,(g,w)=>{const b=pr([d[w]],Wt());Q(g.element,"width",b+p)})})(m,l,c):((d,f,p)=>{A(f,g=>{const w=d.slice(g.column,g.colspan+g.column),b=pr(w,Wt());Q(g.element,"width",b+p)})})(m,s,c),Q(e,"width",a)}),o.each(a=>{const c=Ja(a),i=An(e),u=((m,d,f)=>Sl(m,d,f,Hi,Cl))(n,e,Mn);((m,d,f,p)=>{A(f,g=>{const w=m.slice(g.row,g.rowspan+g.row),b=pr(w,Cn());Q(g.element,"height",b+p)}),A(d,(g,w)=>{Q(g.element,"height",m[w])})})(Ya(u,i,a),r,s,c),Q(e,"height",a)})},Xa=e=>mt(e).exists(t=>fl.test(t)),Za=e=>mt(e).exists(t=>Li.test(t)),ec=e=>mt(e).isNone(),_o=e=>{q(e,"width")},$t=e=>{const t=xl(e);Qa(e,h.some(t),h.none()),_o(e)},wr=e=>{const t=(o=>Le(o)+"px")(e);Qa(e,h.some(t),h.none()),_o(e)},tc=e=>{Pe(e,"width");const t=Tn(e),o=t.length>0?t:ct(e);A(o,n=>{Pe(n,"width"),_o(n)}),_o(e)},id={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},oc=(e,t,o,n)=>pe(e,r=>((s,l,a,c)=>{const i=S.fromTag("tr");for(let u=0;u<s;u++){const m=S.fromTag(c<l||u<a?"th":"td");u<a&&Y(m,"scope","row"),c<l&&Y(m,"scope","col"),P(m,S.fromTag("br")),P(i,m)}return i})(t,o,n,r)),md=(e,t)=>{e.selection.select(t.dom,!0),e.selection.collapse(!0)},dd=(e,t,o,n,r)=>{const s=(a=>{const c=a.options,i=c.get("table_default_styles");return c.isSet("table_default_styles")?i:((u,m)=>qt(u)||!Va(u)?m:ht(u)?_(_({},m),{width:Ia(u)}):_(_({},m),{width:_a}))(a,i)})(e),l={styles:s,attributes:nd(e),colGroups:rd(e)};return e.undoManager.ignore(()=>{const a=((i,u,m,d,f,p=id)=>{const g=S.fromTag("table"),w=f!=="cells";At(g,p.styles),Ot(g,p.attributes),p.colGroups&&P(g,(x=>{const C=S.fromTag("colgroup");return pe(x,()=>P(C,S.fromTag("col"))),C})(u));const b=Math.min(i,m);if(w&&m>0){const x=S.fromTag("thead");P(g,x);const C=oc(m,u,f==="sectionCells"?b:0,d);Ne(x,C)}const y=S.fromTag("tbody");P(g,y);const v=oc(w?i-b:i,u,w?0:m,d);return Ne(y,v),g})(o,t,r,n,Fa(e),l);Y(a,"data-mce-id","__mce");const c=(i=>{const u=S.fromTag("div"),m=S.fromDom(i.dom.cloneNode(!0));return P(u,m),(d=>d.dom.innerHTML)(u)})(a);e.insertContent(c),e.addVisual()}),zt(yo(e),'table[data-mce-id="__mce"]').map(a=>(ht(e)?wr(a):qt(e)?tc(a):(jo(e)||(c=>Tt(c)&&c.indexOf("%")!==-1)(s.width))&&$t(a),Qe(a),q(a,"data-mce-id"),((c,i)=>{A(ze(i,"tr"),u=>{Ma(c,u.dom),A(ze(u,"th,td"),m=>{ja(c,m.dom)})})})(e,a),((c,i)=>{zt(i,"td,th").each(ne(md,c))})(e,a),a.dom)).getOrNull()};var Io=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const nc="x-tinymce/dom-table-",br=nc+"rows",vr=nc+"columns",rc=e=>{const t=Io.FakeClipboardItem(e);Io.write([t])},yr=e=>{var t;const o=(t=Io.read())!==null&&t!==void 0?t:[];return ke(o,n=>h.from(n.getType(e)))},sc=e=>{yr(e).isSome()&&Io.clear()},lc=e=>{e.fold(ud,t=>rc({[br]:t}))},ac=()=>yr(br),ud=()=>sc(br),cc=e=>{e.fold(fd,t=>rc({[vr]:t}))},ic=()=>yr(vr),fd=()=>sc(vr),xr=e=>cm(xo(e),dt(e)),gd=(e,t)=>{const o=dt(e),n=m=>ie(m,o),r=m=>(d=>Jn(xo(d),dt(d)))(e).bind(d=>n(d).map(f=>m(f,d))),s=m=>{e.focus()},l=(m,d=!1)=>r((f,p)=>{const g=Ro(Oe(e),f,p);m(f,g,d).each(s)}),a=()=>r((m,d)=>((f,p,g)=>{const w=te(f);return je(w,p).bind(b=>{const y=Ft(w,g,!1),v=X(y).rows.slice(b[0].row,b[b.length-1].row+b[b.length-1].rowspan),x=ee(v,T=>{const R=K(T.cells,D=>!D.isLocked);return R.length>0?[_(_({},T),{cells:R})]:[]}),C=No(x);return bn(C.length>0,C)}).map(b=>E(b,y=>{const v=ms(y.element);return A(y.cells,x=>{const C=lt(x.element);Pt(C,"colspan",x.colspan,1),Pt(C,"rowspan",x.rowspan,1),P(v,C)}),v}))})(m,Ro(Oe(e),m,d),$n(N,S.fromDom(e.getDoc()),h.none()))),c=()=>r((m,d)=>((f,p)=>{const g=te(f);return _e(g,p).map(w=>{const b=w[w.length-1],y=w[0].column,v=b.column+b.colspan,x=((T,R,D)=>{if(_t(T)){const W=K(fo(T),Ga(R,D)),k=E(W,B=>{const L=lt(B.element);return Ua(L,"span",D-R),L}),z=S.fromTag("colgroup");return Ne(z,k),[z]}return[]})(g,y,v),C=((T,R,D)=>E(T.all,W=>{const k=K(W.cells,Ga(R,D)),z=E(k,L=>{const F=lt(L.element);return Ua(F,"colspan",D-R),F}),B=S.fromTag("tr");return Ne(B,z),B}))(g,y,v);return[...x,...C]})})(m,Ro(Oe(e),m,d))),i=(m,d)=>d().each(f=>{const p=E(f,g=>lt(g));r((g,w)=>{const b=zl(S.fromDom(e.getDoc())),y=((v,x,C,T)=>({selection:Fl(v),clipboard:C,generators:T}))(Oe(e),0,p,b);m(g,y).each(s)})}),u=m=>(d,f)=>((p,g)=>mn(p,g)?h.from(p.type):h.none())(f,"type").each(p=>{l(m(p),f.no_events)});fe({mceTableSplitCells:()=>l(t.unmergeCells),mceTableMergeCells:()=>l(t.mergeCells),mceTableInsertRowBefore:()=>l(t.insertRowsBefore),mceTableInsertRowAfter:()=>l(t.insertRowsAfter),mceTableInsertColBefore:()=>l(t.insertColumnsBefore),mceTableInsertColAfter:()=>l(t.insertColumnsAfter),mceTableDeleteCol:()=>l(t.deleteColumn),mceTableDeleteRow:()=>l(t.deleteRow),mceTableCutCol:()=>c().each(m=>{cc(m),l(t.deleteColumn)}),mceTableCutRow:()=>a().each(m=>{lc(m),l(t.deleteRow)}),mceTableCopyCol:()=>c().each(m=>cc(m)),mceTableCopyRow:()=>a().each(m=>lc(m)),mceTablePasteColBefore:()=>i(t.pasteColsBefore,ic),mceTablePasteColAfter:()=>i(t.pasteColsAfter,ic),mceTablePasteRowBefore:()=>i(t.pasteRowsBefore,ac),mceTablePasteRowAfter:()=>i(t.pasteRowsAfter,ac),mceTableDelete:()=>xr(e).each(m=>{ie(m,o).filter(ln(o)).each(d=>{const f=S.fromText("");if(Et(d,f),le(d),e.dom.isEmpty(e.getBody()))e.setContent(""),e.selection.setCursorLocation();else{const p=e.dom.createRng();p.setStart(f.dom,0),p.setEnd(f.dom,0),e.selection.setRng(p),e.nodeChanged()}})}),mceTableCellToggleClass:(m,d)=>{r(f=>{const p=Oe(e),g=we(p,b=>e.formatter.match("tablecellclass",{value:d},b.dom)),w=g?e.formatter.remove:e.formatter.apply;A(p,b=>w("tablecellclass",{value:d},b.dom)),et(e,f.dom,Mo)})},mceTableToggleClass:(m,d)=>{r(f=>{e.formatter.toggle("tableclass",{value:d},f.dom),et(e,f.dom,Mo)})},mceTableToggleCaption:()=>{xr(e).each(m=>{ie(m,o).each(d=>{pn(d,"caption").fold(()=>{const f=S.fromTag("caption");P(f,S.fromText("Caption")),((p,g,w)=>{no(p,0).fold(()=>{P(p,g)},b=>{ro(b,g)})})(d,f),e.selection.setCursorLocation(f.dom,0)},f=>{be("caption")(m)&&ss("td",d).each(p=>e.selection.setCursorLocation(p.dom,0)),le(f)}),et(e,d.dom,U)})})},mceTableSizingMode:(m,d)=>(f=>xr(e).each(p=>{qt(e)||ht(e)||jo(e)||ie(p,o).each(g=>{f!=="relative"||Xa(g)?f!=="fixed"||Za(g)?f!=="responsive"||ec(g)||tc(g):wr(g):$t(g),Qe(g),et(e,g.dom,U)})}))(d),mceTableCellType:u(m=>m==="th"?t.makeCellsHeader:t.unmakeCellsHeader),mceTableColType:u(m=>m==="th"?t.makeColumnsHeader:t.unmakeColumnsHeader),mceTableRowType:u(m=>{switch(m){case"header":return t.makeRowsHeader;case"footer":return t.makeRowsFooter;default:return t.makeRowsBody}})},(m,d)=>e.addCommand(d,m)),e.addCommand("mceInsertTable",(m,d)=>{((f,p,g,w={})=>{const b=y=>sn(y)&&y>0;if(b(p)&&b(g)){const y=w.headerRows||0,v=w.headerColumns||0;return dd(f,g,p,v,y)}console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table.")})(e,d.rows,d.columns,d.options)}),e.addCommand("mceTableApplyCellStyle",(m,d)=>{const f=w=>"tablecell"+w.toLowerCase().replace("-","");if(!ei(d))return;const p=Oe(e);if(p.length===0)return;const g=((w,b)=>{const y={};return((v,x,C,T)=>{fe(v,(R,D)=>{(x(R,D)?C:T)(R,D)})})(w,b,(v=>(x,C)=>{v[C]=x})(y),N),y})(d,(w,b)=>e.formatter.has(f(b))&&Tt(w));(w=>{for(const b in w)if(Qr.call(w,b))return!1;return!0})(g)||(fe(g,(w,b)=>{const y=f(b);A(p,v=>{w===""?e.formatter.remove(y,{value:null},v.dom,!0):e.formatter.apply(y,{value:w},v.dom)})}),n(p[0]).each(w=>et(e,w.dom,Mo)))})},Cr=Ze([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),oe={before:Cr.before,on:Cr.on,after:Cr.after,cata:(e,t,o,n)=>e.fold(t,o,n),getStart:e=>e.fold(H,H,H)},pt=(e,t)=>({selection:e,kill:t}),hd=(e,t)=>{const o=e.document.createRange();return o.selectNode(t.dom),o},pd=(e,t)=>{const o=e.document.createRange();return wd(o,t),o},wd=(e,t)=>e.selectNodeContents(t.dom),mc=(e,t,o)=>{const n=e.document.createRange();var r;return r=n,t.fold(s=>{r.setStartBefore(s.dom)},(s,l)=>{r.setStart(s.dom,l)},s=>{r.setStartAfter(s.dom)}),((s,l)=>{l.fold(a=>{s.setEndBefore(a.dom)},(a,c)=>{s.setEnd(a.dom,c)},a=>{s.setEndAfter(a.dom)})})(n,o),n},Sr=(e,t,o,n,r)=>{const s=e.document.createRange();return s.setStart(t.dom,o),s.setEnd(n.dom,r),s},bd=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),Ut=Ze([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),dc=(e,t,o)=>t(S.fromDom(o.startContainer),o.startOffset,S.fromDom(o.endContainer),o.endOffset),uc=(e,t)=>{const o=((n,r)=>r.match({domRange:s=>({ltr:O(s),rtl:h.none}),relative:(s,l)=>({ltr:Lt(()=>mc(n,s,l)),rtl:Lt(()=>h.some(mc(n,l,s)))}),exact:(s,l,a,c)=>({ltr:Lt(()=>Sr(n,s,l,a,c)),rtl:Lt(()=>h.some(Sr(n,a,c,s,l)))})}))(e,t);return((n,r)=>{const s=r.ltr();return s.collapsed?r.rtl().filter(l=>l.collapsed===!1).map(l=>Ut.rtl(S.fromDom(l.endContainer),l.endOffset,S.fromDom(l.startContainer),l.startOffset)).getOrThunk(()=>dc(0,Ut.ltr,s)):dc(0,Ut.ltr,s)})(0,o)},Tr=(e,t)=>uc(e,t).match({ltr:(o,n,r,s)=>{const l=e.document.createRange();return l.setStart(o.dom,n),l.setEnd(r.dom,s),l},rtl:(o,n,r,s)=>{const l=e.document.createRange();return l.setStart(r.dom,s),l.setEnd(o.dom,n),l}});Ut.ltr,Ut.rtl;const Gt=(e,t,o,n)=>({start:e,soffset:t,finish:o,foffset:n}),fc=(e,t,o,n)=>({start:oe.on(e,t),finish:oe.on(o,n)}),gc=(e,t)=>{const o=Tr(e,t);return Gt(S.fromDom(o.startContainer),o.startOffset,S.fromDom(o.endContainer),o.endOffset)},Po=fc,hc=(e,t,o,n,r)=>j(o,n)?h.none():To(o,n,t).bind(s=>{const l=s.boxes.getOr([]);return l.length>1?(r(e,l,s.start,s.finish),h.some(pt(h.some(Po(o,0,o,He(o))),!0))):h.none()}),Rr=(e,t)=>({item:e,mode:t}),pc=(e,t,o,n=wt)=>e.property().parent(t).map(r=>Rr(r,n)),wt=(e,t,o,n=Kt)=>o.sibling(e,t).map(r=>Rr(r,n)),Kt=(e,t,o,n=Kt)=>{const r=e.property().children(t);return o.first(r).map(s=>Rr(s,n))},vd=[{current:pc,next:wt,fallback:h.none()},{current:wt,next:Kt,fallback:h.some(pc)},{current:Kt,next:Kt,fallback:h.some(wt)}],wc=(e,t,o,n,r=vd)=>Re(r,s=>s.current===o).bind(s=>s.current(e,t,n,s.next).orThunk(()=>s.fallback.bind(l=>wc(e,t,l,n)))),Dr=(e,t,o,n,r,s)=>wc(e,t,n,r).bind(l=>s(l.item)?h.none():o(l.item)?h.some(l.item):Dr(e,l.item,o,l.mode,r,s)),bc=e=>t=>e.property().children(t).length===0,vc=(e,t,o,n)=>Dr(e,t,o,wt,{sibling:(r,s)=>r.query().prevSibling(s),first:r=>r.length>0?h.some(r[r.length-1]):h.none()},n),yc=(e,t,o,n)=>Dr(e,t,o,wt,{sibling:(r,s)=>r.query().nextSibling(s),first:r=>r.length>0?h.some(r[0]):h.none()},n),Fo=So(),xc=(e,t)=>((o,n,r)=>vc(o,n,bc(o),r))(Fo,e,t),Cc=(e,t)=>((o,n,r)=>yc(o,n,bc(o),r))(Fo,e,t),Ho=Ze([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),yd=e=>J(e,"tr"),bt=_(_({},Ho),{verify:(e,t,o,n,r,s,l)=>J(n,"td,th",l).bind(a=>J(t,"td,th",l).map(c=>j(a,c)?j(n,a)&&He(a)===r?s(c):Ho.none("in same cell"):Gn(yd,[a,c]).fold(()=>((i,u,m)=>{const d=i.getRect(u),f=i.getRect(m);return f.right>d.left&&f.left<d.right})(e,c,a)?Ho.success():s(c),i=>s(c)))).getOr(Ho.none("default")),cata:(e,t,o,n,r)=>e.fold(t,o,n,r)}),Or=be("br"),kr=(e,t,o)=>t(e,o).bind(n=>$e(n)&&Hn(n).trim().length===0?kr(n,t,o):h.some(n)),xd=(e,t,o,n)=>((r,s)=>no(r,s).filter(Or).orThunk(()=>no(r,s-1).filter(Or)))(t,o).bind(r=>n.traverse(r).fold(()=>kr(r,n.gather,e).map(n.relative),s=>(l=>Ue(l).bind(a=>{const c=he(a);return((i,u)=>an(i,ne(j,u)))(c,l).map(i=>((u,m,d,f)=>({parent:u,children:m,element:d,index:f}))(a,c,l,i))}))(s).map(l=>oe.on(l.parent,l.index)))),qo=(e,t)=>({left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}),Vo=(e,t)=>({left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}),Sc=(e,t,o)=>({left:e.left+t,top:e.top+o,right:e.right+t,bottom:e.bottom+o}),$o=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom}),Tc=(e,t)=>h.some(e.getRect(t)),Rc=(e,t,o)=>Ee(t)?Tc(e,t).map($o):$e(t)?((n,r,s)=>s>=0&&s<He(r)?n.getRangedRect(r,s,r,s+1):s>0?n.getRangedRect(r,s-1,r,s):h.none())(e,t,o).map($o):h.none(),Dc=(e,t)=>Ee(t)?Tc(e,t).map($o):$e(t)?e.getRangedRect(t,0,t,He(t)).map($o):h.none(),qe=Ze([{none:[]},{retry:["caret"]}]),Oc=(e,t,o)=>{return(n=t,r=ir,ps((s,l)=>l(s),Bt,n,r,void 0)).fold(Ce,s=>Dc(e,s).exists(l=>((a,c)=>a.left<c.left||Math.abs(c.right-a.left)<1||a.left>c.right)(o,l)));var n,r},Cd={point:e=>e.bottom,adjuster:(e,t,o,n,r)=>{const s=qo(r,5);return Math.abs(o.bottom-n.bottom)<1||o.top>r.bottom?qe.retry(s):o.top===r.bottom?qe.retry(qo(r,1)):Oc(e,t,r)?qe.retry(Sc(s,5,0)):qe.none()},move:qo,gather:Cc},Er=(e,t,o,n,r)=>r===0?h.some(n):((s,l,a)=>s.elementFromPoint(l,a).filter(c=>I(c)==="table").isSome())(e,n.left,t.point(n))?((s,l,a,c,i)=>Er(s,l,a,l.move(c,5),i))(e,t,o,n,r-1):e.situsFromPoint(n.left,t.point(n)).bind(s=>s.start.fold(h.none,l=>Dc(e,l).bind(a=>t.adjuster(e,l,a,o,n).fold(h.none,c=>Er(e,t,o,c,r-1))).orThunk(()=>h.some(n)),h.none)),kc=(e,t,o)=>{const n=e.move(o,5),r=Er(t,e,o,n,100).getOr(n);return((s,l,a)=>s.point(l)>a.getInnerHeight()?h.some(s.point(l)-a.getInnerHeight()):s.point(l)<0?h.some(-s.point(l)):h.none())(e,r,t).fold(()=>t.situsFromPoint(r.left,e.point(r)),s=>(t.scrollBy(0,s),t.situsFromPoint(r.left,e.point(r)-s)))},Nr={tryUp:ne(kc,{point:e=>e.top,adjuster:(e,t,o,n,r)=>{const s=Vo(r,5);return Math.abs(o.top-n.top)<1||o.bottom<r.top?qe.retry(s):o.bottom===r.top?qe.retry(Vo(r,1)):Oc(e,t,r)?qe.retry(Sc(s,5,0)):qe.none()},move:Vo,gather:xc}),tryDown:ne(kc,Cd),getJumpSize:O(5)},Sd=(e,t,o)=>e.getSelection().bind(n=>((r,s,l,a)=>(Or(s)?((i,u,m)=>m.traverse(u).orThunk(()=>kr(u,m.gather,i)).map(m.relative))(r,s,a):xd(r,s,l,a)).map(i=>({start:i,finish:i})))(t,n.finish,n.foffset,o).fold(()=>h.some(It(n.finish,n.foffset)),r=>{const s=e.fromSitus(r);return l=bt.verify(e,n.finish,n.foffset,s.finish,s.foffset,o.failure,t),bt.cata(l,a=>h.none(),()=>h.none(),a=>h.some(It(a,0)),a=>h.some(It(a,He(a))));var l})),Br=(e,t,o,n,r,s)=>s===0?h.none():Td(e,t,o,n,r).bind(l=>{const a=e.fromSitus(l),c=bt.verify(e,o,n,a.finish,a.foffset,r.failure,t);return bt.cata(c,()=>h.none(),()=>h.some(l),i=>j(o,i)&&n===0?Ec(e,o,n,Vo,r):Br(e,t,i,0,r,s-1),i=>j(o,i)&&n===He(i)?Ec(e,o,n,qo,r):Br(e,t,i,He(i),r,s-1))}),Ec=(e,t,o,n,r)=>Rc(e,t,o).bind(s=>Nc(e,r,n(s,Nr.getJumpSize()))),Nc=(e,t,o)=>{const n=$s().browser;return n.isChromium()||n.isSafari()||n.isFirefox()?t.retry(e,o):h.none()},Td=(e,t,o,n,r)=>Rc(e,o,n).bind(s=>Nc(e,r,s)),Bc=(e,t,o,n,r)=>J(n,"td,th",t).bind(s=>J(s,"table",t).bind(l=>((a,c)=>Bt(a,i=>Ue(i).exists(u=>j(u,c)),void 0).isSome())(r,l)?((a,c,i)=>Sd(a,c,i).bind(u=>Br(a,c,u.element,u.offset,i,20).map(a.fromSitus)))(e,t,o).bind(a=>J(a.finish,"td,th",t).map(c=>({start:s,finish:c,range:a}))):h.none())),zc=(e,t,o,n,r,s)=>s(n,t).orThunk(()=>Bc(e,t,o,n,r).map(l=>{const a=l.range;return pt(h.some(Po(a.start,a.soffset,a.finish,a.foffset)),!0)})),Rd=(e,t)=>J(e,"tr",t).bind(o=>J(o,"table",t).bind(n=>{const r=ze(n,"tr");return j(o,r[0])?((s,l,a)=>vc(Fo,s,c=>El(c).isSome(),a))(n,0,t).map(s=>{const l=He(s);return pt(h.some(Po(s,l,s,l)),!0)}):h.none()})),Dd=(e,t)=>J(e,"tr",t).bind(o=>J(o,"table",t).bind(n=>{const r=ze(n,"tr");return j(o,r[r.length-1])?((s,l,a)=>yc(Fo,s,c=>kl(c).isSome(),a))(n,0,t).map(s=>pt(h.some(Po(s,0,s,0)),!0)):h.none()})),Ac=(e,t,o,n,r,s,l)=>Bc(e,o,n,r,s).bind(a=>hc(t,o,a.start,a.finish,l)),zr=e=>{let t=e;return{get:()=>t,set:o=>{t=o}}},Uo=()=>{const e=(t=>{const o=zr(h.none()),n=()=>o.get().each(t);return{clear:()=>{n(),o.set(h.none())},isSet:()=>o.get().isSome(),get:()=>o.get(),set:r=>{n(),o.set(h.some(r))}}})(N);return _(_({},e),{on:t=>e.get().each(t)})},Wc=(e,t)=>J(e,"td,th",t),Lc={traverse:oo,gather:Cc,relative:oe.before,retry:Nr.tryDown,failure:bt.failedDown},Mc={traverse:as,gather:xc,relative:oe.before,retry:Nr.tryUp,failure:bt.failedUp},vt=e=>t=>t===e,Ar=vt(38),Go=vt(40),Ko=e=>e>=37&&e<=40,Od={isBackward:vt(37),isForward:vt(39)},kd={isBackward:vt(39),isForward:vt(37)},Yo=Ze([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),yt={domRange:Yo.domRange,relative:Yo.relative,exact:Yo.exact,exactFromRange:e=>Yo.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(o=>o.match({domRange:n=>S.fromDom(n.startContainer),relative:(n,r)=>oe.getStart(n),exact:(n,r,s,l)=>n}))(e);return S.fromDom(to(t).dom.defaultView)},range:Gt},Ed=document.caretPositionFromPoint?(e,t,o)=>{var n,r;return h.from((r=(n=e.dom).caretPositionFromPoint)===null||r===void 0?void 0:r.call(n,t,o)).bind(s=>{if(s.offsetNode===null)return h.none();const l=e.dom.createRange();return l.setStart(s.offsetNode,s.offset),l.collapse(),h.some(l)})}:document.caretRangeFromPoint?(e,t,o)=>{var n,r;return h.from((r=(n=e.dom).caretRangeFromPoint)===null||r===void 0?void 0:r.call(n,t,o))}:h.none,Jo=(e,t)=>{const o=I(e);return o==="input"?oe.after(e):$(["br","img"],o)?t===0?oe.before(e):oe.after(e):oe.on(e,t)},Qo=e=>h.from(e.getSelection()),jc=(e,t)=>{Qo(e).each(o=>{o.removeAllRanges(),o.addRange(t)})},Wr=(e,t,o,n,r)=>{const s=Sr(e,t,o,n,r);jc(e,s)},_c=(e,t)=>uc(e,t).match({ltr:(o,n,r,s)=>{Wr(e,o,n,r,s)},rtl:(o,n,r,s)=>{Qo(e).each(l=>{if(l.setBaseAndExtent)l.setBaseAndExtent(o.dom,n,r.dom,s);else if(l.extend)try{((a,c,i,u,m,d)=>{c.collapse(i.dom,u),c.extend(m.dom,d)})(0,l,o,n,r,s)}catch(a){Wr(e,r,s,o,n)}else Wr(e,r,s,o,n)})}}),Ic=(e,t,o,n,r)=>{const s=((l,a,c,i)=>{const u=Jo(l,a),m=Jo(c,i);return yt.relative(u,m)})(t,o,n,r);_c(e,s)},Pc=(e,t,o)=>{const n=((r,s)=>{const l=r.fold(oe.before,Jo,oe.after),a=s.fold(oe.before,Jo,oe.after);return yt.relative(l,a)})(t,o);_c(e,n)},Fc=e=>{if(e.rangeCount>0){const t=e.getRangeAt(0),o=e.getRangeAt(e.rangeCount-1);return h.some(Gt(S.fromDom(t.startContainer),t.startOffset,S.fromDom(o.endContainer),o.endOffset))}return h.none()},Nd=e=>{if(e.anchorNode===null||e.focusNode===null)return Fc(e);{const t=S.fromDom(e.anchorNode),o=S.fromDom(e.focusNode);return((n,r,s,l)=>{const a=((i,u,m,d)=>{const f=eo(i).dom.createRange();return f.setStart(i.dom,u),f.setEnd(m.dom,d),f})(n,r,s,l),c=j(n,s)&&r===l;return a.collapsed&&!c})(t,e.anchorOffset,o,e.focusOffset)?h.some(Gt(t,e.anchorOffset,o,e.focusOffset)):Fc(e)}},Hc=(e,t,o=!0)=>{const n=(o?pd:hd)(e,t);jc(e,n)},qc=e=>(t=>Qo(t).filter(o=>o.rangeCount>0).bind(Nd))(e).map(t=>yt.exact(t.start,t.soffset,t.finish,t.foffset)),Lr=e=>({elementFromPoint:(t,o)=>S.fromPoint(S.fromDom(e.document),t,o),getRect:t=>t.dom.getBoundingClientRect(),getRangedRect:(t,o,n,r)=>{const s=yt.exact(t,o,n,r);return((l,a)=>(c=>{const i=c.getClientRects(),u=i.length>0?i[0]:c.getBoundingClientRect();return u.width>0||u.height>0?h.some(u).map(bd):h.none()})(Tr(l,a)))(e,s)},getSelection:()=>qc(e).map(t=>gc(e,t)),fromSitus:t=>{const o=yt.relative(t.start,t.finish);return gc(e,o)},situsFromPoint:(t,o)=>((n,r,s)=>((l,a,c)=>{const i=S.fromDom(l.document);return Ed(i,a,c).map(u=>Gt(S.fromDom(u.startContainer),u.startOffset,S.fromDom(u.endContainer),u.endOffset))})(n,r,s))(e,t,o).map(n=>fc(n.start,n.soffset,n.finish,n.foffset)),clearSelection:()=>{(t=>{Qo(t).each(o=>o.removeAllRanges())})(e)},collapseSelection:(t=!1)=>{qc(e).each(o=>o.fold(n=>n.collapse(t),(n,r)=>{const s=t?n:r;Pc(e,s,s)},(n,r,s,l)=>{const a=t?n:s,c=t?r:l;Ic(e,a,c,a,c)}))},setSelection:t=>{Ic(e,t.start,t.soffset,t.finish,t.foffset)},setRelativeSelection:(t,o)=>{Pc(e,t,o)},selectNode:t=>{Hc(e,t,!1)},selectContents:t=>{Hc(e,t)},getInnerHeight:()=>e.innerHeight,getScrollY:()=>(t=>{const o=t!==void 0?t.dom:document,n=o.body.scrollLeft||o.documentElement.scrollLeft,r=o.body.scrollTop||o.documentElement.scrollTop;return Me(n,r)})(S.fromDom(e.document)).top,scrollBy:(t,o)=>{((n,r,s)=>{const l=(s!==void 0?s.dom:document).defaultView;l&&l.scrollBy(n,r)})(t,o,S.fromDom(e.document))}}),xt=(e,t)=>({rows:e,cols:t}),Vc=e=>e.dom.classList!==void 0,Bd=(e,t)=>((o,n,r)=>{const s=((l,a)=>{const c=st(l,a);return c===void 0||c===""?[]:c.split(" ")})(o,n).concat([r]);return Y(o,n,s.join(" ")),!0})(e,"class",t),Ct=(e,t)=>{Vc(e)?e.dom.classList.add(t):Bd(e,t)},Mr=(e,t)=>Vc(e)&&e.dom.classList.contains(t),zd=()=>({tag:"none"}),Ad=e=>({tag:"multiple",elements:e}),Wd=e=>({tag:"single",element:e}),$c=e=>{const t=S.fromDom((a=>{if(gi()&&Rt(a.target)){const c=S.fromDom(a.target);if(Ee(c)&&Rt(c.dom.shadowRoot)&&a.composed&&a.composedPath){const i=a.composedPath();if(i)return Xt(i)}}return h.from(a.target)})(e).getOr(e.target)),o=()=>e.stopPropagation(),n=()=>e.preventDefault(),r=(s=n,l=o,(...a)=>s(l.apply(null,a)));var s,l;return((a,c,i,u,m,d,f)=>({target:a,x:c,y:i,stop:u,prevent:m,kill:d,raw:f}))(t,e.clientX,e.clientY,o,n,r,e)},Ld=(e,t,o,n)=>{e.dom.removeEventListener(t,o,n)},Md=M,St=(e,t,o)=>((n,r,s,l)=>((a,c,i,u,m)=>{const d=((f,p)=>g=>{f(g)&&p($c(g))})(i,u);return a.dom.addEventListener(c,d,m),{unbind:ne(Ld,a,c,d,m)}})(n,r,s,l,!1))(e,t,Md,o),Yt=$c,jr=e=>!Mr(S.fromDom(e.target),"ephox-snooker-resizer-bar"),jd=(e,t)=>{const o=(r=Xe.selectedSelector,{get:()=>Pl(S.fromDom(e.getBody()),r).fold(()=>Jn(xo(e),dt(e)).fold(zd,Wd),Ad)}),n=((s,l,a)=>{const c=d=>{q(d,s.selected),q(d,s.firstSelected),q(d,s.lastSelected)},i=d=>{Y(d,s.selected,"1")},u=d=>{m(d),a()},m=d=>{const f=ze(d,`${s.selectedSelector},${s.firstSelectedSelector},${s.lastSelectedSelector}`);A(f,c)};return{clearBeforeUpdate:m,clear:u,selectRange:(d,f,p,g)=>{u(d),A(f,i),Y(p,s.firstSelected,"1"),Y(g,s.lastSelected,"1"),l(f,p,g)},selectedSelector:s.selectedSelector,firstSelectedSelector:s.firstSelectedSelector,lastSelectedSelector:s.lastSelectedSelector}})(Xe,(s,l,a)=>{ie(l).each(c=>{const i=Pa(e),u=$n(N,S.fromDom(e.getDoc()),i),m=((d,f,p)=>{const g=te(d);return je(g,f).map(w=>{const b=Ft(g,p,!1),{rows:y}=X(b),v=((C,T)=>{const R=C.slice(0,T[T.length-1].row+1),D=No(R);return ee(D,W=>{const k=W.cells.slice(0,T[T.length-1].column+1);return E(k,z=>z.element)})})(y,w),x=((C,T)=>{const R=C.slice(T[0].row+T[0].rowspan-1,C.length),D=No(R);return ee(D,W=>{const k=W.cells.slice(T[0].column+T[0].colspan-1,W.cells.length);return E(k,z=>z.element)})})(y,w);return{upOrLeftCells:v,downOrRightCells:x}})})(c,{selection:Oe(e)},u);((d,f,p,g,w)=>{d.dispatch("TableSelectionChange",{cells:f,start:p,finish:g,otherCells:w})})(e,s,l,a,m)})},()=>(s=>{s.dispatch("TableSelectionClear")})(e));var r;return e.on("init",s=>{const l=e.getWin(),a=yo(e),c=dt(e),i=((g,w,b,y)=>{const v=((x,C,T,R)=>{const D=Uo(),W=D.clear,k=z=>{D.on(B=>{R.clearBeforeUpdate(C),Wc(z.target,T).each(L=>{To(B,L,T).each(F=>{const Z=F.boxes.getOr([]);if(Z.length===1){const V=Z[0],de=ta(V)==="false",nt=wn(Zl(z.target),V,j);de&&nt&&(R.selectRange(C,Z,V,V),x.selectContents(V))}else Z.length>1&&(R.selectRange(C,Z,F.start,F.finish),x.selectContents(L))})})})};return{clearstate:W,mousedown:z=>{R.clear(C),Wc(z.target,T).each(D.set)},mouseover:z=>{k(z)},mouseup:z=>{k(z),W()}}})(Lr(g),w,b,y);return{clearstate:v.clearstate,mousedown:v.mousedown,mouseover:v.mouseover,mouseup:v.mouseup}})(l,a,c,n),u=((g,w,b,y)=>{const v=Lr(g),x=()=>(y.clear(w),h.none());return{keydown:(C,T,R,D,W,k)=>{const z=C.raw,B=z.which,L=z.shiftKey===!0;return Yn(w,y.selectedSelector).fold(()=>(Ko(B)&&!L&&y.clearBeforeUpdate(w),Go(B)&&L?ne(Ac,v,w,b,Lc,D,T,y.selectRange):Ar(B)&&L?ne(Ac,v,w,b,Mc,D,T,y.selectRange):Go(B)?ne(zc,v,b,Lc,D,T,Dd):Ar(B)?ne(zc,v,b,Mc,D,T,Rd):h.none),Z=>{const V=de=>()=>ke(de,se=>((rt,Zo,en,qr,tn)=>rm(qr,rt,Zo,tn.firstSelectedSelector,tn.lastSelectedSelector).map(on=>(tn.clearBeforeUpdate(en),tn.selectRange(en,on.boxes,on.start,on.finish),on.boxes)))(se.rows,se.cols,w,Z,y)).fold(()=>Il(w,y.firstSelectedSelector,y.lastSelectedSelector).map(se=>{const rt=Go(B)||k.isForward(B)?oe.after:oe.before;return v.setRelativeSelection(oe.on(se.first,0),rt(se.table)),y.clear(w),pt(h.none(),!0)}),se=>h.some(pt(h.none(),!0)));return Go(B)&&L?V([xt(1,0)]):Ar(B)&&L?V([xt(-1,0)]):k.isBackward(B)&&L?V([xt(0,-1),xt(-1,0)]):k.isForward(B)&&L?V([xt(0,1),xt(1,0)]):Ko(B)&&!L?x:h.none})()},keyup:(C,T,R,D,W)=>Yn(w,y.selectedSelector).fold(()=>{const k=C.raw,z=k.which;return k.shiftKey===!0&&Ko(z)?((B,L,F,Z,V,de,nt)=>j(F,V)&&Z===de?h.none():J(F,"td,th",L).bind(se=>J(V,"td,th",L).bind(rt=>hc(B,L,se,rt,nt))))(w,b,T,R,D,W,y.selectRange):h.none()},h.none)}})(l,a,c,n),m=((g,w,b,y)=>{const v=Lr(g);return(x,C)=>{y.clearBeforeUpdate(w),To(x,C,b).each(T=>{const R=T.boxes.getOr([]);y.selectRange(w,R,T.start,T.finish),v.selectContents(C),v.collapseSelection()})}})(l,a,c,n);e.on("TableSelectorChange",g=>m(g.start,g.finish));const d=(g,w)=>{(b=>b.raw.shiftKey===!0)(g)&&(w.kill&&g.kill(),w.selection.each(b=>{const y=yt.relative(b.start,b.finish),v=Tr(l,y);e.selection.setRng(v)}))},f=g=>g.button===0,p=(()=>{const g=zr(S.fromDom(a)),w=zr(0);return{touchEnd:b=>{const y=S.fromDom(b.target);if(be("td")(y)||be("th")(y)){const v=g.get(),x=w.get();j(v,y)&&b.timeStamp-x<300&&(b.preventDefault(),m(y,y))}g.set(y),w.set(b.timeStamp)}}})();e.on("dragstart",g=>{i.clearstate()}),e.on("mousedown",g=>{f(g)&&jr(g)&&i.mousedown(Yt(g))}),e.on("mouseover",g=>{var w;(w=g).buttons!==void 0&&(1&w.buttons)==0||!jr(g)||i.mouseover(Yt(g))}),e.on("mouseup",g=>{f(g)&&jr(g)&&i.mouseup(Yt(g))}),e.on("touchend",p.touchEnd),e.on("keyup",g=>{const w=Yt(g);if(w.raw.shiftKey&&Ko(w.raw.which)){const b=e.selection.getRng(),y=S.fromDom(b.startContainer),v=S.fromDom(b.endContainer);u.keyup(w,y,b.startOffset,v,b.endOffset).each(x=>{d(w,x)})}}),e.on("keydown",g=>{const w=Yt(g);t.hide();const b=e.selection.getRng(),y=S.fromDom(b.startContainer),v=S.fromDom(b.endContainer),x=nl(Od,kd)(S.fromDom(e.selection.getStart()));u.keydown(w,y,b.startOffset,v,b.endOffset,x).each(C=>{d(w,C)}),t.show()}),e.on("NodeChange",()=>{const g=e.selection,w=S.fromDom(g.getStart()),b=S.fromDom(g.getEnd());Gn(ie,[w,b]).fold(()=>n.clear(a),N)})}),e.on("PreInit",()=>{e.serializer.addTempAttr(Xe.firstSelected),e.serializer.addTempAttr(Xe.lastSelected)}),{getSelectedCells:()=>((s,l,a,c)=>{switch(s.tag){case"none":return l();case"single":return(i=>[i.dom])(s.element);case"multiple":return(i=>E(i,u=>u.dom))(s.elements)}})(o.get(),O([])),clearSelectedCells:s=>n.clear(S.fromDom(s))}},xe=e=>{let t=[];return{bind:o=>{if(o===void 0)throw new Error("Event bind error: undefined handler");t.push(o)},unbind:o=>{t=K(t,n=>n!==o)},trigger:(...o)=>{const n={};A(e,(r,s)=>{n[r]=o[s]}),A(t,r=>{r(n)})}}},ot=e=>({registry:Xr(e,t=>({bind:t.bind,unbind:t.unbind})),trigger:Xr(e,t=>t.trigger)}),Jt=e=>e.slice(0).sort(),_d=(e,t)=>{const o=K(t,n=>!$(e,n));o.length>0&&(n=>{throw new Error("Unsupported keys for object: "+Jt(n).join(", "))})(o)},_r=e=>((t,o)=>((n,r,s)=>{if(r.length===0)throw new Error("You must specify at least one required field.");return((l,a)=>{if(!Qt(a))throw new Error("The required fields must be an array. Was: "+a+".");A(a,c=>{if(!Tt(c))throw new Error("The value "+c+" in the "+l+" fields was not a string.")})})("required",r),(l=>{const a=Jt(l);Re(a,(c,i)=>i<a.length-1&&c===a[i+1]).each(c=>{throw new Error("The field: "+c+" occurs more than once in the combined fields: ["+a.join(", ")+"].")})})(r),l=>{const a=Dt(l);we(r,i=>$(a,i))||((i,u)=>{throw new Error("All required keys ("+Jt(i).join(", ")+") were not specified. Specified keys were: "+Jt(u).join(", ")+".")})(r,a),n(r,a);const c=K(r,i=>!s.validate(l[i],i));return c.length>0&&((i,u)=>{throw new Error("All values need to be of type: "+u+". Keys ("+Jt(i).join(", ")+") were not.")})(c,s.label),l}})(t,o,{validate:Ve,label:"function"}))(_d,e),Id=_r(["compare","extract","mutate","sink"]),Pd=_r(["element","start","stop","destroy"]),Fd=_r(["forceDrop","drop","move","delayDrop"]),Hd=()=>{const e=(()=>{const n=ot({move:xe(["info"])});return{onEvent:N,reset:N,events:n.registry}})(),t=(()=>{let n=h.none();const r=ot({move:xe(["info"])});return{onEvent:(s,l)=>{l.extract(s).each(a=>{((i,u)=>{const m=n.map(d=>i.compare(d,u));return n=h.some(u),m})(l,a).each(i=>{r.trigger.move(i)})})},reset:()=>{n=h.none()},events:r.registry}})();let o=e;return{on:()=>{o.reset(),o=t},off:()=>{o.reset(),o=e},isOn:()=>o===t,onEvent:(n,r)=>{o.onEvent(n,r)},events:t.events}},Uc=e=>{const t=e.replace(/\./g,"-");return{resolve:o=>t+"-"+o}},Gc=Uc("ephox-dragster").resolve;var qd=Id({compare:(e,t)=>Me(t.left-e.left,t.top-e.top),extract:e=>h.some(Me(e.x,e.y)),sink:(e,t)=>{const o=(a=>{const c=_({layerClass:Gc("blocker")},a),i=S.fromTag("div");return Y(i,"role","presentation"),At(i,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Ct(i,Gc("blocker")),Ct(i,c.layerClass),{element:O(i),destroy:()=>{le(i)}}})(t),n=St(o.element(),"mousedown",e.forceDrop),r=St(o.element(),"mouseup",e.drop),s=St(o.element(),"mousemove",e.move),l=St(o.element(),"mouseout",e.delayDrop);return Pd({element:o.element,start:a=>{P(a,o.element())},stop:()=>{le(o.element())},destroy:()=>{o.destroy(),r.unbind(),s.unbind(),l.unbind(),n.unbind()}})},mutate:(e,t)=>{e.mutate(t.left,t.top)}});const Xo=Uc("ephox-snooker").resolve,Ir=Xo("resizer-bar"),Kc=Xo("resizer-rows"),Yc=Xo("resizer-cols"),Pr=e=>{const t=ze(e.parent(),"."+Ir);A(t,le)},Jc=(e,t,o)=>{const n=e.origin();A(t,r=>{r.each(s=>{const l=o(n,s);Ct(l,Ir),P(e.parent(),l)})})},Vd=(e,t,o,n,r)=>{const s=ho(o),l=t.isResizable,a=n.length>0?Mn.positions(n,o):[],c=a.length>0?((m,d)=>ee(m.all,(f,p)=>d(f.element)?[p]:[]))(e,l):[];((m,d,f,p)=>{Jc(m,d,(g,w)=>{const b=((y,v,x,C,T)=>{const R=S.fromTag("div");return At(R,{position:"absolute",left:v+"px",top:x-3.5+"px",height:"7px",width:C+"px"}),Ot(R,{"data-row":y,role:"presentation"}),R})(w.row,f.left-g.left,w.y-g.top,p);return Ct(b,Kc),b})})(t,K(a,(m,d)=>ue(c,f=>d===f)),s,On(o));const i=r.length>0?po.positions(r,o):[],u=i.length>0?((m,d)=>{const f=[];return pe(m.grid.columns,p=>{el(m,p).map(g=>g.element).forall(d)&&f.push(p)}),K(f,p=>{const g=Zs(m,w=>w.column===p);return we(g,w=>d(w.element))})})(e,l):[];((m,d,f,p)=>{Jc(m,d,(g,w)=>{const b=((y,v,x,C,T)=>{const R=S.fromTag("div");return At(R,{position:"absolute",left:v-3.5+"px",top:x+"px",height:T+"px",width:"7px"}),Ot(R,{"data-column":y,role:"presentation"}),R})(w.col,w.x-g.left,f.top-g.top,0,p);return Ct(b,Yc),b})})(t,K(i,(m,d)=>ue(u,f=>d===f)),s,sl(o))},Fr=(e,t)=>{if(Pr(e),e.isResizable(t)){const o=te(t),n=ol(o),r=zn(o);Vd(o,e,t,n,r)}},Qc=(e,t)=>{const o=ze(e.parent(),"."+Ir);A(o,t)},$d=e=>{Qc(e,t=>{Q(t,"display","none")})},Ud=e=>{Qc(e,t=>{Q(t,"display","block")})},Gd=Xo("resizer-bar-dragging"),Kd=e=>{const t=(()=>{const m=ot({drag:xe(["xDelta","yDelta","target"])});let d=h.none();const f=(()=>{const p=ot({drag:xe(["xDelta","yDelta"])});return{mutate:(g,w)=>{p.trigger.drag(g,w)},events:p.registry}})();return f.events.drag.bind(p=>{d.each(g=>{m.trigger.drag(p.xDelta,p.yDelta,g)})}),{assign:p=>{d=h.some(p)},get:()=>d,mutate:f.mutate,events:m.registry}})(),o=((m,d={})=>{var f;return((p,g,w)=>{let b=!1;const y=ot({start:xe([]),stop:xe([])}),v=Hd(),x=()=>{R.stop(),v.isOn()&&(v.off(),y.trigger.stop())},C=((D,W)=>{let k=null;const z=()=>{ti(k)||(clearTimeout(k),k=null)};return{cancel:z,throttle:(...B)=>{z(),k=setTimeout(()=>{k=null,D.apply(null,B)},200)}}})(x);v.events.move.bind(D=>{g.mutate(p,D.info)});const T=D=>(...W)=>{b&&D.apply(null,W)},R=g.sink(Fd({forceDrop:x,drop:T(x),move:T(D=>{C.cancel(),v.onEvent(D,g)}),delayDrop:T(C.throttle)}),w);return{element:R.element,go:D=>{R.start(D),v.on(),y.trigger.start()},on:()=>{b=!0},off:()=>{b=!1},destroy:()=>{R.destroy()},events:y.registry}})(m,(f=d.mode)!==null&&f!==void 0?f:qd,d)})(t,{});let n=h.none();const r=(m,d)=>h.from(st(m,d));t.events.drag.bind(m=>{r(m.target,"data-row").each(d=>{const f=ao(m.target,"top");Q(m.target,"top",f+m.yDelta+"px")}),r(m.target,"data-column").each(d=>{const f=ao(m.target,"left");Q(m.target,"left",f+m.xDelta+"px")})});const s=(m,d)=>ao(m,d)-Ae(m,"data-initial-"+d,0);o.events.stop.bind(()=>{t.get().each(m=>{n.each(d=>{r(m,"data-row").each(f=>{const p=s(m,"top");q(m,"data-initial-top"),u.trigger.adjustHeight(d,p,parseInt(f,10))}),r(m,"data-column").each(f=>{const p=s(m,"left");q(m,"data-initial-left"),u.trigger.adjustWidth(d,p,parseInt(f,10))}),Fr(e,d)})})});const l=(m,d)=>{u.trigger.startAdjust(),t.assign(m),Y(m,"data-initial-"+d,ao(m,d)),Ct(m,Gd),Q(m,"opacity","0.2"),o.go(e.parent())},a=St(e.parent(),"mousedown",m=>{var d;d=m.target,Mr(d,Kc)&&l(m.target,"top"),(f=>Mr(f,Yc))(m.target)&&l(m.target,"left")}),c=m=>j(m,e.view()),i=St(e.view(),"mouseover",m=>{var d;(d=m.target,J(d,"table",c).filter(ea)).fold(()=>{Be(m.target)&&Pr(e)},f=>{n=h.some(f),Fr(e,f)})}),u=ot({adjustHeight:xe(["table","delta","row"]),adjustWidth:xe(["table","delta","column"]),startAdjust:xe([])});return{destroy:()=>{a.unbind(),i.unbind(),o.destroy(),Pr(e)},refresh:m=>{Fr(e,m)},on:o.on,off:o.off,hideBars:ne($d,e),showBars:ne(Ud,e),events:u.registry}},Yd=(e,t,o)=>{const n=Mn,r=po,s=Kd(e),l=ot({beforeResize:xe(["table","type"]),afterResize:xe(["table","type"]),startDrag:xe([])});return s.events.adjustHeight.bind(a=>{const c=a.table;l.trigger.beforeResize(c,"row"),((i,u,m,d)=>{const f=te(i),p=((v,x,C)=>Sl(v,x,C,vl,T=>T.getOrThunk(Cn)))(f,i,d),g=E(p,(v,x)=>m===x?Math.max(u+v,Cn()):v),w=Tm(f,g),b=((v,x)=>E(v.all,(C,T)=>({element:C.element,height:x[T]})))(f,g);A(b,v=>{wo(v.element,v.height)}),A(w,v=>{wo(v.element,v.height)});const y=Se(g,(v,x)=>v+x,0);wo(i,y)})(c,n.delta(a.delta,c),a.row,n),l.trigger.afterResize(c,"row")}),s.events.startAdjust.bind(a=>{l.trigger.startDrag()}),s.events.adjustWidth.bind(a=>{const c=a.table;l.trigger.beforeResize(c,"col");const i=r.delta(a.delta,c),u=o(c);Ca(c,i,a.column,t,u),l.trigger.afterResize(c,"col")}),{on:s.on,off:s.off,refreshBars:s.refresh,hideBars:s.hideBars,showBars:s.showBars,destroy:s.destroy,events:l.registry}},Xc=e=>Rt(e)&&e.nodeName==="TABLE",Hr="bar-",Jd=e=>st(e,"data-mce-resize")!=="false",Qd=e=>{const t=Uo(),o=Uo(),n=Uo();let r,s;const l=c=>$a(e,c),a=()=>Ha(e)?Qn():Kl();return e.on("init",()=>{const c=((i,u)=>i.inline?((m,d,f)=>({parent:O(d),view:O(m),origin:O(Me(0,0)),isResizable:f}))(S.fromDom(i.getBody()),(()=>{const m=S.fromTag("div");return At(m,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),P(gs(S.fromDom(document)),m),m})(),u):((m,d)=>{const f=os(m)?(p=>S.fromDom(to(p).dom.documentElement))(m):m;return{parent:O(f),view:O(m),origin:O(Me(0,0)),isResizable:d}})(S.fromDom(i.getDoc()),u))(e,Jd);if(n.set(c),(i=>{const u=i.options.get("object_resizing");return $(u.split(","),"table")})(e)&&od(e)){const i=a(),u=Yd(c,i,l);u.on(),u.events.startDrag.bind(m=>{t.set(e.selection.getRng())}),u.events.beforeResize.bind(m=>{const d=m.table.dom;((f,p,g,w,b)=>{f.dispatch("ObjectResizeStart",{target:p,width:g,height:w,origin:b})})(e,d,Al(d),Wl(d),Hr+m.type)}),u.events.afterResize.bind(m=>{const d=m.table,f=d.dom;Qe(d),t.on(p=>{e.selection.setRng(p),e.focus()}),((p,g,w,b,y)=>{p.dispatch("ObjectResized",{target:g,width:w,height:b,origin:y})})(e,f,Al(f),Wl(f),Hr+m.type),e.undoManager.add()}),o.set(u)}}),e.on("ObjectResizeStart",c=>{const i=c.target;if(Xc(i)){const u=S.fromDom(i);A(e.dom.select(".mce-clonedresizable"),m=>{e.dom.addClass(m,"mce-"+gr(e)+"-columns")}),!Za(u)&&ht(e)?wr(u):!Xa(u)&&jo(e)&&$t(u),ec(u)&&vs(c.origin,Hr)&&$t(u),r=c.width,s=qt(e)?"":((m,d)=>{const f=m.dom.getStyle(d,"width")||m.dom.getAttrib(d,"width");return h.from(f).filter(bi)})(e,i).getOr("")}}),e.on("ObjectResized",c=>{const i=c.target;if(Xc(i)){const u=S.fromDom(i),m=c.origin;vs(m,"corner-")&&((d,f,p)=>{const g=lo(f,"e");if(s===""&&$t(d),p!==r&&s!==""){Q(d,"width",s);const w=a(),b=l(d),y=Ha(e)||g?(v=>Xn(v).columns)(d)-1:0;Ca(d,p-r,y,w,b)}else if((w=>/^(\d+(\.\d+)?)%$/.test(w))(s)){const w=parseFloat(s.replace("%",""));Q(d,"width",p*w/r+"%")}(w=>/^(\d+(\.\d+)?)px$/.test(w))(s)&&(w=>{const b=te(w);_t(b)||A(ct(w),y=>{const v=Ye(y,"width");Q(y,"width",v),q(y,"width")})})(d)})(u,m,c.width),Qe(u),et(e,u.dom,Mo)}}),e.on("SwitchMode",()=>{o.on(c=>{e.mode.isReadOnly()?c.hideBars():c.showBars()})}),e.on("remove",()=>{o.on(c=>{c.destroy()}),n.on(c=>{((i,u)=>{i.inline&&le(u.parent())})(e,c)})}),{refresh:c=>{o.on(i=>i.refreshBars(S.fromDom(c)))},hide:()=>{o.on(c=>c.hideBars())},show:()=>{o.on(c=>c.showBars())}}},Xd=e=>{(r=>{const s=r.options.register;s("table_clone_elements",{processor:"string[]"}),s("table_use_colgroups",{processor:"boolean",default:!0}),s("table_header_type",{processor:l=>{const a=$(["section","cells","sectionCells","auto"],l);return a?{value:l,valid:a}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),s("table_sizing_mode",{processor:"string",default:"auto"}),s("table_default_attributes",{processor:"object",default:{border:"1"}}),s("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),s("table_column_resizing",{processor:l=>{const a=$(["preservetable","resizetable"],l);return a?{value:l,valid:a}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),s("table_resize_bars",{processor:"boolean",default:!0}),s("table_style_by_css",{processor:"boolean",default:!0})})(e);const t=Qd(e),o=jd(e,t),n=sd(e,t,o);return gd(e,n),((r,s)=>{const l=dt(r),a=c=>Jn(xo(r)).bind(i=>ie(i,l).map(u=>{const m=Ro(Oe(r),u,i);return c(u,m)})).getOr("");fe({mceTableRowType:()=>a(s.getTableRowType),mceTableCellType:()=>a(s.getTableCellType),mceTableColType:()=>a(s.getTableColType)},(c,i)=>r.addQueryValueHandler(i,c))})(e,n),im(e,n),{getSelectedCells:o.getSelectedCells,clearSelectedCells:o.clearSelectedCells}};Zc.add("dom",e=>({table:Xd(e)}))})();
