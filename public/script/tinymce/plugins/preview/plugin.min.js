(function(){"use strict";var m=tinymce.util.Tools.resolve("tinymce.PluginManager"),l=tinymce.util.Tools.resolve("tinymce.Env"),y=tinymce.util.Tools.resolve("tinymce.util.Tools");const i=s=>t=>t.options.get(s),u=i("content_style"),v=i("content_css_cors"),p=i("body_class"),w=i("body_id");m.add("preview",s=>{(t=>{t.addCommand("mcePreview",()=>{(n=>{const g=(e=>{var r;let c="";const o=e.dom.encode,a=(r=u(e))!==null&&r!==void 0?r:"";c+='<base href="'+o(e.documentBaseURI.getURI())+'">';const b=v(e)?' crossorigin="anonymous"':"";y.each(e.contentCSS,C=>{c+='<link type="text/css" rel="stylesheet" href="'+o(e.documentBaseURI.toAbsolute(C))+'"'+b+">"}),a&&(c+='<style type="text/css">'+a+"</style>");const f=w(e),h=p(e),P='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(l.os.isMacOS()||l.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);</script> ",d=e.getBody().dir,x=d?' dir="'+o(d)+'"':"";return"<!DOCTYPE html><html><head>"+c+'</head><body id="'+o(f)+'" class="mce-content-body '+o(h)+'"'+x+">"+e.getContent()+P+"</body></html>"})(n);n.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:g}}).focus("close")})(t)})})(s),(t=>{const n=()=>t.execCommand("mcePreview");t.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:n}),t.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:n})})(s)})})();
