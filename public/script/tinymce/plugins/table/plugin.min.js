var S=Object.assign;(function(){"use strict";var wo=tinymce.util.Tools.resolve("tinymce.PluginManager");const ct=e=>t=>(o=>{const l=typeof o;return o===null?"null":l==="object"&&Array.isArray(o)?"array":l==="object"&&(n=r=o,(a=String).prototype.isPrototypeOf(n)||((i=r.constructor)===null||i===void 0?void 0:i.name)===a.name)?"string":l;var n,r,a,i})(t)===e,xe=e=>t=>typeof t===e,Ae=ct("string"),Re=ct("array"),So=xe("boolean"),Oe=e=>e===void 0,De=e=>!(t=>t==null)(e),F=xe("function"),Co=xe("number"),vo=()=>{},A=e=>()=>e,Ie=e=>e,To=(e,t)=>e===t;function k(e,...t){return(...o)=>{const l=t.concat(o);return e.apply(null,l)}}const xo=e=>{e()},Z=A(!1),ee=A(!0);class d{constructor(t,o){this.tag=t,this.value=o}static some(t){return new d(!0,t)}static none(){return d.singletonNone}fold(t,o){return this.tag?o(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?d.some(t(this.value)):d.none()}bind(t){return this.tag?t(this.value):d.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:d.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t!=null?t:"Called getOrDie on None")}static from(t){return De(t)?d.some(t):d.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}d.singletonNone=new d(!1);const te=Object.keys,Ao=Object.hasOwnProperty,oe=(e,t)=>{const o=te(e);for(let l=0,n=o.length;l<n;l++){const r=o[l];t(e[r],r)}},ue=(e,t)=>{const o={};var l;return((n,r,a,i)=>{oe(n,(s,c)=>{(r(s,c)?a:i)(s,c)})})(e,t,(l=o,(n,r)=>{l[r]=n}),vo),o},W=e=>te(e).length,j=(e,t)=>V(e,t)?d.from(e[t]):d.none(),V=(e,t)=>Ao.call(e,t),it=(e,t)=>V(e,t)&&e[t]!==void 0&&e[t]!==null,Ro=Array.prototype.indexOf,Oo=Array.prototype.push,B=(e,t)=>((o,l)=>Ro.call(o,l))(e,t)>-1,_e=(e,t)=>{for(let o=0,l=e.length;o<l;o++)if(t(e[o],o))return!0;return!1},mt=(e,t)=>{const o=[];for(let l=0;l<e;l++)o.push(t(l));return o},R=(e,t)=>{const o=e.length,l=new Array(o);for(let n=0;n<o;n++){const r=e[n];l[n]=t(r,n)}return l},M=(e,t)=>{for(let o=0,l=e.length;o<l;o++)t(e[o],o)},K=(e,t)=>{const o=[];for(let l=0,n=e.length;l<n;l++){const r=e[l];t(r,l)&&o.push(r)}return o},dt=(e,t,o)=>(M(e,(l,n)=>{o=t(o,l,n)}),o),Me=(e,t)=>((o,l,n)=>{for(let r=0,a=o.length;r<a;r++){const i=o[r];if(l(i,r))return d.some(i);if(n(i,r))break}return d.none()})(e,t,Z),le=(e,t)=>(o=>{const l=[];for(let n=0,r=o.length;n<r;++n){if(!Re(o[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+o);Oo.apply(l,o[n])}return l})(R(e,t)),pe=(e,t)=>{for(let o=0,l=e.length;o<l;++o)if(t(e[o],o)!==!0)return!1;return!0},ut=(e,t)=>t>=0&&t<e.length?d.some(e[t]):d.none(),pt=(e,t)=>{for(let o=0;o<e.length;o++){const l=t(e[o],o);if(l.isSome())return l}return d.none()},ne=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},T={fromHtml:(e,t)=>{const o=(t||document).createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1){const l="HTML does not have a single root node";throw console.error(l,e),new Error(l)}return ne(o.childNodes[0])},fromTag:(e,t)=>{const o=(t||document).createElement(e);return ne(o)},fromText:(e,t)=>{const o=(t||document).createTextNode(e);return ne(o)},fromDom:ne,fromPoint:(e,t,o)=>d.from(e.dom.elementFromPoint(t,o)).map(ne)};typeof window!="undefined"||Function("return this;")();const E=e=>e.dom.nodeName.toLowerCase(),bt=e=>e.dom.nodeType,be=e=>t=>bt(t)===e,J=be(1),Ne=be(3),Do=be(9),Io=be(11),gt=e=>t=>J(t)&&E(t)===e,z=(e,t)=>{const o=e.dom;if(o.nodeType!==1)return!1;{const l=o;if(l.matches!==void 0)return l.matches(t);if(l.msMatchesSelector!==void 0)return l.msMatchesSelector(t);if(l.webkitMatchesSelector!==void 0)return l.webkitMatchesSelector(t);if(l.mozMatchesSelector!==void 0)return l.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},ht=e=>e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11||e.childElementCount===0,q=(e,t)=>e.dom===t.dom,_o=z,ft=e=>Do(e)?e:T.fromDom(e.dom.ownerDocument),ge=e=>d.from(e.dom.parentNode).map(T.fromDom),yt=e=>d.from(e.dom.nextSibling).map(T.fromDom),re=e=>R(e.dom.childNodes,T.fromDom),Mo=F(Element.prototype.attachShadow)&&F(Node.prototype.getRootNode)?e=>T.fromDom(e.dom.getRootNode()):ft,No=e=>T.fromDom(e.dom.host),wt=e=>{const t=Ne(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const o=t.ownerDocument;return(r=>{const a=Mo(r);return Io(i=a)&&De(i.dom.host)?d.some(a):d.none();var i})(T.fromDom(t)).fold(()=>o.body.contains(t),(l=wt,n=No,r=>l(n(r))));var l,n},St=(e,t)=>{let o=[];return M(re(e),l=>{t(l)&&(o=o.concat([l])),o=o.concat(St(l,t))}),o},Pe=(e,t)=>((o,l)=>K(re(o),n=>z(n,t)))(e),Ct=(e,t)=>((o,l)=>{const n=l===void 0?document:l.dom;return ht(n)?[]:R(n.querySelectorAll(o),T.fromDom)})(t,e),vt=(e,t,o)=>{let l=e.dom;const n=F(o)?o:Z;for(;l.parentNode;){l=l.parentNode;const r=T.fromDom(l);if(t(r))return d.some(r);if(n(r))break}return d.none()},Q=(e,t,o)=>vt(e,l=>z(l,t),o),Po=(e,t)=>((o,l)=>Me(o.dom.childNodes,n=>{return r=T.fromDom(n),z(r,t);var r}).map(T.fromDom))(e),Tt=(e,t)=>((o,l)=>{const n=l===void 0?document:l.dom;return ht(n)?d.none():d.from(n.querySelector(o)).map(T.fromDom)})(t,e),ke=(e,t,o)=>((l,n,r,a,i)=>((s,c)=>z(s,c))(r,a)?d.some(r):F(i)&&i(r)?d.none():n(r,a,i))(0,Q,e,t,o),xt=(e,t,o)=>{if(!(Ae(o)||So(o)||Co(o)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,o+"")},he=(e,t)=>{const o=e.dom.getAttribute(t);return o===null?void 0:o},ae=(e,t)=>d.from(he(e,t)),At=(e,t)=>{e.dom.removeAttribute(t)},Rt=(e,t,o=To)=>e.exists(l=>o(l,t)),Ot=(e,t,o)=>e.isSome()&&t.isSome()?d.some(o(e.getOrDie(),t.getOrDie())):d.none(),Dt=(e,t)=>((o,l,n)=>l===""||o.length>=l.length&&o.substr(0,0+l.length)===l)(e,t),ko=(It=/^\s+|\s+$/g,e=>e.replace(It,""));var It;const _t=e=>e.length>0,Mt=(e,t=10)=>{const o=parseInt(e,t);return isNaN(o)?d.none():d.some(o)},Be=e=>e.style!==void 0&&F(e.style.getPropertyValue),Nt=(e,t)=>{const o=e.dom,l=window.getComputedStyle(o).getPropertyValue(t);return l!==""||wt(e)?l:Pt(o,t)},Pt=(e,t)=>Be(e)?e.style.getPropertyValue(t):"",X=(e,t)=>{const o=e.dom,l=Pt(o,t);return d.from(l).filter(n=>n.length>0)},Ee=(e,t,o=0)=>ae(e,t).map(l=>parseInt(l,10)).getOr(o),kt=(e,t)=>Bt(e,t,ee),Bt=(e,t,o)=>le(re(e),l=>z(l,t)?o(l)?[l]:[]:Bt(l,t,o)),Bo=["tfoot","thead","tbody","colgroup"],Et=(e,t,o)=>({element:e,rowspan:t,colspan:o}),Fe=(e,t,o)=>({element:e,cells:t,section:o}),N=(e,t)=>ke(e,"table",t),Ft=e=>kt(e,"tr"),qt=e=>N(e).fold(A([]),t=>Pe(t,"colgroup")),Eo=e=>ge(e).map(t=>{const o=E(t);return(l=>B(Bo,l))(o)?o:"tbody"}).getOr("tbody"),Fo=e=>ae(e,"data-snooker-locked-cols").bind(t=>d.from(t.match(/\d+/g))).map(t=>((o,l)=>{const n={};for(let r=0,a=o.length;r<a;r++){const i=o[r];n[String(i)]=l(i,r)}return n})(t,ee)),qe=(e,t)=>e+","+t,qo=e=>{const t={},o=[];var l;const n=(l=e,ut(l,0)).map(b=>b.element).bind(N).bind(Fo).getOr({});let r=0,a=0,i=0;const{pass:s,fail:c}=((b,g)=>{const v=[],p=[];for(let f=0,w=b.length;f<w;f++){const C=b[f];(h=C,h.section==="colgroup"?v:p).push(C)}var h;return{pass:v,fail:p}})(e);M(c,b=>{const g=[];M(b.cells,v=>{let p=0;for(;t[qe(i,p)]!==void 0;)p++;const h=it(n,p.toString()),f=((w,C,x,O,D,P)=>({element:w,rowspan:C,colspan:x,row:O,column:D,isLocked:P}))(v.element,v.rowspan,v.colspan,i,p,h);for(let w=0;w<v.colspan;w++)for(let C=0;C<v.rowspan;C++){const x=p+w,O=qe(i+C,x);t[O]=f,a=Math.max(a,x+1)}g.push(f)}),r++,o.push(Fe(b.element,g,b.section)),i++});const{columns:m,colgroups:u}=(b=>ut(b,b.length-1))(s).map(b=>{const g=(p=>{const h={};let f=0;return M(p.cells,w=>{const C=w.colspan;mt(C,x=>{const O=f+x;h[O]=((D,P,_)=>({element:D,colspan:P,column:_}))(w.element,C,O)}),f+=C}),h})(b);return{colgroups:[((p,h)=>({element:p,columns:h}))(b.element,((p,h)=>{const f=[];return oe(p,(w,C)=>{f.push(h(w,C))}),f})(g,Ie))],columns:g}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:((b,g)=>({rows:b,columns:g}))(r,a),access:t,all:o,columns:m,colgroups:u}},fe=e=>{const t=(o=>{const l=Ft(o);return((n,r)=>R(n,a=>{if(E(a)==="colgroup"){const i=R((s=>z(s,"colgroup")?Pe(s,"col"):le(qt(s),c=>Pe(c,"col")))(a),s=>{const c=Ee(s,"span",1);return Et(s,1,c)});return Fe(a,i,"colgroup")}{const i=R((s=>kt(s,"th,td"))(a),s=>{const c=Ee(s,"rowspan",1),m=Ee(s,"colspan",1);return Et(s,c,m)});return Fe(a,i,r(a))}}))([...qt(o),...l],Eo)})(e);return qo(t)},Lo=(e,t,o)=>d.from(e.access[qe(t,o)]),Lt=(e,t,o)=>{const l=((n,r)=>{const a=le(n.all,i=>i.cells);return K(a,r)})(e,n=>o(t,n.element));return l.length>0?d.some(l[0]):d.none()},Ho=(e,t)=>d.from(e.columns[t]);var Ht=tinymce.util.Tools.resolve("tinymce.util.Tools");const ye=(e,t,o)=>{const l=e.select("td,th",t);let n;for(let r=0;r<l.length;r++){const a=e.getStyle(l[r],o);if(Oe(n)&&(n=a),n!==a)return""}return n},Le=(e,t,o)=>{Ht.each("left center right".split(" "),l=>{l!==o&&e.formatter.remove("align"+l,{},t)}),o&&e.formatter.apply("align"+o,{},t)},He=(e,t,o)=>{e.dispatch("TableModified",S(S({},o),{table:t}))},we=(e,t,o)=>((l,n)=>(r=>{const a=parseFloat(r);return isNaN(a)?d.none():d.some(a)})(l).getOr(n))(Nt(e,t),o),jo=e=>((t,o)=>{const l=t.dom,n=l.getBoundingClientRect().width||l.offsetWidth;return o==="border-box"?n:((r,a,i,s)=>a-we(r,"padding-left",0)-we(r,"padding-right",0)-we(r,"border-left-width",0)-we(r,"border-right-width",0))(t,n)})(e,"content-box");var Vo=tinymce.util.Tools.resolve("tinymce.Env");const zo=mt(5,e=>{const t=`${e+1}px`;return{title:t,value:t}}),Wo=R(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],e=>({title:e,value:e.toLowerCase()})),jt="100%",Vt=e=>{var t;const o=e.dom,l=(t=o.getParent(e.selection.getStart(),o.isBlock))!==null&&t!==void 0?t:e.getBody();return jo(T.fromDom(l))+"px"},I=e=>t=>t.options.get(e),zt=I("table_sizing_mode"),Wt=I("table_border_widths"),je=I("table_border_styles"),Ve=I("table_cell_advtab"),ze=I("table_row_advtab"),$=I("table_advtab"),$o=I("table_appearance_options"),Uo=I("table_grid"),H=I("table_style_by_css"),We=I("table_cell_class_list"),Go=I("table_row_class_list"),$e=I("table_class_list"),Ko=I("table_toolbar"),$t=I("table_background_color_map"),Ut=I("table_border_color_map"),Gt=e=>zt(e)==="fixed",Kt=e=>zt(e)==="responsive",Jt=e=>{const t=e.options,o=t.get("table_default_styles");return t.isSet("table_default_styles")?o:((l,n)=>Kt(l)||!H(l)?n:Gt(l)?S(S({},n),{width:Vt(l)}):S(S({},n),{width:jt}))(e,o)},Qt=e=>{const t=e.options,o=t.get("table_default_attributes");return t.isSet("table_default_attributes")?o:((l,n)=>Kt(l)||H(l)?n:Gt(l)?S(S({},n),{width:Vt(l)}):S(S({},n),{width:jt}))(e,o)},se=e=>t=>q(t,(o=>T.fromDom(o.getBody()))(e)),L=e=>/^\d+(\.\d+)?$/.test(e)?e+"px":e,Ue=e=>T.fromDom(e.selection.getStart()),Jo=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,Qo=(e,t,o)=>((l,n,r)=>{const a=Lt(l,n,q),i=Lt(l,r,q);return a.bind(s=>i.map(c=>{return m=s,u=c,{startRow:Math.min(m.row,u.row),startCol:Math.min(m.column,u.column),finishRow:Math.max(m.row+m.rowspan-1,u.row+u.rowspan-1),finishCol:Math.max(m.column+m.colspan-1,u.column+u.colspan-1)};var m,u}))})(e,t,o).bind(l=>((n,r)=>{let a=!0;const i=k(Jo,r);for(let s=r.startRow;s<=r.finishRow;s++)for(let c=r.startCol;c<=r.finishCol;c++)a=a&&Lo(n,s,c).exists(i);return a?d.some(r):d.none()})(e,l)),Xo=fe,Ge=(e,t)=>{ge(e).each(o=>{o.dom.insertBefore(t.dom,e.dom)})},Xt=(e,t)=>{yt(e).fold(()=>{ge(e).each(o=>{ce(o,t)})},o=>{Ge(o,t)})},ce=(e,t)=>{e.dom.appendChild(t.dom)},Yt=(e,t)=>{M(t,(o,l)=>{const n=l===0?e:t[l-1];Xt(n,o)})},Zt=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},eo=((e,t)=>{const o=l=>e(l)?d.from(l.dom.nodeValue):d.none();return{get:l=>{if(!e(l))throw new Error("Can only get text value of a text node");return o(l).getOr("")},getOption:o,set:(l,n)=>{if(!e(l))throw new Error("Can only set raw text value of a text node");l.dom.nodeValue=n}}})(Ne);var Yo=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];const Zo=(e,t,o,l)=>{const n=t(e,o);return r=(i,s)=>{const c=t(e,s);return el(e,i,c)},a=n,((i,s)=>{for(let c=i.length-1;c>=0;c--)s(i[c],c)})(l,(i,s)=>{a=r(a,i)}),a;var r,a},el=(e,t,o)=>t.bind(l=>o.filter(k(e.eq,l))),tl={up:A({selector:Q,closest:ke,predicate:vt,all:(e,t)=>{const o=F(t)?t:Z;let l=e.dom;const n=[];for(;l.parentNode!==null&&l.parentNode!==void 0;){const r=l.parentNode,a=T.fromDom(r);if(n.push(a),o(a)===!0)break;l=r}return n}}),down:A({selector:Ct,predicate:St}),styles:A({get:Nt,getRaw:X,set:(e,t,o)=>{((l,n,r)=>{if(!Ae(r))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",l),new Error("CSS value must be a string: "+r);Be(l)&&l.style.setProperty(n,r)})(e.dom,t,o)},remove:(e,t)=>{((o,l)=>{Be(o)&&o.style.removeProperty(l)})(e.dom,t),Rt(ae(e,"style").map(ko),"")&&At(e,"style")}}),attrs:A({get:he,set:(e,t,o)=>{xt(e.dom,t,o)},remove:At,copyTo:(e,t)=>{((o,l)=>{const n=o.dom;oe(l,(r,a)=>{xt(n,a,r)})})(t,dt(e.dom.attributes,(o,l)=>(o[l.name]=l.value,o),{}))}}),insert:A({before:Ge,after:Xt,afterAll:Yt,append:ce,appendAll:(e,t)=>{M(t,o=>{ce(e,o)})},prepend:(e,t)=>{(o=>((l,n)=>{const r=l.dom.childNodes;return d.from(r[0]).map(T.fromDom)})(o))(e).fold(()=>{ce(e,t)},o=>{e.dom.insertBefore(t.dom,o.dom)})},wrap:(e,t)=>{Ge(e,t),ce(t,e)}}),remove:A({unwrap:e=>{const t=re(e);t.length>0&&Yt(e,t),Zt(e)},remove:Zt}),create:A({nu:T.fromTag,clone:e=>T.fromDom(e.dom.cloneNode(!1)),text:T.fromText}),query:A({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:e=>d.from(e.dom.previousSibling).map(T.fromDom),nextSibling:yt}),property:A({children:re,name:E,parent:ge,document:e=>ft(e).dom,isText:Ne,isComment:e=>bt(e)===8||E(e)==="#comment",isElement:J,isSpecial:e=>{const t=E(e);return B(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>J(e)?ae(e,"lang"):d.none(),getText:e=>eo.get(e),setText:(e,t)=>eo.set(e,t),isBoundary:e=>!!J(e)&&(E(e)==="body"||B(Yo,E(e))),isEmptyTag:e=>!!J(e)&&B(["br","img","hr","input"],E(e)),isNonEditable:e=>J(e)&&he(e,"contenteditable")==="false"}),eq:q,is:_o},ol=e=>Q(e,"table"),ll=(e,t,o)=>Tt(e,t).bind(l=>Tt(e,o).bind(n=>{return(r=ol,a=[l,n],((i,s,c)=>c.length>0?((m,u,y,b)=>b(m,u,y[0],y.slice(1)))(i,s,c,Zo):d.none())(tl,(i,s)=>r(s),a)).map(i=>({first:l,last:n,table:i}));var r,a})),Ke=e=>R(e,T.fromDom),Je={selected:"data-mce-selected",selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:"data-mce-first-selected",firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:"data-mce-last-selected",lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},to=e=>(t,o)=>{const l=E(t),n=l==="col"||l==="colgroup"?N(r=t).bind(a=>((i,s)=>((c,m)=>{const u=Ct(c,m);return u.length>0?d.some(u):d.none()})(i,s))(a,Je.firstSelectedSelector)).fold(A(r),a=>a[0]):t;var r;return ke(n,e,o)},oo=to("th,td,caption"),lo=to("th,td"),Qe=e=>Ke(e.model.table.getSelectedCells()),nl=(e,t)=>{const o=lo(e),l=o.bind(n=>N(n)).map(n=>Ft(n));return Ot(o,l,(n,r)=>K(r,a=>_e(Ke(a.dom.cells),i=>he(i,t)==="1"||q(i,n)))).getOr([])},Xe=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],rl=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,al=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,sl=e=>{return(t=e,Dt(t,"#")?((o,l)=>o.substring(l))(t,"#".length):t).toUpperCase();var t},Ye=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},Ze=e=>({value:Ye(e.red)+Ye(e.green)+Ye(e.blue)}),cl=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,il=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,et=(e,t,o,l)=>({red:e,green:t,blue:o,alpha:l}),no=(e,t,o,l)=>{const n=parseInt(e,10),r=parseInt(t,10),a=parseInt(o,10),i=parseFloat(l);return et(n,r,a,i)},ro=e=>{if(e==="transparent")return d.some(et(0,0,0,0));const t=cl.exec(e);if(t!==null)return d.some(no(t[1],t[2],t[3],"1"));const o=il.exec(e);return o!==null?d.some(no(o[1],o[2],o[3],o[4])):d.none()},tt=e=>{let t=e;return{get:()=>t,set:o=>{t=o}}},ml=(e,t,o)=>l=>{const n=(i=>{const s=tt(d.none()),c=()=>s.get().each(i);return{clear:()=>{c(),s.set(d.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:m=>{c(),s.set(d.some(m))}}})(i=>i.unbind()),r=!_t(o),a=()=>{const i=Qe(e),s=c=>e.formatter.match(t,{value:o},c.dom,r);r?(l.setActive(!_e(i,s)),n.set(e.formatter.formatChanged(t,c=>l.setActive(!c),!0))):(l.setActive(pe(i,s)),n.set(e.formatter.formatChanged(t,l.setActive,!1,{value:o})))};return e.initialized?a():e.on("init",a),n.clear},ot=e=>it(e,"menu"),ie=e=>R(e,t=>{const o=t.text||t.title||"";return ot(t)?{text:o,items:ie(t.menu)}:{text:o,value:t.value}}),U=(e,t,o,l)=>R(t,n=>{const r=n.text||n.title;return ot(n)?{type:"nestedmenuitem",text:r,getSubmenuItems:()=>U(e,n.menu,o,l)}:{text:r,type:"togglemenuitem",onAction:()=>l(n.value),onSetup:ml(e,o,n.value)}}),Y=(e,t)=>o=>{e.execCommand("mceTableApplyCellStyle",!1,{[t]:o})},me=e=>le(e,t=>ot(t)?[S(S({},t),{menu:me(t.menu)})]:_t(t.value)?[t]:[]),de=(e,t,o,l)=>n=>n(U(e,t,o,l)),Se=(e,t,o)=>{const l=R(t,n=>{return{text:n.title,value:"#"+(a=n.value,(r=a,(i=>rl.test(i)||al.test(i))(r)?d.some({value:sl(r)}):d.none()).orThunk(()=>ro(a).map(Ze)).getOrThunk(()=>{const i=document.createElement("canvas");i.height=1,i.width=1;const s=i.getContext("2d");s.clearRect(0,0,i.width,i.height),s.fillStyle="#FFFFFF",s.fillStyle=a,s.fillRect(0,0,1,1);const c=s.getImageData(0,0,1,1).data,m=c[0],u=c[1],y=c[2],b=c[3];return Ze(et(m,u,y,b))})).value,type:"choiceitem"};var r,a});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:l.length>0?l:void 0,allowCustomColors:!1},onAction:n=>{const r=n.value==="remove"?"":n.value;e.execCommand("mceTableApplyCellStyle",!1,{[o]:r})}}]},ao=e=>()=>{const t=e.queryCommandValue("mceTableRowType")==="header"?"body":"header";e.execCommand("mceTableRowType",!1,{type:t})},so=e=>()=>{const t=e.queryCommandValue("mceTableColType")==="th"?"td":"th";e.execCommand("mceTableColType",!1,{type:t})},dl=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Xe}],co=e=>dl.concat((t=>{const o=ie(We(t));return o.length>0?d.some({name:"class",type:"listbox",label:"Class",items:o}):d.none()})(e).toArray()),lt=(e,t)=>{const o=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(ie(je(e)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:t==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(o):o}},nt=(e,t)=>{const o=e.dom;return{setAttrib:(l,n)=>{o.setAttrib(t,l,n)},setStyle:(l,n)=>{o.setStyle(t,l,n)},setFormat:(l,n)=>{n===""?e.formatter.remove(l,{value:null},t,!0):e.formatter.apply(l,{value:n},t)}}},ul=gt("th"),pl=(e,t)=>e&&t?"sectionCells":e?"section":"cells",bl=e=>{const t=R(e,n=>(r=>{const a=r.section==="thead",i=Rt((s=>{const c=K(s,m=>ul(m.element));return c.length===0?d.some("td"):c.length===s.length?d.some("th"):d.none()})(r.cells),"th");return r.section==="tfoot"?{type:"footer"}:a||i?{type:"header",subType:pl(a,i)}:{type:"body"}})(n).type),o=B(t,"header"),l=B(t,"footer");if(o||l){const n=B(t,"body");return!o||n||l?o||n||!l?d.none():d.some("footer"):d.some("header")}return d.some("body")},io=(e,t)=>pt(e.all,o=>Me(o.cells,l=>q(t,l.element))),gl=(e,t,o)=>{const l=(r=>{const a=[],i=s=>{a.push(s)};for(let s=0;s<r.length;s++)r[s].each(i);return a})(R(t.selection,r=>{return(a=r,((s,c,m=Z)=>m(c)?d.none():B(s,E(c))?d.some(c):Q(c,s.join(","),u=>z(u,"table")||m(u)))(["td","th"],a,i)).bind(s=>io(e,s)).filter(o);var a,i}));return n=l,l.length>0?d.some(n):d.none();var n},mo=(e,t)=>gl(e,t,ee),uo=(e,t)=>pe(t,o=>((l,n)=>io(l,n).exists(r=>!r.isLocked))(e,o)),hl=(e,t)=>((o,l)=>l.mergable)(0,t).filter(o=>uo(e,o.cells)),fl=(e,t)=>((o,l)=>l.unmergable)(0,t).filter(o=>uo(e,o)),yl=((e=>{if(!Re(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],o={};M(e,(l,n)=>{const r=te(l);if(r.length!==1)throw new Error("one and only one name per case");const a=r[0],i=l[a];if(o[a]!==void 0)throw new Error("duplicate key detected:"+a);if(a==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Re(i))throw new Error("case arguments must be an array");t.push(a),o[a]=(...s)=>{const c=s.length;if(c!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+c);return{fold:(...m)=>{if(m.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+m.length);return m[n].apply(null,s)},match:m=>{const u=te(m);if(t.length!==u.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+u.join(","));if(!pe(t,y=>B(u,y)))throw new Error("Not all branches were specified when using match. Specified: "+u.join(", ")+`
Required: `+t.join(", "));return m[a].apply(null,s)},log:m=>{console.log(m,{constructors:t,constructor:a,params:s})}}}})})([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),(e,t)=>{const o=fe(e);return mo(o,t).bind(l=>{const n=l[l.length-1],r=l[0].row,a=n.row+n.rowspan,i=o.all.slice(r,a);return bl(i)}).getOr("")}),Ce=e=>{return Dt(e,"rgb")?ro(t=e).map(Ze).map(o=>"#"+o.value).getOr(t):e;var t},rt=e=>{const t=T.fromDom(e);return{borderwidth:X(t,"border-width").getOr(""),borderstyle:X(t,"border-style").getOr(""),bordercolor:X(t,"border-color").map(Ce).getOr(""),backgroundcolor:X(t,"background-color").map(Ce).getOr("")}},po=e=>{const t=e[0],o=e.slice(1);return M(o,l=>{M(te(t),n=>{oe(l,(r,a)=>{const i=t[n];i!==""&&n===a&&i!==r&&(t[n]="")})})}),t},bo=(e,t,o,l)=>Me(e,n=>!Oe(o.formatter.matchNode(l,t+n))).getOr(""),at=k(bo,["left","center","right"],"align"),wl=k(bo,["top","middle","bottom"],"valign"),Sl=e=>N(T.fromDom(e)).map(t=>{const o={selection:Ke(e.cells)};return yl(t,o)}).getOr(""),go=(e,t)=>{const o=fe(e),l=(r=>le(r.all,a=>a.cells))(o),n=K(l,r=>_e(t,a=>q(r.element,a)));return R(n,r=>({element:r.element.dom,column:Ho(o,r.column).map(a=>a.element.dom)}))},Cl=(e,t,o,l)=>{const n=l.getData();l.close(),e.undoManager.transact(()=>{((r,a,i,s)=>{const c=ue(s,(m,u)=>i[u]!==m);W(c)>0&&a.length>=1&&N(a[0]).each(m=>{const u=go(m,a),y=W(ue(c,(g,v)=>v!=="scope"&&v!=="celltype"))>0,b=V(c,"celltype");(y||V(c,"scope"))&&((g,v,p,h)=>{const f=v.length===1;M(v,w=>{const C=w.element,x=f?ee:h,O=nt(g,C);((D,P,_,G)=>{G("scope")&&D.setAttrib("scope",_.scope),G("class")&&D.setAttrib("class",_.class),G("height")&&D.setStyle("height",L(_.height)),G("width")&&P.setStyle("width",L(_.width))})(O,w.column.map(D=>nt(g,D)).getOr(O),p,x),Ve(g)&&((D,P,_)=>{_("backgroundcolor")&&D.setFormat("tablecellbackgroundcolor",P.backgroundcolor),_("bordercolor")&&D.setFormat("tablecellbordercolor",P.bordercolor),_("borderstyle")&&D.setFormat("tablecellborderstyle",P.borderstyle),_("borderwidth")&&D.setFormat("tablecellborderwidth",L(P.borderwidth))})(O,p,x),h("halign")&&Le(g,C,p.halign),h("valign")&&((D,P,_)=>{Ht.each("top middle bottom".split(" "),G=>{G!==_&&D.formatter.remove("valign"+G,{},P)}),_&&D.formatter.apply("valign"+_,{},P)})(g,C,p.valign)})})(r,u,s,k(V,c)),b&&((g,v)=>{g.execCommand("mceTableCellType",!1,{type:v.celltype,no_events:!0})})(r,s),He(r,m.dom,{structure:b,style:y})})})(e,t,o,n),e.focus()})},vl=e=>{const t=Qe(e);if(t.length===0)return;const o=((r,a)=>{const i=N(a[0]).map(s=>R(go(s,a),c=>((m,u,y,b)=>{const g=m.dom,v=(h,f)=>g.getStyle(h,f)||g.getAttrib(h,f);return S({width:v(b.getOr(u),"width"),height:v(u,"height"),scope:g.getAttrib(u,"scope"),celltype:(p=u,p.nodeName.toLowerCase()),class:g.getAttrib(u,"class",""),halign:at(m,u),valign:wl(m,u)},y?rt(u):{});var p})(r,c.element,Ve(r),c.column)));return po(i.getOrDie())})(e,t),l={type:"tabpanel",tabs:[{title:"General",name:"general",items:co(e)},lt(e,"cell")]},n={type:"panel",items:[{type:"grid",columns:2,items:co(e)}]};e.windowManager.open({title:"Cell Properties",size:"normal",body:Ve(e)?l:n,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onSubmit:k(Cl,e,t,o)})},Tl=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],ho=e=>Tl.concat((t=>{const o=ie(Go(t));return o.length>0?d.some({name:"class",type:"listbox",label:"Class",items:o}):d.none()})(e).toArray()),xl=(e,t,o,l)=>{const n=l.getData();l.close(),e.undoManager.transact(()=>{((r,a,i,s)=>{const c=ue(s,(m,u)=>i[u]!==m);if(W(c)>0){const m=V(c,"type"),u=!m||W(c)>1;u&&((y,b,g,v)=>{const p=b.length===1?ee:v;M(b,h=>{const f=nt(y,h);((w,C,x)=>{x("class")&&w.setAttrib("class",C.class),x("height")&&w.setStyle("height",L(C.height))})(f,g,p),ze(y)&&((w,C,x)=>{x("backgroundcolor")&&w.setStyle("background-color",C.backgroundcolor),x("bordercolor")&&w.setStyle("border-color",C.bordercolor),x("borderstyle")&&w.setStyle("border-style",C.borderstyle)})(f,g,p),v("align")&&Le(y,h,g.align)})})(r,a,s,k(V,c)),m&&((y,b)=>{y.execCommand("mceTableRowType",!1,{type:b.type,no_events:!0})})(r,s),N(T.fromDom(a[0])).each(y=>He(r,y.dom,{structure:m,style:u}))}})(e,t,o,n),e.focus()})},Al=e=>{const t=nl(Ue(e),Je.selected);if(t.length===0)return;const o=R(t,a=>((i,s,c)=>{const m=i.dom;return S({height:m.getStyle(s,"height")||m.getAttrib(s,"height"),class:m.getAttrib(s,"class",""),type:Sl(s),align:at(i,s)},c?rt(s):{})})(e,a.dom,ze(e))),l=po(o),n={type:"tabpanel",tabs:[{title:"General",name:"general",items:ho(e)},lt(e,"row")]},r={type:"panel",items:[{type:"grid",columns:2,items:ho(e)}]};e.windowManager.open({title:"Row Properties",size:"normal",body:ze(e)?n:r,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:l,onSubmit:k(xl,e,R(t,a=>a.dom),l)})},Rl=(e,t,o)=>{const l=o?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],n=$o(e)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],r=t.length>0?[{type:"listbox",name:"class",label:"Class",items:t}]:[];return l.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(n).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(r)},st=(e,t,o,l)=>{if(t.tagName==="TD"||t.tagName==="TH")Ae(o)&&De(l)?e.setStyle(t,o,l):e.setStyles(t,o);else if(t.children)for(let n=0;n<t.children.length;n++)st(e,t.children[n],o,l)},Ol=(e,t,o,l)=>{const n=e.dom,r=l.getData(),a=ue(r,(i,s)=>o[s]!==i);l.close(),r.class===""&&delete r.class,e.undoManager.transact(()=>{if(!t){const i=Mt(r.cols).getOr(1),s=Mt(r.rows).getOr(1);e.execCommand("mceInsertTable",!1,{rows:s,columns:i}),t=lo(Ue(e),se(e)).bind(c=>N(c,se(e))).map(c=>c.dom).getOrDie()}if(W(a)>0){((s,c,m)=>{const u=s.dom,y={},b={};if(Oe(m.class)||(y.class=m.class),b.height=L(m.height),H(s)?b.width=L(m.width):u.getAttrib(c,"width")&&(y.width=(g=>g?g.replace(/px$/,""):"")(m.width)),H(s)?(b["border-width"]=L(m.border),b["border-spacing"]=L(m.cellspacing)):(y.border=m.border,y.cellpadding=m.cellpadding,y.cellspacing=m.cellspacing),H(s)&&c.children)for(let g=0;g<c.children.length;g++)st(u,c.children[g],{"border-width":L(m.border),padding:L(m.cellpadding)}),$(s)&&st(u,c.children[g],{"border-color":m.bordercolor});if($(s)){const g=m;b["background-color"]=g.backgroundcolor,b["border-color"]=g.bordercolor,b["border-style"]=g.borderstyle}y.style=u.serializeStyle(S(S({},Jt(s)),b)),u.setAttribs(c,S(S({},Qt(s)),y))})(e,t,r);const i=n.select("caption",t)[0];(i&&!r.caption||!i&&r.caption)&&e.execCommand("mceTableToggleCaption"),Le(e,t,r.align)}if(e.focus(),e.addVisual(),W(a)>0){const i=V(a,"caption"),s=!i||W(a)>1;He(e,t,{structure:i,style:s})}})},fo=(e,t)=>{const o=e.dom;let l,n=((s,c)=>{const m=Jt(s),u=Qt(s),y=c?{borderstyle:j(m,"border-style").getOr(""),bordercolor:Ce(j(m,"border-color").getOr("")),backgroundcolor:Ce(j(m,"background-color").getOr(""))}:{};return S(S(S(S(S({height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},m),u),y),(()=>{const b=m["border-width"];return H(s)&&b?{border:b}:j(u,"border").fold(()=>({}),g=>({border:g}))})()),S(S({},j(m,"border-spacing").or(j(u,"cellspacing")).fold(()=>({}),b=>({cellspacing:b}))),j(m,"border-padding").or(j(u,"cellpadding")).fold(()=>({}),b=>({cellpadding:b}))))})(e,$(e));t?(n.cols="1",n.rows="1",$(e)&&(n.borderstyle="",n.bordercolor="",n.backgroundcolor="")):(l=o.getParent(e.selection.getStart(),"table",e.getBody()),l?n=((s,c,m)=>{const u=s.dom,y=H(s)?u.getStyle(c,"border-spacing")||u.getAttrib(c,"cellspacing"):u.getAttrib(c,"cellspacing")||u.getStyle(c,"border-spacing"),b=H(s)?ye(u,c,"padding")||u.getAttrib(c,"cellpadding"):u.getAttrib(c,"cellpadding")||ye(u,c,"padding");return S({width:u.getStyle(c,"width")||u.getAttrib(c,"width"),height:u.getStyle(c,"height")||u.getAttrib(c,"height"),cellspacing:y!=null?y:"",cellpadding:b!=null?b:"",border:((g,v)=>{const p=X(T.fromDom(v),"border-width");return H(s)&&p.isSome()?p.getOr(""):g.getAttrib(v,"border")||ye(s.dom,v,"border-width")||ye(s.dom,v,"border")||""})(u,c),caption:!!u.select("caption",c)[0],class:u.getAttrib(c,"class",""),align:at(s,c)},m?rt(c):{})})(e,l,$(e)):$(e)&&(n.borderstyle="",n.bordercolor="",n.backgroundcolor=""));const r=ie($e(e));r.length>0&&n.class&&(n.class=n.class.replace(/\s*mce\-item\-table\s*/g,""));const a={type:"grid",columns:2,items:Rl(e,r,t)},i=$(e)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[a]},lt(e,"table")]}:{type:"panel",items:[a]};e.windowManager.open({title:"Table Properties",size:"normal",body:i,onSubmit:k(Ol,e,l,n),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:n})},Dl=Ie,Il=e=>{const t=(o,l)=>ae(o,l).exists(n=>parseInt(n,10)>1);return e.length>0&&pe(e,o=>t(o,"rowspan")||t(o,"colspan"))?d.some(e):d.none()},_l=(e,t,o)=>{return t.length<=1?d.none():(l=e,n=o.firstSelectedSelector,r=o.lastSelectedSelector,ll(l,n,r).bind(a=>{const i=u=>q(l,u),s="thead,tfoot,tbody,table",c=Q(a.first,s,i),m=Q(a.last,s,i);return c.bind(u=>m.bind(y=>q(u,y)?((b,g,v)=>{const p=Xo(b);return Qo(p,g,v)})(a.table,a.first,a.last):d.none()))})).map(a=>({bounds:a,cells:t}));var l,n,r},Ml=e=>{const t=tt(d.none()),o=tt([]);let l=d.none();const n=gt("caption"),r=p=>l.forall(h=>!h[p]),a=()=>oo(Ue(e),se(e)).bind(p=>{return h=Ot(N(p),oo((f=>T.fromDom(f.selection.getEnd()))(e),se(e)).bind(N),(f,w)=>q(f,w)?n(p)?d.some((C=>({element:C,mergable:d.none(),unmergable:d.none(),selection:[C]}))(p)):d.some(((C,x,O)=>({element:O,mergable:_l(x,C,Je),unmergable:Il(C),selection:Dl(C)}))(Qe(e),f,p)):d.none()),h.bind(Ie);var h}),i=p=>N(p.element).map(h=>{const f=fe(h),w=mo(f,p).getOr([]),C=dt(w,(x,O)=>(O.isLocked&&(x.onAny=!0,O.column===0?x.onFirst=!0:O.column+O.colspan>=f.grid.columns&&(x.onLast=!0)),x),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:hl(f,p).isSome(),unmergeable:fl(f,p).isSome(),locked:C}}),s=()=>{t.set((p=>{let h,f=!1;return(...w)=>(f||(f=!0,h=p.apply(null,w)),h)})(a)()),l=t.get().bind(i),M(o.get(),xo)},c=p=>(p(),o.set(o.get().concat([p])),()=>{o.set(K(o.get(),h=>h!==p))}),m=(p,h)=>c(()=>t.get().fold(()=>{p.setEnabled(!1)},f=>{p.setEnabled(!h(f))})),u=(p,h,f)=>c(()=>t.get().fold(()=>{p.setEnabled(!1),p.setActive(!1)},w=>{p.setEnabled(!h(w)),p.setActive(f(w))})),y=p=>l.exists(h=>h.locked[p]),b=(p,h)=>f=>u(f,w=>n(w.element),()=>e.queryCommandValue(p)===h),g=b("mceTableRowType","header"),v=b("mceTableColType","th");return e.on("NodeChange ExecCommand TableSelectorChange",s),{onSetupTable:p=>m(p,h=>!1),onSetupCellOrRow:p=>m(p,h=>n(h.element)),onSetupColumn:p=>h=>m(h,f=>n(f.element)||y(p)),onSetupPasteable:p=>h=>m(h,f=>n(f.element)||p().isNone()),onSetupPasteableColumn:(p,h)=>f=>m(f,w=>n(w.element)||p().isNone()||y(h)),onSetupMergeable:p=>m(p,h=>r("mergeable")),onSetupUnmergeable:p=>m(p,h=>r("unmergeable")),resetTargets:s,onSetupTableWithCaption:p=>u(p,Z,h=>N(h.element,se(e)).exists(f=>Po(f,"caption").isSome())),onSetupTableRowHeaders:g,onSetupTableColumnHeaders:v,targets:t.get}};var Nl=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const yo=e=>{var t;const o=(t=Nl.read())!==null&&t!==void 0?t:[];return pt(o,l=>d.from(l.getType(e)))},ve=()=>yo("x-tinymce/dom-table-rows"),Te=()=>yo("x-tinymce/dom-table-columns");wo.add("table",e=>{const t=Ml(e);(o=>{const l=o.options.register;l("table_border_widths",{processor:"object[]",default:zo}),l("table_border_styles",{processor:"object[]",default:Wo}),l("table_cell_advtab",{processor:"boolean",default:!0}),l("table_row_advtab",{processor:"boolean",default:!0}),l("table_advtab",{processor:"boolean",default:!0}),l("table_appearance_options",{processor:"boolean",default:!0}),l("table_grid",{processor:"boolean",default:!Vo.deviceType.isTouch()}),l("table_cell_class_list",{processor:"object[]",default:[]}),l("table_row_class_list",{processor:"object[]",default:[]}),l("table_class_list",{processor:"object[]",default:[]}),l("table_toolbar",{processor:"string",default:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"}),l("table_background_color_map",{processor:"object[]",default:[]}),l("table_border_color_map",{processor:"object[]",default:[]})})(e),(o=>{oe({mceTableProps:k(fo,o,!1),mceTableRowProps:k(Al,o),mceTableCellProps:k(vl,o)},(l,n)=>o.addCommand(n,()=>l())),o.addCommand("mceInsertTableDialog",l=>{fo(o,!0)})})(e),((o,l)=>{const n=b=>()=>o.execCommand(b),r=(b,g)=>!!o.queryCommandSupported(g.command)&&(o.ui.registry.addMenuItem(b,S(S({},g),{onAction:F(g.onAction)?g.onAction:n(g.command)})),!0),a=(b,g)=>{o.queryCommandSupported(g.command)&&o.ui.registry.addToggleMenuItem(b,S(S({},g),{onAction:F(g.onAction)?g.onAction:n(g.command)}))},i=b=>{o.execCommand("mceInsertTable",!1,{rows:b.numRows,columns:b.numColumns})},s=[r("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:l.onSetupCellOrRow}),r("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:l.onSetupCellOrRow}),r("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:l.onSetupCellOrRow}),r("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:l.onSetupCellOrRow}),r("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:l.onSetupCellOrRow}),r("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:l.onSetupCellOrRow}),r("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:l.onSetupPasteable(ve)}),r("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:l.onSetupPasteable(ve)})],c=[r("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:l.onSetupColumn("onFirst")}),r("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:l.onSetupColumn("onLast")}),r("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:l.onSetupColumn("onAny")}),r("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:l.onSetupColumn("onAny")}),r("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:l.onSetupColumn("onAny")}),r("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:l.onSetupPasteableColumn(Te,"onFirst")}),r("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:l.onSetupPasteableColumn(Te,"onLast")})],m=[r("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:l.onSetupCellOrRow}),r("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:l.onSetupMergeable}),r("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:l.onSetupUnmergeable})];Uo(o)?o.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:i}]}):o.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:n("mceInsertTableDialog")}),o.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:n("mceInsertTableDialog")}),r("tableprops",{text:"Table properties",onSetup:l.onSetupTable,command:"mceTableProps"}),r("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:l.onSetupTable,command:"mceTableDelete"}),B(s,!0)&&o.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:A("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),B(c,!0)&&o.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:A("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),B(m,!0)&&o.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:A("tablecellprops tablemergecells tablesplitcells")}),o.ui.registry.addContextMenu("table",{update:()=>(l.resetTargets(),l.targets().fold(A(""),b=>E(b.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const u=me($e(o));u.length!==0&&o.queryCommandSupported("mceTableToggleClass")&&o.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>U(o,u,"tableclass",b=>o.execCommand("mceTableToggleClass",!1,b)),onSetup:l.onSetupTable});const y=me(We(o));y.length!==0&&o.queryCommandSupported("mceTableCellToggleClass")&&o.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>U(o,y,"tablecellclass",b=>o.execCommand("mceTableCellToggleClass",!1,b)),onSetup:l.onSetupCellOrRow}),o.queryCommandSupported("mceTableApplyCellStyle")&&(o.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>U(o,Xe,"tablecellverticalalign",Y(o,"vertical-align")),onSetup:l.onSetupCellOrRow}),o.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>U(o,Wt(o),"tablecellborderwidth",Y(o,"border-width")),onSetup:l.onSetupCellOrRow}),o.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>U(o,je(o),"tablecellborderstyle",Y(o,"border-style")),onSetup:l.onSetupCellOrRow}),o.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>Se(o,$t(o),"background-color"),onSetup:l.onSetupCellOrRow}),o.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>Se(o,Ut(o),"border-color"),onSetup:l.onSetupCellOrRow})),a("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:l.onSetupTableWithCaption}),a("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:ao(o),onSetup:l.onSetupTableRowHeaders}),a("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:so(o),onSetup:l.onSetupTableRowHeaders})})(e,t),((o,l)=>{o.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:c=>c("inserttable | cell row column | advtablesort | tableprops deletetable")});const n=c=>()=>o.execCommand(c),r=(c,m)=>{o.queryCommandSupported(m.command)&&o.ui.registry.addButton(c,S(S({},m),{onAction:F(m.onAction)?m.onAction:n(m.command)}))},a=(c,m)=>{o.queryCommandSupported(m.command)&&o.ui.registry.addToggleButton(c,S(S({},m),{onAction:F(m.onAction)?m.onAction:n(m.command)}))};r("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:l.onSetupTable}),r("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:l.onSetupTable}),r("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:l.onSetupCellOrRow}),r("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:l.onSetupMergeable}),r("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:l.onSetupUnmergeable}),r("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:l.onSetupCellOrRow}),r("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:l.onSetupCellOrRow}),r("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:l.onSetupCellOrRow}),r("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:l.onSetupCellOrRow}),r("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:l.onSetupColumn("onFirst")}),r("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:l.onSetupColumn("onLast")}),r("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:l.onSetupColumn("onAny")}),r("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:l.onSetupCellOrRow}),r("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:l.onSetupCellOrRow}),r("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:l.onSetupPasteable(ve)}),r("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:l.onSetupPasteable(ve)}),r("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:l.onSetupColumn("onAny")}),r("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:l.onSetupColumn("onAny")}),r("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:l.onSetupPasteableColumn(Te,"onFirst")}),r("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:l.onSetupPasteableColumn(Te,"onLast")}),r("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table"});const i=me($e(o));i.length!==0&&o.queryCommandSupported("mceTableToggleClass")&&o.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:de(o,i,"tableclass",c=>o.execCommand("mceTableToggleClass",!1,c)),onSetup:l.onSetupTable});const s=me(We(o));s.length!==0&&o.queryCommandSupported("mceTableCellToggleClass")&&o.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:de(o,s,"tablecellclass",c=>o.execCommand("mceTableCellToggleClass",!1,c)),onSetup:l.onSetupCellOrRow}),o.queryCommandSupported("mceTableApplyCellStyle")&&(o.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:de(o,Xe,"tablecellverticalalign",Y(o,"vertical-align")),onSetup:l.onSetupCellOrRow}),o.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:de(o,Wt(o),"tablecellborderwidth",Y(o,"border-width")),onSetup:l.onSetupCellOrRow}),o.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:de(o,je(o),"tablecellborderstyle",Y(o,"border-style")),onSetup:l.onSetupCellOrRow}),o.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:c=>c(Se(o,$t(o),"background-color")),onSetup:l.onSetupCellOrRow}),o.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:c=>c(Se(o,Ut(o),"border-color")),onSetup:l.onSetupCellOrRow})),a("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:l.onSetupTableWithCaption}),a("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:ao(o),onSetup:l.onSetupTableRowHeaders}),a("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:so(o),onSetup:l.onSetupTableColumnHeaders})})(e,t),(o=>{const l=Ko(o);l.length>0&&o.ui.registry.addContextToolbar("table",{predicate:n=>o.dom.is(n,"table")&&o.getBody().contains(n),items:l,scope:"node",position:"node"})})(e)})})();
