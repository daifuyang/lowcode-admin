(function(){"use strict";var T=tinymce.util.Tools.resolve("tinymce.PluginManager");const v=(t,e,r)=>{const i=e==="UL"?"InsertUnorderedList":"InsertOrderedList";t.execCommand(i,!1,r===!1?null:{"list-style-type":r})},O=t=>e=>e.options.get(t),U=O("advlist_number_styles"),A=O("advlist_bullet_styles"),C=t=>t==null,y=t=>!C(t);var N=tinymce.util.Tools.resolve("tinymce.util.Tools");class l{constructor(e,r){this.tag=e,this.value=r}static some(e){return new l(!0,e)}static none(){return l.singletonNone}fold(e,r){return this.tag?r(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?l.some(e(this.value)):l.none()}bind(e){return this.tag?e(this.value):l.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:l.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e!=null?e:"Called getOrDie on None")}static from(e){return y(e)?l.some(e):l.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}l.singletonNone=new l(!1);const P=t=>y(t)&&/^(TH|TD)$/.test(t.nodeName),b=t=>C(t)||t==="default"?"":t,w=(t,e)=>r=>{const i=p=>{r.setActive(((h,s,m)=>{const c=((d,u)=>{for(let n=0;n<d.length;n++)if(u(d[n]))return n;return-1})(s.parents,P),a=c!==-1?s.parents.slice(0,c):s.parents,o=N.grep(a,(d=>u=>y(u)&&/^(OL|UL|DL)$/.test(u.nodeName)&&((n,g)=>n.dom.isChildOf(g,n.getBody()))(d,u))(h));return o.length>0&&o[0].nodeName===m})(t,p,e)),r.setEnabled(!((h,s)=>{const m=h.dom.getParent(s,"ol,ul,dl");return((c,a)=>a!==null&&c.dom.getContentEditableParent(a)==="false")(h,m)})(t,p.element))};return t.on("NodeChange",i),()=>t.off("NodeChange",i)},S=(t,e,r,i,p,h)=>{h.length>1?((s,m,c,a,o,d)=>{s.ui.registry.addSplitButton(m,{tooltip:c,icon:o==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:u=>{u(N.map(d,n=>{const g=o==="OL"?"num":"bull",f=n==="disc"||n==="decimal"?"default":n,L=b(n),x=(I=>I.replace(/\-/g," ").replace(/\b\w/g,B=>B.toUpperCase()))(n);return{type:"choiceitem",value:L,icon:"list-"+g+"-"+f,text:x}}))},onAction:()=>s.execCommand(a),onItemAction:(u,n)=>{v(s,o,n)},select:u=>(g=>{const f=g.dom.getParent(g.selection.getNode(),"ol,ul"),L=g.dom.getStyle(f,"listStyleType");return l.from(L)})(s).map(g=>u===g).getOr(!1),onSetup:w(s,o)})})(t,e,r,i,p,h):((s,m,c,a,o,d)=>{s.ui.registry.addToggleButton(m,{active:!1,tooltip:c,icon:o==="OL"?"ordered-list":"unordered-list",onSetup:w(s,o),onAction:()=>s.queryCommandState(a)||d===""?s.execCommand(a):v(s,o,d)})})(t,e,r,i,p,b(h[0]))};T.add("advlist",t=>{t.hasPlugin("lists")?((e=>{const r=e.options.register;r("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),r("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})})(t),(e=>{S(e,"numlist","Numbered list","InsertOrderedList","OL",U(e)),S(e,"bullist","Bullet list","InsertUnorderedList","UL",A(e))})(t),(e=>{e.addCommand("ApplyUnorderedListStyle",(r,i)=>{v(e,"UL",i["list-style-type"])}),e.addCommand("ApplyOrderedListStyle",(r,i)=>{v(e,"OL",i["list-style-type"])})})(t)):console.error("Please use the Lists plugin together with the Advanced List plugin.")})})();
