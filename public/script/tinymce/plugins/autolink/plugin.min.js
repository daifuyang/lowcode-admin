(function(){"use strict";var Z=tinymce.util.Tools.resolve("tinymce.PluginManager");const h=t=>e=>e.options.get(t),B=h("autolink_pattern"),O=h("link_default_target"),R=h("link_default_protocol"),S=h("allow_unsafe_link_target"),j=t=>(e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&(a=l=e,(s=String).prototype.isPrototypeOf(a)||((d=l.constructor)===null||d===void 0?void 0:d.name)===s.name)?"string":n;var a,l,s,d})(t)==="string",D=t=>t===void 0,A=t=>!(e=>e==null)(t),F=Object.hasOwnProperty,K=t=>t==="\uFEFF";var L=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const C=t=>/^[(\[{ \u00a0]$/.test(t),b=(t,e,n)=>{for(let a=e-1;a>=0;a--){const l=t.charAt(a);if(!K(l)&&n(l))return a}return-1},$=(t,e)=>{var n;const a=t.schema.getVoidElements(),l=B(t),{dom:s,selection:d}=t;if(s.getParent(d.getNode(),"a[href]")!==null)return null;const g=d.getRng(),m=L(s,r=>{return s.isBlock(r)||(i=a,o=r.nodeName.toLowerCase(),F.call(i,o))||s.getContentEditable(r)==="false";var i,o}),{container:u,offset:w}=((r,i)=>{let o=r,c=i;for(;o.nodeType===1&&o.childNodes[c];)o=o.childNodes[c],c=o.nodeType===3?o.data.length:o.childNodes.length;return{container:o,offset:c}})(g.endContainer,g.endOffset),P=(n=s.getParent(u,s.isBlock))!==null&&n!==void 0?n:s.getRoot(),f=m.backwards(u,w+e,(r,i)=>{const o=r.data,c=b(o,i,(p=C,V=>!p(V)));var p,y;return c===-1||(y=o[c],/[?!,.;:]/.test(y))?c:c+1},P);if(!f)return null;let z=f.container;const _=m.backwards(f.container,f.offset,(r,i)=>{z=r;const o=b(r.data,i,C);return o===-1?o:o+1},P),k=s.createRng();_?k.setStart(_.container,_.offset):k.setStart(z,0),k.setEnd(f.container,f.offset);const N=k.toString().replace(/\uFEFF/g,"").match(l);if(N){let r=N[0];return v="www.",(T=r).length>=v.length&&T.substr(0,0+v.length)===v?r=R(t)+"://"+r:((i,o,c=0,p)=>{const y=i.indexOf(o,c);return y!==-1&&(!!D(p)||y+o.length<=p)})(r,"@")&&!(i=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(i))(r)&&(r="mailto:"+r),{rng:k,url:r}}var T,v;return null},x=(t,e)=>{const{dom:n,selection:a}=t,{rng:l,url:s}=e,d=a.getBookmark();a.setRng(l);const g="createlink",m={command:g,ui:!1,value:s};if(!t.dispatch("BeforeExecCommand",m).isDefaultPrevented()){t.getDoc().execCommand(g,!1,s),t.dispatch("ExecCommand",m);const u=O(t);if(j(u)){const w=a.getNode();n.setAttrib(w,"target",u),u!=="_blank"||S(t)||n.setAttrib(w,"rel","noopener")}}a.moveToBookmark(d),t.nodeChanged()},E=t=>{const e=$(t,-1);A(e)&&x(t,e)},M=E;Z.add("autolink",t=>{(e=>{const n=e.options.register;n("autolink_pattern",{processor:"regexp",default:new RegExp("^"+/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g.source+"$","i")}),n("link_default_target",{processor:"string"}),n("link_default_protocol",{processor:"string",default:"https"})})(t),(e=>{e.on("keydown",n=>{n.keyCode!==13||n.isDefaultPrevented()||(a=>{const l=$(a,0);A(l)&&x(a,l)})(e)}),e.on("keyup",n=>{n.keyCode===32?E(e):(n.keyCode===48&&n.shiftKey||n.keyCode===221)&&M(e)})})(t)})})();
