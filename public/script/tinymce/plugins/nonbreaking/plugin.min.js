(function(){"use strict";var c=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=n=>e=>typeof e===n,l=t("boolean"),u=t("number"),i=n=>e=>e.options.get(n),b=i("nonbreaking_force_tab"),g=i("nonbreaking_wrap"),r=(n,e)=>{let a="";for(let o=0;o<e;o++)a+=n;return a},s=(n,e)=>{const a=g(n)||n.plugins.visualchars?`<span class="${(o=>!!o.plugins.visualchars&&o.plugins.visualchars.isEnabled())(n)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap"}" contenteditable="false">${r("&nbsp;",e)}</span>`:r("&nbsp;",e);n.undoManager.transact(()=>n.insertContent(a))};var p=tinymce.util.Tools.resolve("tinymce.util.VK");c.add("nonbreaking",n=>{(e=>{const a=e.options.register;a("nonbreaking_force_tab",{processor:o=>l(o)?{value:o?3:0,valid:!0}:u(o)?{value:o,valid:!0}:{valid:!1,message:"Must be a boolean or number."},default:!1}),a("nonbreaking_wrap",{processor:"boolean",default:!0})})(n),(e=>{e.addCommand("mceNonBreaking",()=>{s(e,1)})})(n),(e=>{const a=()=>e.execCommand("mceNonBreaking");e.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:a}),e.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:a})})(n),(e=>{const a=b(e);a>0&&e.on("keydown",o=>{if(o.keyCode===p.TAB&&!o.isDefaultPrevented()){if(o.shiftKey)return;o.preventDefault(),o.stopImmediatePropagation(),s(e,a)}})})(n)})})();
