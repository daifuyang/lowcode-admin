(function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager");const i=(e,a,t)=>{e.dom.toggleClass(e.getBody(),"mce-visualblocks"),t.set(!t.get()),((s,o)=>{s.dispatch("VisualBlocks",{state:o})})(e,t.get())},u=e=>e.options.get("visualblocks_default_state"),c=(e,a)=>t=>{t.setActive(a.get());const s=o=>t.setActive(o.state);return e.on("VisualBlocks",s),()=>e.off("VisualBlocks",s)};n.add("visualblocks",(e,a)=>{(s=>{(0,s.options.register)("visualblocks_default_state",{processor:"boolean",default:!1})})(e);const t=(s=>{let o=!1;return{get:()=>o,set:l=>{o=l}}})();((s,o,l)=>{s.addCommand("mceVisualBlocks",()=>{i(s,0,l)})})(e,0,t),((s,o)=>{const l=()=>s.execCommand("mceVisualBlocks");s.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:l,onSetup:c(s,o)}),s.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:l,onSetup:c(s,o)})})(e,t),((s,o,l)=>{s.on("PreviewFormats AfterPreviewFormats",r=>{l.get()&&s.dom.toggleClass(s.getBody(),"mce-visualblocks",r.type==="afterpreviewformats")}),s.on("init",()=>{u(s)&&i(s,0,l)})})(e,0,t)})})();
