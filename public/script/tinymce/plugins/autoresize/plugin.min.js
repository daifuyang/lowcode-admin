(function(){"use strict";var S=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=tinymce.util.Tools.resolve("tinymce.Env");const g=t=>o=>o.options.get(t),z=g("min_height"),_=g("max_height"),b=g("autoresize_overflow_padding"),w=g("autoresize_bottom_margin"),d=(t,o)=>{const e=t.getBody();e&&(e.style.overflowY=o?"":"hidden",o||(e.scrollTop=0))},h=(t,o,e,s)=>{var n;const r=parseInt((n=t.getStyle(o,e,s))!==null&&n!==void 0?n:"",10);return isNaN(r)?0:r},f=(t,o,e)=>{var s;const n=t.dom,r=t.getDoc();if(!r)return;if((u=>u.plugins.fullscreen&&u.plugins.fullscreen.isFullscreen())(t))return void d(t,!0);const m=r.documentElement,E=w(t),v=(s=z(t))!==null&&s!==void 0?s:t.getElement().offsetHeight;let l=v;const H=h(n,m,"margin-top",!0),O=h(n,m,"margin-bottom",!0);let c=m.offsetHeight+H+O+E;c<0&&(c=0);const y=t.getContainer().offsetHeight-t.getContentAreaContainer().offsetHeight;c+y>v&&(l=c+y);const p=_(t);if(p&&l>p?(l=p,d(t,!0)):d(t,!1),l!==o.get()){const u=l-o.get();if(n.setStyle(t.getContainer(),"height",l+"px"),o.set(l),(i=>{i.dispatch("ResizeEditor")})(t),a.browser.isSafari()&&(a.os.isMacOS()||a.os.isiOS())){const i=t.getWin();i.scrollTo(i.pageXOffset,i.pageYOffset)}t.hasFocus()&&(i=>{if((i==null?void 0:i.type.toLowerCase())==="setcontent"){const C=i;return C.selection===!0||C.paste===!0}return!1})(e)&&t.selection.scrollIntoView(),(a.browser.isSafari()||a.browser.isChromium())&&u<0&&f(t,o,e)}};S.add("autoresize",t=>{if((o=>{const e=o.options.register;e("autoresize_overflow_padding",{processor:"number",default:1}),e("autoresize_bottom_margin",{processor:"number",default:50})})(t),t.options.isSet("resize")||t.options.set("resize",!1),!t.inline){const o=(e=>{let s=0;return{get:()=>s,set:n=>{s=n}}})();((e,s)=>{e.addCommand("mceAutoResize",()=>{f(e,s)})})(t,o),((e,s)=>{e.on("init",()=>{const n=b(e),r=e.dom;r.setStyles(e.getDoc().documentElement,{height:"auto"}),r.setStyles(e.getBody(),{paddingLeft:n,paddingRight:n,"min-height":0})}),e.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",n=>{f(e,s,n)})})(t,o)}})})();
